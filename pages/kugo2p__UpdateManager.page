<apex:page tabStyle="kugo2p__KugamonSetting__c" controller="kugo2p.KugamonUpdates" title="Kugamon Update Wizard" action="{!checkForUpdatesAction}">
<apex:form >
    <!-- <apex:sectionHeader title="Kugamon Update Wizard" subtitle="Available Updates" /> -->
    <c:PageHeader title="Kugamon Update Wizard" subtitle="Available Updates" pathname="custom" icon="custom67" description="Review the list of available updates. Only the updates that require additional processing post-install are listed below." addLineBreak="false" />
    <div class="ptBreadcrumb kugamon"> « <a href="/{!Settings.Id}">Back to Kugamon Settings</a></div>

    <apex:pageMessages />
    
    <!-- <p>Review the list of available updates. Only the updates that require additional processing post-install are listed below. </p> -->
    
    <apex:pageBlock >
        <apex:pageBlockSection title="Available Updates" collapsible="false" columns="1">
            <apex:pageBlockTable value="{!AvailableUpdates}" var="update" rendered="{!updatesAvailable}">
                <apex:column headerValue="Action">
                    <apex:commandLink value="Update" action="{!runUpdate}" rendered="{!IF(update.kugo2p__Status__c == 'Not Applied',true,false)}" style="font-weight: bold;">
                        <apex:param name="version" value="{!update.Name}" assignTo="{!VersionToUpdate}" />
                    </apex:commandLink>
                </apex:column>
                <apex:column value="{!update.Name}" headerValue="Release" />
                <apex:column value="{!update.kugo2p__ScriptDescription__c}" headerValue="Update Summary" />
                <apex:column value="{!update.kugo2p__ReleaseDate__c}" />
                <apex:column value="{!update.kugo2p__Status__c}" />
            </apex:pageBlockTable>
            
            <apex:outputPanel rendered="{!IF(updatesAvailable,false,true)}">
                <p>No updates currently available.</p><br/>
                <p>For Kugamon product support, please contact&nbsp;<apex:outputLink value="mailto:support@kugamon.com">support@kugamon.com</apex:outputLink>.</p>
            </apex:outputPanel>
        </apex:pageBlockSection>
    </apex:pageBlock>
    
</apex:form>
</apex:page>