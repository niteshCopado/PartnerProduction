<apex:page controller="kugadd.ContactAddressUpdate" tabStyle="Contact" id="selectContactId" cache="false" sidebar="true" showHeader="true">
    <script src="/soap/ajax/17.0/connection.js" type="text/javascript"></script>
    <script src="/soap/ajax/17.0/apex.js" type="text/javascript"></script> 
    <script>sforce.connection.sessionId = '{!$Api.Session_ID}'; </script>

	<apex:stylesheet value="{!URLFOR($Resource.kugadd__SLDS, 'assets/styles/salesforce-lightning-design-system-vf.min.css')}" />    
<style>
    .selectButtons {
        text-align:center;
        margin-bottom: 1em;
    } 
    .inputTitle {
        font-weight:bold;
    }   
    body .bRelatedList .bPageBlock .pbTitle{
        padding: 0 5px;
    } 
    #statusBox {
        // for Modzilla
        -moz-background-clip:border;
        -moz-background-inline-policy:continuous;
        -moz-background-origin:padding;
        -moz-border-radius-bottomleft:5px;
        -moz-border-radius-bottomright:5px;
        -moz-border-radius-topleft:5px;
        -moz-border-radius-topright:5px;
        -moz-box-shadow:1px 6px 5px #888888;
        
        -webkit-border-bottom-left-radius:5px;
        -webkit-border-bottom-right-radius:5px;
        -webkit-border-top-left-radius:5px;
        -webkit-border-top-right-radius:5px;
        -webkit-box-shadow:1px 6px 5px #888888;
        
        //box-shadow: 1px 6px 5px #888888;
        box-shadow: 1px 3px 5px #888888;
        
        background:#FFFFFF none repeat scroll 0 0;
        height:42px;
        //left:650px;
        left:50%;
        padding-left:15px;
        padding-top:11px;
        position:absolute;
        top:415px;
        vertical-align:middle;
        width:200px;
        z-index: 1;
    }
    #textBox {
        margin-left:40px;
        margin-top:-20px;
    }
</style> 


<br/> 
<body class="contactTab">
	<!-- 
    <apex:sectionHeader title="{!accountName}" rendered="{!(!isPersonAccount)}" 
            subtitle="Contact Selection" help="/help/doc/user_ed.jsp?loc=help&target=contacts_fields.htm&section=Contacts"/>
	 -->

	<!-- PAGE HEADER -->
	<apex:outputPanel layout="block" styleClass="kugamon" rendered="{!(!isPersonAccount)}">	
    <div class="slds-page-header" role="banner">
        <!-- LAYOUT GRID -->
        <div class="slds-grid">
            <!-- GRID COL -->
            <div class="slds-col">
                <!-- HEADING AREA -->
                <!-- MEDIA OBJECT = FIGURE + BODY -->
                <div class="slds-media">
                    <div class="slds-media__figure">
      					<span class="slds-icon_container slds-icon-standard-contact" title="Description of icon when needed">						
							<svg class="slds-icon slds-page-header__icon" aria-hidden="true">
								<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Resource.SLDS, '/assets/icons/standard-sprite/svg/symbols.svg#contact')}" />
							</svg>
						</span>	
                    </div>
                    <div class="slds-media__body">
                        <p class="slds-text-heading--label">{!accountName}</p>
                        <h1 class="slds-text-heading--medium"><b>Contact Selection</b></h1>
                    </div>
                </div>
                <!-- / MEDIA OBJECT -->
                <!-- /HEADING AREA -->
            </div>
        </div>
        <div class="slds-grid">
            <!-- GRID COL -->
            <div class="slds-col slds-align-bottom">
                <p class="slds-text-body--small slds-p-top--medium">Select Contact(s) to update Phone, Fax, Mailing and Other Address Information.</p>
            </div>
        </div>
        <!-- / LAYOUT GRID -->
    </div>
    </apex:outputPanel>
    <!-- / PAGE HEADER -->   

</body>
    
    <apex:form id="selectionContactFormId" >	<!-- onkeypress="onEnter(event);" -->

		<apex:outputPanel layout="block" style="text-align:center;" rendered="{!(isPersonAccount)}">
			<apex:pageMessages id="msgPA" escape="false"/>
			<br></br>
	        <apex:commandButton value="Back"  action="{!returnToAccount}"/>
		</apex:outputPanel>

        <apex:outputPanel rendered="{!(!isPersonAccount)}">
        <!--         
        <div class="bOverviewSearch">
            <div class="view">
            Select Contact(s) to update Phone, Fax, Mailing and Other Address Information.
            </div>
            <div class="messages">  </div>
        </div>
        -->

        <script>
            var intSelectedItemsCount = 0;
            var intCurrentPageSelectedItemsCount = 0;
            var disableSyncContactCount = +0;
        </script>
        
         <apex:outputPanel id="jsPanel">
         	<script>
         		//disableSyncContactCount = 
         		//alert('in jsPanel ' + disableSyncContactCount);
         	</script>        
         </apex:outputPanel>        

         <apex:outputPanel id="pageMessages2">
         	<apex:pageMessage strength="2" severity="info" detail="Automatic Account Address to Contact Sync is currently disabled for this Salesforce Org. You can manually update Contact information using the function below. To enable the Automatic Account Address to Contact Sync, please contact your Salesforce Administrator." rendered="{!DisableAccountToContactSync}"/>        
            <apex:pageMessages id="msg" />
                <!-- Display error message -->
                <apex:pagemessage id="pageMessages" title="Missing" strength="2" severity="error" detail="Please select contact(s) to update." rendered="{!ShowError}"/>
                <!-- End of error message -->   
         </apex:outputPanel>
         
    <apex:actionStatus id="counterStatus" onstart="document.body.style.cursor = 'wait'; " onstop="document.body.style.cursor = 'default'; setHeaderCheckBox(); " />
    
         
    <apex:actionStatus id="sortStatus">
        <apex:facet name="start" >
            <div id="salesforceSource_blurybackground" style="position:absolute; left:0px; top:0px; width:100%; height:150%; z-index: 1; text-align:center; vertical-align: middle; background-color: #dcdcdc; opacity:0.6;filter:alpha(opacity=60)">
            </div>
             <div id="statusBox">
                <!-- <img src="/img/loading32.gif" /> -->
                <img src="{!URLFOR($Resource.SLDS, '/assets/images/spinners/slds_spinner_brand.gif')}" height="32" width="32" alt="Processing..." />
                <div id="textBox">Processing by Kugamon...</div>
            </div>
        </apex:facet>
    </apex:actionStatus>
    <apex:actionStatus id="updateStatus" onstop="javascript:updateDone();">
        <apex:facet name="start" >
            <div id="salesforceSource_blurybackground" style="position:absolute; left:0px; top:0px; width:100%; height:150%; z-index: 1; text-align:center; vertical-align: middle; background-color: #dcdcdc; opacity:0.6;filter:alpha(opacity=60)">
            </div>
             <div id="statusBox">
                <!-- <img src="/img/loading32.gif" /> -->
                <img src="{!URLFOR($Resource.SLDS, '/assets/images/spinners/slds_spinner_brand.gif')}" height="32" width="32" alt="Processing..." />
                <div id="textBox">Processing by Kugamon...</div>
            </div>
        </apex:facet>
    </apex:actionStatus>

		<apex:actionfunction name="updateDisableSyncContactCount" action="{!nullAction}" rerender="jsPanel" status="busyStatus"/>
        <apex:actionfunction name="previousCall" action="{!PreviousBtnClick}" rerender="Results,opPrevNextup,opPrevNext,tablePrevNextup,tablePrevNext" oncomplete="setHeaderCheckBox(1);" status="busyStatus"/>
        <apex:actionfunction name="nextCall" action="{!NextBtnClick}" rerender="Results,opPrevNextup,opPrevNext,tablePrevNextup,tablePrevNext" oncomplete="setHeaderCheckBox(1);" status="busyStatus"/>
		<apex:actionfunction name="afPerformSearch" action="{!performSearch}" rerender="Results,resultsDataTable,opPrevNextup,opPrevNext,tablePrevNextup,tablePrevNext,itemGrid,pageMessages2" status="sortStatus" />

		<br/>
        <div class="selectButtons kugamon"> 
            <apex:commandButton value="Close" action="{!returnToAccount}" styleClass="slds-button slds-button--neutral" />&nbsp;
            <!-- <apex:commandButton value="Update" action="{!processSelected}" rerender="Results,selectionContactFormId" status="updateStatus"/> -->
            <apex:commandButton value="Update" action="{!processSelected}" rerender="Results,selectionContactFormId,pageMessages2" status="updateStatus" styleClass="slds-button slds-button--brand"/>	<!-- onclick="if(!confirmUpdate()) return;"  -->       
        </div> 
    
    <div id="PricebookEntry" class="bRelatedList">
        
      <div class="listRelatedObject pricebookentryBlock">          
        <div class="bPageBlock secondaryPalette" id="pgBlock">
        <div class="pbHeader" id="pnlsearch">
            <table >
                <tbody>
                    <!-- Line to select number of Contacts to display per page -->
                    <tr>
                        <td class="pbTitle" style="left-padding:15px;">
                            <img height="1" width="1" title="" class="minWidth" alt="" src="/s.gif"/>
                            <img title="" class="relatedListIcon" alt="" src="/s.gif"/>
                            <h2>
                               <span >Available Contacts [<apex:outputpanel id="itemGrid">{!contactsCount}</apex:outputpanel>]</span>
                            </h2>
                        </td>
                        
                        <td class="pbButton">&nbsp;</td>
                        
                        <td class="pbHelp">
                           
                           <span >
                           <div>        
                               <b>Records Per Page</b> &nbsp; 
                               <apex:actionFunction name="changePagesize" action="{!changePagesize}" rerender="Results" status="sortStatus" oncomplete="setHeaderCheckBox(1);"/>
                               <apex:selectList id="chooseSize" value="{!pageSize}" size="1" onchange="changePagesize();" style="font-size:8pt">
                                    <apex:selectOption itemValue="10" itemLabel="10"/>
                                    <apex:selectOption itemValue="25" itemLabel="25"/>
                                    <apex:selectOption itemValue="50" itemLabel="50"/>
                                    <apex:selectOption itemValue="100" itemLabel="100"/>
                                    <apex:selectOption itemValue="200" itemLabel="200"/>
                               </apex:selectList>   
                                                      
                           </div>                                              
                           </span>
                        </td>
                    </tr>
                    
                    
                    
                    <tr>
                        <td colspan="3">
                            <div class="searchFilterFieldsHolder searchFilterFieldsHolderFirst">
                            <table  class="searchFilterFields" id="idsearchFilterFields" >
                               <tbody>
                                 <!-- First line - Message -->
                                <tr>
                                 <td colspan="3">  Change the pre-filled Account fields to update the selected Contact(s).  
                                 </td>
                                </tr>
        
                                <!-- Second Line - Display addresses -->
                                <tr style="height:100px; ">
                                  <td style="vertical-align:top;font-size:11px;line-height:2.3;padding-top:33px; display:{!IF(StateAndCountryPicklistEnabled, 'none','')}" width="10%">
                                   Street: <br/><br/>
                                   City: <br/>
                                   State/Province: <br/>
                                   Zip/Postal Code: <br/>
                                   Country: <br/>
                                  </td>
                                  <!-- Billing Address  -->
                                  <td class="keywordElement" style="width: 25%; display:{!IF(StateAndCountryPicklistEnabled, 'none','')}">
                                  	<apex:outputPanel rendered="{!NOT(StateAndCountryPicklistEnabled)}">
	                                     <br/>
	                                     <apex:inputCheckbox value="{!updateMailingAddress}" /> <span class="inputTitle" style="vertical-align:top;">Update Mailing Address &nbsp;&nbsp;&nbsp;</span>
	                                     <br/>
	                                     <apex:inputField id="accountBStreet" value="{!accountRec.BillingStreet}" style="width:150px;font-size:8pt;padding:2px;" onblur="javascript:CheckLength(this)"/> <br/>
	                                     <apex:inputField id="accountBCity" value="{!accountRec.BillingCity}" style="width:150px;font-size:8pt;padding:2px;" onblur="javascript:CheckLength(this)" /> <br/>
	                                     <apex:inputField id="accountBState" value="{!accountRec.BillingState}" style="width:150px;font-size:8pt;padding:2px;" onblur="javascript:CheckLength(this)"/> <br/>
	                                     <apex:inputField id="accountBPostalCode" value="{!accountRec.BillingPostalCode}" style="width:150px;font-size:8pt;padding:2px;" onblur="javascript:CheckLength(this)" /> <br/>
	                                     <apex:inputField id="accountBCountry" value="{!accountRec.BillingCountry}" style="width:150px;font-size:8pt;padding:2px;" onblur="javascript:CheckLength(this)"/> <br/>
	                              	</apex:outputPanel>       
                                  </td>

                                  <td style="vertical-align:top;font-size:11px;line-height:2.3;padding-top:33px; display:{!IF(StateAndCountryPicklistEnabled, '','none')}" width="10%">
                                   Country:<br/>
                                   Street: <br/><br/>
                                   City: <br/>
                                   State/Province: <br/>
                                   Zip/Postal Code: <br/>
                                  </td>
                                  <td class="keywordElement" style="width: 25%; display:{!IF(StateAndCountryPicklistEnabled, '','none')}">
									 <apex:outputPanel rendered="{!StateAndCountryPicklistEnabled}">
	                                     <br/>
	                                     <apex:inputCheckbox value="{!updateMailingAddress}" /> <span class="inputTitle" style="vertical-align:top;">Update Mailing Address &nbsp;&nbsp;&nbsp;</span>
	                                     <br/>
	                                     <!-- <apex:outputLabel value="Country:" for="accountBCountryNew" /> -->
	                                     <apex:inputField id="accountBCountryNew" value="{!accountRec[billingCountryFieldName]}" label="Country" style="width:200px;font-size:8pt;padding:2px;" onblur="javascript:CheckLength(this)"/> <br/><br/>
	                                     <apex:inputField id="accountBStreetNew" value="{!accountRec.BillingStreet}" label="Street" style="width:150px;font-size:8pt;padding:2px;" onblur="javascript:CheckLength(this)"/> <br/>
	                                     <apex:inputField id="accountBCityNew" value="{!accountRec.BillingCity}" label="City" style="width:150px;font-size:8pt;padding:2px;" onblur="javascript:CheckLength(this)" /> <br/>
	                                     <apex:inputField id="accountBStateNew" value="{!accountRec[billingStateFieldName]}" label="State" style="width:200px;font-size:8pt;padding:2px;" onblur="javascript:CheckLength(this)"/> <br/>
	                                     <apex:inputField id="accountBPostalCodeNew" value="{!accountRec.BillingPostalCode}" label="Zip/Postal Code:" style="width:150px;font-size:8pt;padding:2px;" onblur="javascript:CheckLength(this)" /> <br/>
                                     </apex:outputPanel>
                                  </td>
                         
                                  <!-- Shipping Address  -->
                                  <td style="width: 25%;text-align:middle; display:{!IF(StateAndCountryPicklistEnabled, 'none','')}" >
                                  	  <apex:outputPanel rendered="{!NOT(StateAndCountryPicklistEnabled)}">	
	                                      <apex:inputCheckbox value="{!updateOtherAddress}" /><span class="inputTitle" style="vertical-align:top;">Update Other Address &nbsp;&nbsp;&nbsp;</span>
	                                      <br/>
	                                      <apex:inputField id="accountSStreet" value="{!accountRec.ShippingStreet}" style="width:150px;font-size:8pt;padding:2px;"/>  <br/>
	                                      <apex:inputText id="accountSCity" value="{!accountRec.ShippingCity}" style="width:150px;font-size:8pt;padding:2px;"></apex:inputText>  <br/>
	                                      <apex:inputField id="accountSState" value="{!accountRec.ShippingState}" style="width:150px;font-size:8pt;padding:2px;"/>  <br/>
	                                      <apex:inputText id="accountSPostalCode" value="{!accountRec.ShippingPostalCode}" style="width:150px;font-size:8pt;padding:2px;"></apex:inputText>  <br/>
	                                      <apex:inputField id="accountSCountry" value="{!accountRec.ShippingCountry}" style="width:150px;font-size:8pt;padding:2px;"/>  <br/>
	                                  </apex:outputPanel>    
                                  </td>
                                  
                                  <td style="width: 25%;text-align:middle; display:{!IF(StateAndCountryPicklistEnabled, '','none')}" >
                                  		<apex:outputPanel rendered="{!StateAndCountryPicklistEnabled}">
	                                      <apex:inputCheckbox value="{!updateOtherAddress}" /><span class="inputTitle" style="vertical-align:top;">Update Other Address &nbsp;&nbsp;&nbsp;</span>
	                                      <br/>
	                                      <apex:inputField id="accountSCountryNew" value="{!accountRec[ShippingCountryFieldName]}" style="width:200px;font-size:8pt;padding:2px;"/>  <br/><br/>
	                                      <apex:inputField id="accountSStreetNew" value="{!accountRec.ShippingStreet}" style="width:150px;font-size:8pt;padding:2px;"/>  <br/>
	                                      <apex:inputText id="accountSCityNew" value="{!accountRec.ShippingCity}" style="width:150px;font-size:8pt;padding:2px;"></apex:inputText>  <br/>
	                                      <apex:inputField id="accountSStateNew" value="{!accountRec[ShippingStateFieldName]}" style="width:200px;font-size:8pt;padding:2px;"/>  <br/>
	                                      <apex:inputText id="accountSPostalCodeNew" value="{!accountRec.ShippingPostalCode}" style="width:150px;font-size:8pt;padding:2px;"></apex:inputText>  <br/>
	                                   </apex:outputPanel>   
                                  </td>                                  
                                  
                                  <!-- Account Phone and Fax -->
                                  <td style="width: 25%;text-align:middle;">
                                      <apex:inputCheckbox value="{!updatePhone}" /><span class="inputTitle" style="vertical-align:top;">Update Phone &nbsp;&nbsp;&nbsp;</span>
                                      <br/>
                                      <apex:inputField id="accountPhone" value="{!accountRec.Phone}" style="width:150px;font-size:8pt;padding:2px;" />  <br/><br/><br/>
                                      
                                      <!-- Fax -->
                                      <apex:inputCheckbox value="{!updateFax}" /><span class="inputTitle" style="vertical-align:top;">Update Fax &nbsp;&nbsp;&nbsp;</span>
                                      <br/>
                                      <apex:inputField id="accountFax" value="{!accountRec.Fax}" style="width:150px;font-size:8pt;padding:2px;" />  <br/>
                                      <br/><br/><br/><!--<br/><br/><br/><br/>  -->
                                  </td>
                                 </tr>
                                </tbody>    
                               </table>                        
                            </div>
                        </td>
                    </tr>               
                </tbody>
            </table>
        </div>   <!-- End PbHeader -->
        
        <div class="pbHeader" >
            <table >
                <tbody>
                    <tr>
                        <td colspan="3">
                            <apex:outputPanel id="searchSection" layout="block">
                            <div class="searchFilterFieldsHolder searchFilterFieldsHolderFirst">
                            <table  class="searchFilterFields" >
                               <tbody>
                                  <tr>
                                    <td style="width:200px;">
										<apex:outputPanel id="searchSection1">
                                      		<apex:inputText value="{!searchTerm}" html-placeholder="Search..." style="width:200px;" onkeypress="return noenter(event);"/>
                                      	</apex:outputPanel>	
                                    </td>
                                    <td style="width:125px;">
                                    	<apex:outputPanel id="searchSection2">
                                      		<apex:selectList value="{!selectedSearchOption}" multiselect="false" size="1" title="All searches Name, Email, Phone, Fax, Mailing Address, and Record Type">
                                          		<apex:selectOptions value="{!SearchOptions}" />
                                      		</apex:selectList>
                                      	</apex:outputPanel>
                                    </td> 
                                    <td style="width:100px;">
                                    	<div class="kugamon">

                                      	<!-- <apex:commandButton id="filterButton" value="Filter" action="{!performSearch}" styleClass="slds-button slds-button--neutral" rerender="Results,resultsDataTable,opPrevNextup,opPrevNext,tablePrevNextup,tablePrevNext,itemGrid,pageMessages2" status="sortStatus" /> -->

                                    	<button class="slds-button slds-button--neutral" id="filterButton" onclick="afPerformSearch();return false;">
                                      	<svg class="slds-button__icon slds-button__icon_left" aria-hidden="true">
    										<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Resource.SLDS, '/assets/icons/utility-sprite/svg/symbols.svg#search')}" />
  										</svg>
  										Filter
  										</button>

                                      	</div>
                                    </td>
                                    <td>
                                    	<apex:outputPanel styleClass="kugamon">
										<apex:commandLink value="Clear Filter" action="{!clearFilter}" rerender="Results,resultsDataTable,opPrevNextup,opPrevNext,tablePrevNextup,tablePrevNext,itemGrid,pageMessages2,searchSection1,searchSection2" status="sortStatus"
                                      					styleClass="slds-text-link" 
                                      					style="font-family:Arial; vertical-align:middle; text-align:left; font-size:8pt;"/>
                                      	</apex:outputPanel>
                                    </td>
                                    
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                            </apex:outputPanel>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
<!--
        <apex:outputPanel id="searchSection" layout="block">
        <div class="pbBody">
          <div class="pbSubsection">
          <div class="searchFilterFieldsHolder searchFilterFieldsHolderFirst">
            <table  class="searchFilterFields" style="background:transparent; border:none;">
              <tbody>
                <tr>
                  <td>
                    <apex:inputText value="{!searchTerm}" html-placeholder="Search..."/>
                  </td>
                  <td>
                    <apex:selectList value="{!selectedSearchOption}" multiselect="false" size="1">
                        <apex:selectOptions value="{!SearchOptions}" />
                    </apex:selectList>
                  </td> 
                  <td>
                    <apex:commandButton value="Filter" action="{!performSearch}" rerender="Results,resultsDataTable,opPrevNextup,opPrevNext,tablePrevNextup,tablePrevNext,itemGrid,pageMessages2" status="sortStatus"/>
                  </td>
                  <td>
                    <apex:commandLink value="Clear Filter" action="{!clearFilter}" rerender="Results,resultsDataTable,opPrevNextup,opPrevNext,tablePrevNextup,tablePrevNext,itemGrid,pageMessages2,searchSection" status="sortStatus" style="font-family:Arial; vertical-align:middle; text-align:left; font-size:8pt;"/>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
        </apex:outputPanel>
  -->    
          
        <apex:outputPanel id="Results" layout="block" style="{!ShowBlockIfResults}">
        
            <div class="pbBody" > 
            <font style="line-height:5px;">&nbsp;</font>    
            <div class="relatedListsearchHeader"> 
                <div class="pSearchShowMore">
                    <apex:outputPanel id="opPrevNextup">
                    
			        <span id="selectedItemsId" style="display:none;"> 
			            <apex:inputHidden value="{!currentPageSelectedCount}"/>
			            <apex:outputText value="{!SearchResultsCurrentPageSize}"  style="display:none"/>
			        </span>

                        <table width="100%" id="tablePrevNextup" >
                          <tr >
                             <td width="50%" align="center" >
                                   
                                  <font >   

                                  <apex:image url="/img/search_prevarrow.gif" styleClass="prevArrow" rendered="{!If(PreviousButtonEnabled,false,true)}" alt="Previous Page" title="Previous Page" />
                                  <apex:image url="/img/search_prevarrow_disabled.gif" styleClass="prevArrow" rendered="{!If(PreviousButtonEnabled,true,false)}" alt="No Previous Page" title="No Previous Page" />                                 
                                    <apex:outputlink onclick="javascript: return fillCurrentPage('prev');" disabled="{!PreviousButtonEnabled}" title="Previous Page" style="color:{!If(PreviousButtonEnabled,'#999999','#000000')}">Previous Page
                                    </apex:outputlink>&nbsp;
                                    ({!PageStartIndex}-{!PageStopIndex})&nbsp;&nbsp;
                                    <apex:outputlink onclick="javascript:return fillCurrentPage('next');" disabled="{!NextButtonDisabled}" title="Next Page" style="color:{!If(NextButtonDisabled,'#999999','#000000')}">Next Page
                                    </apex:outputlink>
                                  <apex:image url="/img/search_nextarrow_disabled.gif" styleClass="nextArrow" rendered="{!If(NextButtonDisabled,true,false)}" alt="No Next Page" title="No Next Page"/>
                                  <apex:image url="/img/search_nextarrow.gif" styleClass="nextArrow" rendered="{!If(NextButtonDisabled,false,true)}" alt="Next Page" title="Next Page"/>
                                    
                                  </font>
                                  
                              </td> 
                          </tr>
                      </table>                        
                    </apex:outputpanel>
                 </div>   <!-- End pShowMore -->       
            </div>  <!-- -->
 
            <!-- Display Contact's information in a table -->
            <apex:dataTable width="100%" value="{!contactsLines}" var="contact" id="resultsDataTable" cellspacing="0" 
                cellpadding="0" border="0" styleClass="list" rowClasses="dataRow even, dataRow odd" headerClass="headerRow" style="border:0px "
                                onrowmouseout="if (window.hiOff){hiOff(this);}" 
                onrowmouseover="if (window.hiOn){hiOn(this);}">
                

                <apex:column styleClass="actionColumn" >
              
                    <apex:facet name="header">
                        <apex:inputCheckbox id="selectall" selected="false"
                            onclick="javascript:customSelectAllOrNoneByCheckbox(document.forms['selectContactId:selectionContactFormId'],
                            'selectContactId:selectionContactFormId:resultsDataTable', this);" />
                    </apex:facet>
                    <apex:inputCheckbox id="selected" value="{!contact.selected}" onclick="javascript:CheckUncheckFacet(this);"/>
          
                </apex:column>
              
                <apex:column >
                    <apex:facet name="header">                        
                        <apex:commandLink action="{!sortResults}" value="Name" rerender="resultsDataTable,opPrevNextup,opPrevNext,tablePrevNextup,tablePrevNext,itemGrid" status="sortStatus" oncomplete="setHeaderCheckBox(1);return true;">
                            <apex:image url="/img/sort_desc_arrow.gif" rendered="{!AND(IF($User.UIThemeDisplayed != 'Theme3',true,false),IF(sortDirection=='desc',true,false),IF(sortExpression=='ContactName',true,false))}" width="21" height="12" title="Sorted Descending" alt="Sorted Descending"/>
                            <apex:image url="/img/sort_asc_arrow.gif"  rendered="{!AND(IF($User.UIThemeDisplayed != 'Theme3',true,false),IF(sortDirection!='desc',true,false),IF(sortExpression=='ContactName',true,false))}" width="21" height="12" title="Sorted Ascending" alt="Sorted Ascending"/>
                            <apex:image url="/s.gif" rendered="{!AND(IF($User.UIThemeDisplayed == 'Theme3',true,false),IF(sortDirection=='desc',true,false),IF(sortExpression=='ContactName',true,false))}" styleClass="sortDesc" title="Sorted Descending" alt="Sorted Descending" />
                            <apex:image url="/s.gif"  rendered="{!AND(IF($User.UIThemeDisplayed == 'Theme3',true,false),IF(sortDirection!='desc',true,false),IF(sortExpression=='ContactName',true,false))}" styleClass="sortAsc" title="Sorted Ascending" alt="Sorted Ascending" />
                            <apex:param value="ContactName" name="column" assignTo="{!sortExpression}" ></apex:param>
                        </apex:commandLink>
                    </apex:facet>
                    <apex:outputLink id="contactName" value="/{!contact.aContact.id}" >{!contact.aContact.lastName}, {!contact.aContact.firstName}</apex:outputLink>
                </apex:column>
                
                <apex:column rendered="{!contactHasRecordType}">
                    <apex:facet name="header">                        
                        <apex:commandLink action="{!sortResults}" value="Record Type" rerender="resultsDataTable,opPrevNextup,opPrevNext,tablePrevNextup,tablePrevNext,itemGrid" status="sortStatus" oncomplete="setHeaderCheckBox(1);return true;">
                            <apex:image url="/img/sort_desc_arrow.gif" rendered="{!AND(IF($User.UIThemeDisplayed != 'Theme3',true,false),IF(sortDirection=='desc',true,false),IF(sortExpression=='RecordTypeName',true,false))}" width="21" height="12" title="Sorted Descending" alt="Sorted Descending"/>
                            <apex:image url="/img/sort_asc_arrow.gif"  rendered="{!AND(IF($User.UIThemeDisplayed != 'Theme3',true,false),IF(sortDirection!='desc',true,false),IF(sortExpression=='RecordTypeName',true,false))}" width="21" height="12" title="Sorted Ascending" alt="Sorted Ascending"/>
                            <apex:image url="/s.gif" rendered="{!AND(IF($User.UIThemeDisplayed == 'Theme3',true,false),IF(sortDirection=='desc',true,false),IF(sortExpression=='RecordTypeName',true,false))}" styleClass="sortDesc" title="Sorted Descending" alt="Sorted Descending" />
                            <apex:image url="/s.gif"  rendered="{!AND(IF($User.UIThemeDisplayed == 'Theme3',true,false),IF(sortDirection!='desc',true,false),IF(sortExpression=='RecordTypeName',true,false))}" styleClass="sortAsc" title="Sorted Ascending" alt="Sorted Ascending" />
                            <apex:param value="RecordTypeName" name="column" assignTo="{!sortExpression}" ></apex:param>
                        </apex:commandLink>
                    </apex:facet>
                    <apex:outputText id="RecordTypeName" value="{!contact.RecordTypeName}" />
                </apex:column>

                <apex:column > 
                    <apex:facet name="header">                        
                        <apex:commandLink action="{!sortResults}" value="Email" rerender="resultsDataTable,opPrevNextup,opPrevNext,tablePrevNextup,tablePrevNext,itemGrid" status="sortStatus" oncomplete="setHeaderCheckBox(1);return true;">
                            <apex:image url="/img/sort_desc_arrow.gif" rendered="{!AND(IF($User.UIThemeDisplayed != 'Theme3',true,false),IF(sortDirection=='desc',true,false),IF(sortExpression=='ContactEmail',true,false))}" width="21" height="12" title="Sorted Descending" alt="Sorted Descending"/>
                            <apex:image url="/img/sort_asc_arrow.gif"  rendered="{!AND(IF($User.UIThemeDisplayed != 'Theme3',true,false),IF(sortDirection!='desc',true,false),IF(sortExpression=='ContactEmail',true,false))}" width="21" height="12" title="Sorted Ascending" alt="Sorted Ascending"/>
                            <apex:image url="/s.gif" rendered="{!AND(IF($User.UIThemeDisplayed == 'Theme3',true,false),IF(sortDirection=='desc',true,false),IF(sortExpression=='ContactEmail',true,false))}" styleClass="sortDesc" title="Sorted Descending" alt="Sorted Descending" />
                            <apex:image url="/s.gif"  rendered="{!AND(IF($User.UIThemeDisplayed == 'Theme3',true,false),IF(sortDirection!='desc',true,false),IF(sortExpression=='ContactEmail',true,false))}" styleClass="sortAsc" title="Sorted Ascending" alt="Sorted Ascending" />
                            <apex:param value="ContactEmail" name="column" assignTo="{!sortExpression}" ></apex:param>
                        </apex:commandLink>
                    </apex:facet>
                    <apex:outputText id="contactEmail" value="{!contact.aContact.email}"/>
                </apex:column>

                <apex:column >
                    <apex:facet name="header">                        
                        <apex:commandLink action="{!sortResults}" value="Phone" rerender="resultsDataTable,opPrevNextup,opPrevNext,tablePrevNextup,tablePrevNext,itemGrid" status="sortStatus" oncomplete="setHeaderCheckBox(1);return true;">
                            <apex:image url="/img/sort_desc_arrow.gif" rendered="{!AND(IF($User.UIThemeDisplayed != 'Theme3',true,false),IF(sortDirection=='desc',true,false),IF(sortExpression=='ContactPhone',true,false))}" width="21" height="12" title="Sorted Descending" alt="Sorted Descending"/>
                            <apex:image url="/img/sort_asc_arrow.gif"  rendered="{!AND(IF($User.UIThemeDisplayed != 'Theme3',true,false),IF(sortDirection!='desc',true,false),IF(sortExpression=='ContactPhone',true,false))}" width="21" height="12" title="Sorted Ascending" alt="Sorted Ascending"/>
                            <apex:image url="/s.gif" rendered="{!AND(IF($User.UIThemeDisplayed == 'Theme3',true,false),IF(sortDirection=='desc',true,false),IF(sortExpression=='ContactPhone',true,false))}" styleClass="sortDesc" title="Sorted Descending" alt="Sorted Descending" />
                            <apex:image url="/s.gif"  rendered="{!AND(IF($User.UIThemeDisplayed == 'Theme3',true,false),IF(sortDirection!='desc',true,false),IF(sortExpression=='ContactPhone',true,false))}" styleClass="sortAsc" title="Sorted Ascending" alt="Sorted Ascending" />
                            <apex:param value="ContactPhone" name="column" assignTo="{!sortExpression}" ></apex:param>
                        </apex:commandLink> 
                    </apex:facet>
                    <apex:outputText id="contactPhone" value="{!contact.aContact.phone}"/>
                </apex:column>
                
                <apex:column >
                    <apex:facet name="header">                        
                        <apex:commandLink action="{!sortResults}" value="Fax" rerender="resultsDataTable,opPrevNextup,opPrevNext,tablePrevNextup,tablePrevNext,itemGrid" status="sortStatus" oncomplete="setHeaderCheckBox(1);return true;">
                            <apex:image url="/img/sort_desc_arrow.gif" rendered="{!AND(IF($User.UIThemeDisplayed != 'Theme3',true,false),IF(sortDirection=='desc',true,false),IF(sortExpression=='ContactFax',true,false))}" width="21" height="12" title="Sorted Descending" alt="Sorted Descending"/>
                            <apex:image url="/img/sort_asc_arrow.gif"  rendered="{!AND(IF($User.UIThemeDisplayed != 'Theme3',true,false),IF(sortDirection!='desc',true,false),IF(sortExpression=='ContactFax',true,false))}" width="21" height="12" title="Sorted Ascending" alt="Sorted Ascending"/>
                            <apex:image url="/s.gif" rendered="{!AND(IF($User.UIThemeDisplayed == 'Theme3',true,false),IF(sortDirection=='desc',true,false),IF(sortExpression=='ContactFax',true,false))}" styleClass="sortDesc" title="Sorted Descending" alt="Sorted Descending" />
                            <apex:image url="/s.gif"  rendered="{!AND(IF($User.UIThemeDisplayed == 'Theme3',true,false),IF(sortDirection!='desc',true,false),IF(sortExpression=='ContactFax',true,false))}" styleClass="sortAsc" title="Sorted Ascending" alt="Sorted Ascending" />
                            <apex:param value="ContactFax" name="column" assignTo="{!sortExpression}" ></apex:param>
                        </apex:commandLink> 
                    </apex:facet>
                    <apex:outputText id="contactFax" value="{!contact.aContact.Fax}"/>
                </apex:column>                

                <apex:column > 
                    <apex:facet name="header">                        
                        <apex:commandLink action="{!sortResults}" value="Mailing Street" rerender="resultsDataTable,opPrevNextup,opPrevNext,tablePrevNextup,tablePrevNext,itemGrid" status="sortStatus" oncomplete="setHeaderCheckBox(1);return true;">
                            <apex:image url="/img/sort_desc_arrow.gif" rendered="{!AND(IF($User.UIThemeDisplayed != 'Theme3',true,false),IF(sortDirection=='desc',true,false),IF(sortExpression=='ContactMailingStreet',true,false))}" width="21" height="12" title="Sorted Descending" alt="Sorted Descending"/>
                            <apex:image url="/img/sort_asc_arrow.gif"  rendered="{!AND(IF($User.UIThemeDisplayed != 'Theme3',true,false),IF(sortDirection!='desc',true,false),IF(sortExpression=='ContactMailingStreet',true,false))}" width="21" height="12" title="Sorted Ascending" alt="Sorted Ascending"/>
                            <apex:image url="/s.gif" rendered="{!AND(IF($User.UIThemeDisplayed == 'Theme3',true,false),IF(sortDirection=='desc',true,false),IF(sortExpression=='ContactMailingStreet',true,false))}" styleClass="sortDesc" title="Sorted Descending" alt="Sorted Descending" />
                            <apex:image url="/s.gif"  rendered="{!AND(IF($User.UIThemeDisplayed == 'Theme3',true,false),IF(sortDirection!='desc',true,false),IF(sortExpression=='ContactMailingStreet',true,false))}" styleClass="sortAsc" title="Sorted Ascending" alt="Sorted Ascending" />
                            <apex:param value="ContactMailingStreet" name="column" assignTo="{!sortExpression}" ></apex:param>
                        </apex:commandLink>
                    </apex:facet>
                    <apex:outputField id="contactMailingStreet" value="{!contact.aContact.mailingStreet}"/>
                </apex:column>
                
                <apex:column > 
                    <apex:facet name="header">                        
                        <apex:commandLink action="{!sortResults}" value="Mailing City" rerender="resultsDataTable,opPrevNextup,opPrevNext,tablePrevNextup,tablePrevNext,itemGrid" status="sortStatus" oncomplete="setHeaderCheckBox(1);return true;">
                            <apex:image url="/img/sort_desc_arrow.gif" rendered="{!AND(IF($User.UIThemeDisplayed != 'Theme3',true,false),IF(sortDirection=='desc',true,false),IF(sortExpression=='contactMailingCity',true,false))}" width="21" height="12" title="Sorted Descending" alt="Sorted Descending"/>
                            <apex:image url="/img/sort_asc_arrow.gif"  rendered="{!AND(IF($User.UIThemeDisplayed != 'Theme3',true,false),IF(sortDirection!='desc',true,false),IF(sortExpression=='contactMailingCity',true,false))}" width="21" height="12" title="Sorted Ascending" alt="Sorted Ascending"/>
                            <apex:image url="/s.gif" rendered="{!AND(IF($User.UIThemeDisplayed == 'Theme3',true,false),IF(sortDirection=='desc',true,false),IF(sortExpression=='contactMailingCity',true,false))}" styleClass="sortDesc" title="Sorted Descending" alt="Sorted Descending" />
                            <apex:image url="/s.gif"  rendered="{!AND(IF($User.UIThemeDisplayed == 'Theme3',true,false),IF(sortDirection!='desc',true,false),IF(sortExpression=='contactMailingCity',true,false))}" styleClass="sortAsc" title="Sorted Ascending" alt="Sorted Ascending" />
                            <apex:param value="contactMailingCity" name="column" assignTo="{!sortExpression}" ></apex:param>
                        </apex:commandLink>
                    </apex:facet>
                    <apex:outputText id="contactMailingCity" value="{!contact.aContact.mailingCity}"/>
                </apex:column>
                
                <apex:column >
                    <apex:facet name="header">                        
                        <apex:commandLink action="{!sortResults}" value="Mailing State/Province" rerender="resultsDataTable,opPrevNextup,opPrevNext,tablePrevNextup,tablePrevNext,itemGrid" status="sortStatus" oncomplete="setHeaderCheckBox(1);return true;">
                            <apex:image url="/img/sort_desc_arrow.gif" rendered="{!AND(IF($User.UIThemeDisplayed != 'Theme3',true,false),IF(sortDirection=='desc',true,false),IF(sortExpression=='contactMailingState',true,false))}" width="21" height="12" title="Sorted Descending" alt="Sorted Descending"/>
                            <apex:image url="/img/sort_asc_arrow.gif"  rendered="{!AND(IF($User.UIThemeDisplayed != 'Theme3',true,false),IF(sortDirection!='desc',true,false),IF(sortExpression=='contactMailingState',true,false))}" width="21" height="12" title="Sorted Ascending" alt="Sorted Ascending"/>
                            <apex:image url="/s.gif" rendered="{!AND(IF($User.UIThemeDisplayed == 'Theme3',true,false),IF(sortDirection=='desc',true,false),IF(sortExpression=='contactMailingState',true,false))}" styleClass="sortDesc" title="Sorted Descending" alt="Sorted Descending" />
                            <apex:image url="/s.gif"  rendered="{!AND(IF($User.UIThemeDisplayed == 'Theme3',true,false),IF(sortDirection!='desc',true,false),IF(sortExpression=='contactMailingState',true,false))}" styleClass="sortAsc" title="Sorted Ascending" alt="Sorted Ascending" />
                            <apex:param value="contactMailingState" name="column" assignTo="{!sortExpression}" ></apex:param>
                        </apex:commandLink>
                    </apex:facet>
                    <apex:outputText id="contactMailingState" value="{!contact.aContact.mailingState}"/>
                </apex:column>
                
                <apex:column >
                    <apex:facet name="header">                        
                        <apex:commandLink action="{!sortResults}" value="Mailing Zip/Postal Code" rerender="resultsDataTable,opPrevNextup,opPrevNext,tablePrevNextup,tablePrevNext,itemGrid" status="sortStatus" oncomplete="setHeaderCheckBox(1);return true;">
                            <apex:image url="/img/sort_desc_arrow.gif" rendered="{!AND(IF($User.UIThemeDisplayed != 'Theme3',true,false),IF(sortDirection=='desc',true,false),IF(sortExpression=='contactMailingPostalCode',true,false))}" width="21" height="12" title="Sorted Descending" alt="Sorted Descending"/>
                            <apex:image url="/img/sort_asc_arrow.gif"  rendered="{!AND(IF($User.UIThemeDisplayed != 'Theme3',true,false),IF(sortDirection!='desc',true,false),IF(sortExpression=='contactMailingPostalCode',true,false))}" width="21" height="12" title="Sorted Ascending" alt="Sorted Ascending"/>
                            <apex:image url="/s.gif" rendered="{!AND(IF($User.UIThemeDisplayed == 'Theme3',true,false),IF(sortDirection=='desc',true,false),IF(sortExpression=='contactMailingPostalCode',true,false))}" styleClass="sortDesc" title="Sorted Descending" alt="Sorted Descending" />
                            <apex:image url="/s.gif"  rendered="{!AND(IF($User.UIThemeDisplayed == 'Theme3',true,false),IF(sortDirection!='desc',true,false),IF(sortExpression=='contactMailingPostalCode',true,false))}" styleClass="sortAsc" title="Sorted Ascending" alt="Sorted Ascending" />
                            <apex:param value="contactMailingPostalCode" name="column" assignTo="{!sortExpression}" ></apex:param>
                        </apex:commandLink>
                    </apex:facet>   
                    <apex:outputText id="contactMailingPostalCode" value="{!contact.aContact.mailingPostalCode}"/>
                </apex:column>  
                <apex:column >
                    <apex:facet name="header">                        
                        <apex:commandLink action="{!sortResults}" value="Mailing Country" rerender="resultsDataTable,opPrevNextup,opPrevNext,tablePrevNextup,tablePrevNext,itemGrid" status="sortStatus" oncomplete="setHeaderCheckBox(1);return true;">
                            <apex:image url="/img/sort_desc_arrow.gif" rendered="{!AND(IF($User.UIThemeDisplayed != 'Theme3',true,false),IF(sortDirection=='desc',true,false),IF(sortExpression=='contactMailingCountry',true,false))}" width="21" height="12" title="Sorted Descending" alt="Sorted Descending"/>
                            <apex:image url="/img/sort_asc_arrow.gif"  rendered="{!AND(IF($User.UIThemeDisplayed != 'Theme3',true,false),IF(sortDirection!='desc',true,false),IF(sortExpression=='contactMailingCountry',true,false))}" width="21" height="12" title="Sorted Ascending" alt="Sorted Ascending"/>
                            <apex:image url="/s.gif" rendered="{!AND(IF($User.UIThemeDisplayed == 'Theme3',true,false),IF(sortDirection=='desc',true,false),IF(sortExpression=='contactMailingCountry',true,false))}" styleClass="sortDesc" title="Sorted Descending" alt="Sorted Descending" />
                            <apex:image url="/s.gif"  rendered="{!AND(IF($User.UIThemeDisplayed == 'Theme3',true,false),IF(sortDirection!='desc',true,false),IF(sortExpression=='contactMailingCountry',true,false))}" styleClass="sortAsc" title="Sorted Ascending" alt="Sorted Ascending" />
                            <apex:param value="contactMailingCountry" name="column" assignTo="{!sortExpression}" ></apex:param>
                        </apex:commandLink>
                    </apex:facet>   
                    <apex:outputText id="contactMailingCountry" value="{!contact.aContact.mailingCountry}"/>
                </apex:column>   
                
                <apex:column width="50px" style="text-align:center;" >
                    <apex:facet name="header">
                        <apex:commandLink action="{!sortResults}" rerender="resultsDataTable,opPrevNextup,opPrevNext,tablePrevNextup,tablePrevNext,itemGrid" status="sortStatus" oncomplete="setHeaderCheckBox(1);return true;">
                        	Disable Account <br/> to Contact Sync
                            <apex:image url="/s.gif" rendered="{!AND(IF($User.UIThemeDisplayed == 'Theme3',true,false),IF(sortDirection=='desc',true,false),IF(sortExpression=='disableAccountToContactSync',true,false))}" styleClass="sortDesc" title="Sorted Descending" alt="Sorted Descending" />
                            <apex:image url="/s.gif"  rendered="{!AND(IF($User.UIThemeDisplayed == 'Theme3',true,false),IF(sortDirection!='desc',true,false),IF(sortExpression=='disableAccountToContactSync',true,false))}" styleClass="sortAsc" title="Sorted Ascending" alt="Sorted Ascending" />
                            <apex:param value="disableAccountToContactSync" name="column" assignTo="{!sortExpression}" ></apex:param>
                        </apex:commandLink>
                    </apex:facet>   
                    <apex:outputField id="disableAccountToContactSync" value="{!contact.aContact.kugadd__DisableAccountToContactSync__c}"/>
                </apex:column>
            </apex:dataTable>

            <div class="pbInnerFooter">                 
                <div class="relatedListsearchFooter"> 

                <div class="pSearchShowMore">
                    <apex:outputPanel id="opPrevNext">

                        <table width="100%" id="tablePrevNext" style="font-family:Arial;vertical-align:middle;text-align:left;font-size:8pt;" >
                          <tr >
                             <td width="50%" align="center" >
                                   
                                  <font >   

                                  <apex:image url="/img/search_prevarrow.gif" styleClass="prevArrow" rendered="{!If(PreviousButtonEnabled,false,true)}" alt="Previous Page" title="Previous Page" />
                                  <apex:image url="/img/search_prevarrow_disabled.gif" styleClass="prevArrow" rendered="{!If(PreviousButtonEnabled,true,false)}" alt="No Previous Page" title="No Previous Page" />                                 
                                    <apex:outputlink onclick="javascript: return fillCurrentPage('prev');" disabled="{!PreviousButtonEnabled}" title="Previous Page" style="color:{!If(PreviousButtonEnabled,'#999999','#000000')}">Previous Page
                                    </apex:outputlink>&nbsp;
                                    ({!PageStartIndex}-{!PageStopIndex})&nbsp;&nbsp;
                                    <apex:outputlink onclick="javascript:return fillCurrentPage('next');" disabled="{!NextButtonDisabled}" title="Next Page" style="color:{!If(NextButtonDisabled,'#999999','#000000')}">Next Page
                                    </apex:outputlink>
                                  <apex:image url="/img/search_nextarrow_disabled.gif" styleClass="nextArrow" rendered="{!If(NextButtonDisabled,true,false)}" alt="No Next Page" title="No Next Page"/>
                                  <apex:image url="/img/search_nextarrow.gif" styleClass="nextArrow" rendered="{!If(NextButtonDisabled,false,true)}" alt="Next Page" title="Next Page"/>
                                    
                                  </font>
                                  
                              </td> 
                          </tr>
                      </table>                        
                    </apex:outputpanel>
                 </div>   <!-- End pShowMore -->       
                </div>
            </div>
        </div>  <!-- End pbBody -->
        
	        <script>
	            var showError = "{!ShowError}";
	            //alert('showError ' + showError);	            
	            if (showError == 'false') {
	            	var checkAll = document.getElementById("selectContactId:selectionContactFormId:resultsDataTable:selectall");
	            	//debugger;
	            	if (checkAll != null) checkAll.checked = 0;	
	            }
	        </script>
    
        </apex:outputPanel>         

       </div>
    </div>
    </div>
    <div class="selectButtons kugamon">
       <apex:commandButton value="Close" action="{!returnToAccount}" styleClass="slds-button slds-button--neutral" />&nbsp;
       <!--<apex:commandButton value="Close" onclick="javascript:window.close();"/> -->
       <!-- <apex:commandButton value="Update" action="{!processSelected}"/> -->
       <apex:commandButton value="Update" action="{!processSelected}" rerender="Results,selectionContactFormId,pageMessages2" status="updateStatus" styleClass="slds-button slds-button--brand"/>	<!-- onclick="if(!confirmUpdate()) return;"  -->
    </div>
    </apex:outputPanel>
    </apex:form>
    
    
    <script>
    
    function confirmUpdate() {
    	if (disableSyncContactCount == 0) return true;
		return confirm('You are about to update Contact records that have been checked with Disable Sync. Are you sure you want to proceed?');
    }
    
    function CheckLength(obj)
    {
        //debugger;
        val = obj.value;
        if(val.length > 0 && val.length < 2)
        {
            alert(' string must be of 2 or more characters.');
            obj.focus();
        }
    }   
    
  
        function customSelectAllOrNoneByCheckbox(form, element_name, control)
        {           
            //debugger;         
            customSelectChecked(form, element_name, control.checked);
            updateDisableSyncContactCount(); 
        }
        
        function customSelectChecked(form, element_name, value)
        {   
            var i = 0;  
            for (i = 0; i < form.elements.length; i++) {
                if (form.elements[i].name.search('selected') > 0 && form.elements[i].disabled == false) {
                    if (form.elements[i].checked != value){
                        if (value) {
                            intSelectedItemsCount = intSelectedItemsCount + 1;
                            intCurrentPageSelectedItemsCount = intCurrentPageSelectedItemsCount + 1;
                        }
                        else {
                            intSelectedItemsCount = intSelectedItemsCount - 1;
                            intCurrentPageSelectedItemsCount = intCurrentPageSelectedItemsCount - 1;
                        }
                    }                                               
                    form.elements[i].checked = value;
                }
            }
            var restable = document.getElementById(element_name);            
        }

    function CheckUncheckFacet(obj)
    {
        //debugger;        
        if(!obj.checked)
        {
            intSelectedItemsCount = intSelectedItemsCount - 1;
            intCurrentPageSelectedItemsCount = intCurrentPageSelectedItemsCount - 1;
            selectunSelectHeaderCheckbox(false);            
        } else {            
            intSelectedItemsCount = intSelectedItemsCount + 1;
            intCurrentPageSelectedItemsCount = intCurrentPageSelectedItemsCount + 1;
            setHeaderCheckBox(0);
        }
        updateDisableSyncContactCount();
    }

        function setHeaderCheckBox(setCurrentPageCount) {
            //console.log('setCurrentPageCount = ' + setCurrentPageCount);
            if (setCurrentPageCount == 1) {
                intCurrentPageSelectedItemsCount = parseFloat(document.getElementById("selectedItemsId").getElementsByTagName('input')[0].value);
                
                //alert(' in setHeaderCheckBox in setCurrentPageCount intCurrentPageSelectedItemsCount ' + intCurrentPageSelectedItemsCount); 
            }
            //alert(' in setHeaderCheckBox before SearchResultsCurrentPageSize intCurrentPageSelectedItemsCount ' + intCurrentPageSelectedItemsCount);
            var SearchResultsCurrentPageSize = parseFloat(document.getElementById("selectedItemsId").getElementsByTagName('span')[0].innerHTML);
            //alert(' in setHeaderCheckBox after SearchResultsCurrentPageSize ' + SearchResultsCurrentPageSize);
            //console.log('SelectedItemsCount = ' + intCurrentPageSelectedItemsCount + '  PageSize = ' + SearchResultsCurrentPageSize);
            if (intCurrentPageSelectedItemsCount == SearchResultsCurrentPageSize)
                selectunSelectHeaderCheckbox(true);
            else
                selectunSelectHeaderCheckbox(false);
                
            return;
        
            var form = document.forms['selectContactId:selectionContactFormId'];
            var foundUnchecked = false;
                        
            if (intSelectedItemsCount > 0) {
                    var i = 0;
                    for (i = 0; i < form.elements.length; i++) {
                        if (form.elements[i].name.search('selected') > 0 && form.elements[i].disabled == false) {
                            if (form.elements[i].checked == false){
                                foundUnchecked = true;
                            }
                        }                
                    }
                    selectunSelectHeaderCheckbox(!foundUnchecked);
            }           
            return true;
        }               


        function selectunSelectHeaderCheckbox(value) {
            
            document.getElementById("selectContactId:selectionContactFormId:resultsDataTable:selectall").checked = value;
            return;
            
            var form = document.forms['selectContactId:selectionContactFormId'];
            var i = 0;
            
            for (i = 0; i < form.elements.length; i++) {
                if (form.elements[i].name.search('selectall') > 0 && form.elements[i].disabled == false) {
                    form.elements[i].checked = value;
                    break;
                }
            }           
        }    

        function fillCurrentPage(btnClicked)
        {                   
            if(btnClicked == 'prev' )
            {   
                //intGlobalPageCounter--;
                previousCall();
                //setHeaderCheckBox();
                return false;
            }
            else 
            {
            	//alert('next ');            	
                //intGlobalPageCounter++;
                console.log(' in fillCurrentPage next');
                nextCall();
                //setHeaderCheckBox();
                return false;
            }
            return false;
        }
        
        function updateDone() {
            //alert('Update completed.');
        }

        
        function noenter(e){
          if(window.event){
            key = window.event.keyCode; //IE
          } else{
            key = e.which; //firefox
          }
          if(key == 13) {
            //var ele=document.getElementById('selectContactId:selectionContactFormId:filterButton');
            var ele=document.getElementById('filterButton');
            //debugger;
            ele.click(); 
            return false;
          } else{
            return true;
          }
        }

    </script>
</apex:page>