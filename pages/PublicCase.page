<apex:page showHeader="true" sidebar="true" controller="PublicCaseController" tabStyle="Case">
	<apex:sectionHeader title="Copado Solutions Support" subtitle="My Case" />
	
	<apex:pageMessages /> 

	<apex:form >
		<apex:pageBlock title="{!caseNumber}" rendered="{!renderStep1}" mode="edit">
			<apex:pageBlockButtons location="bottom">
				<apex:commandButton value="Submit" action="{!getCase}" />
			</apex:pageBlockButtons>
			<apex:pageBlockSection columns="1">
				<apex:pageBlockSectionItem >
					<apex:outputLabel value="Case Number" />
					<apex:inputText value="{!caseNumber}" required="true"/>
				</apex:pageBlockSectionItem>
				<apex:pageBlockSectionItem >
					<apex:outputLabel value="Email" />
					<apex:inputText value="{!caseEmail}" required="true" />
				</apex:pageBlockSectionItem>
			</apex:pageBlockSection>
		</apex:pageBlock>

		<apex:pageBlock title="{!caseNumber}" rendered="{!renderStep2}">
			<apex:pageBlockButtons location="top">
				<apex:commandButton value="Close Case" action="{!closeCase}" rendered="{!caseStatus!='Closed'}"/>
			</apex:pageBlockButtons>
			<apex:pageBlockSection >
				<apex:pageBlockSectionItem >
					<apex:outputLabel value="Case Number" />
					<apex:outputText value="{!caseNumber}"/>
				</apex:pageBlockSectionItem>
				<apex:pageBlockSectionItem >
					<apex:outputLabel value="Case Status" />
					<apex:outputText value="{!caseStatus}"/>
				</apex:pageBlockSectionItem>
				<apex:pageBlockSectionItem >
					<apex:outputLabel value="Case Type" />
					<apex:outputText value="{!caseType}"/>
				</apex:pageBlockSectionItem>
				<apex:pageBlockSectionItem >
					<apex:outputLabel value="Case Origin" />
					<apex:outputText value="{!caseOrigin}"/>
				</apex:pageBlockSectionItem>
			</apex:pageBlockSection>

			<apex:pageBlockSection columns="1" title="Case Details" collapsible="false">
				<apex:pageBlockSectionItem >
					<apex:outputLabel value="Case Subject" />
					<apex:outputText value="{!caseSubject}"/>
				</apex:pageBlockSectionItem>
				<apex:pageBlockSectionItem >
					<apex:outputLabel value="Case Descripton" />
					<apex:outputText value="{!caseDescription}" escape="true" />
				</apex:pageBlockSectionItem>
			</apex:pageBlockSection>
		</apex:pageBlock>

		<apex:pageBlock title="Close Case" rendered="{!renderCaseClosure}">
			<apex:pageBlockButtons location="bottom">
				<apex:commandButton value="Close Case" action="{!confirmCloseCase}" />
				<apex:commandButton value="Cancel" action="{!gotoStep2}" />
			</apex:pageBlockButtons>
			<apex:pageBlockSection columns="1">
				<apex:pageBlockSectionItem >
					<apex:outputLabel value="Closure Status" />
					<apex:outputText value="Closed"/>
				</apex:pageBlockSectionItem>
				<apex:pageBlockSectionItem >
					<apex:outputLabel value="Case Closure Comments" />
					<apex:inputField value="{!psydoCase.CaseComment__c}" style="width:600px;" />
				</apex:pageBlockSectionItem>
			</apex:pageBlockSection>
		</apex:pageBlock>


		<apex:pageBlock title="Solutions" rendered="false">
			<apex:repeat value="{!solutions}" var="s">
				<apex:outputText value="{!s.Solution.SolutionName}" /><br />
				<apex:outputText value="{!s.Solution.SolutionNote}"/>
				<hr />
			</apex:repeat>
		</apex:pageBlock>
	</apex:form>
</apex:page>