<apex:page sidebar="false" controller="Bread_Winner.BreadwinnerController" tabStyle="Breadwinner__tab" action="{!initializeApp}" title="Breadwinner">
    <html xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="height:100%">
        <head>
            <script src="https://fast.wistia.net/assets/external/E-v1.js" ></script>
            <apex:includeScript value="{!URLFOR($Resource.Bread_Winner__Breadwinner_jQuery, 'jquery.min.js')}" />            <script src="{!URLFOR($Resource.Breadwinner_Xero, 'Breadwinner_Xero/JS/select2.full.min.js')}" />
            <link href="{!URLFOR($Resource.Breadwinner_Xero, 'Breadwinner_Xero/CSS/select2.min.css')}" rel="stylesheet" type="text/css"/>
            <meta charset="utf-8" />
            <apex:variable value="{!OR($User.UIThemeDisplayed == 'Theme4d', $User.UIThemeDisplayed == 'Theme4t')}" var="isLightning" />
            <apex:slds />
            <script type="text/javascript">
                var __sfdcSessionId = '{!GETSESSIONID()}';
            </script>
            <script type="text/javascript">
                var clicky_custom = clicky_custom || {};
                clicky_custom.href = '/breadwinner-app/',
                clicky_custom.title = 'Breadwinner App for {!$Organization.Id}',
                clicky_custom.timer = 500;
                clicky_custom.timeout = 10;
                clicky_custom.cookies_disable = 0;
                clicky_custom.queue_disable = 0;
                clicky_custom.sticky_data_disable = 0;
                clicky_custom.outbound_disable = 1;
                clicky_custom.video_disable = 1;
                clicky_custom.history_disable = 0;
                clicky_custom.ping_disable = 1;
                clicky_custom.pageview_disable = 0;
                clicky_custom.osa_disable = 1;
                clicky_custom.heatmap_disable = 1;
                clicky_custom.visitor = {
                    lmo: "true",
                    org_id: "{!$Organization.Id}",
                    DaddyAnalytics: (new Date()).getTime() + "-" +(Math.floor(Math.random() * (9999999 - 1000000) )+ 1000000)
                };
            </script>
            <apex:includeScript value="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/JS/HelloStaticStuffStats.js')}" />
            <script type="text/javascript">
                try{
                    if({!NOT(isConsumerDetailFilled)}){
                        clicky.init(100547279);
                        console.log('sent');
                    } 
                }
                catch(e){console.log(e);}
                if(document.getElementsByTagName("title") && document.getElementsByTagName("title")[0]){
                    document.getElementsByTagName("title")[0].innerHTML="Breadwinner";
                }
                var j$ = jQuery.noConflict();
                
                function selectTab(elmnt) {
                    j$("#Breadwinner-Left-Menu ul").children(".slds-is-active").removeClass("slds-is-active");
                    j$(elmnt).parent("li").addClass("slds-is-active");
                    
                    j$("#breadwinner-right-content div.slds-show").addClass("slds-hide");
                    j$("#breadwinner-right-content div.slds-show").removeClass("slds-show");
                    if(elmnt.id == "Permissions"){
                        siblingSelectTab(j$("#breadwinner-right-content").children("div[aria-labelledby='"+elmnt.id+"']").children("div").children("ul").children("li").children("a[aria-controls='overview']"));
                        queryPSAssignedUsers('Overview','Name','ASC');
                    }
                    if(elmnt.id == "Connection-Troubleshoot"){
                        TroubleshootselectTab(j$("#breadwinner-right-content").children("div[aria-labelledby='"+elmnt.id+"']").children("span").children("ul").children("li").children("a[aria-controls='{!XeroOrgId}']"),'{!XeroOrgId}');
                    }
                    j$("#breadwinner-right-content").children("div[aria-labelledby='"+elmnt.id+"']").removeClass("slds-hide").addClass("slds-show");
                    
                }
                function siblingSelectTab(elmnt){
                    // slds-is-active
                    j$(elmnt).parent("li").siblings(".slds-is-active").removeClass("slds-is-active");
                    j$(elmnt).parent("li").addClass("slds-is-active");
                    
                    // tabindex
                    j$(elmnt).parent("li").siblings().children("a").attr("tabindex", -1);
                    j$(elmnt).attr("tabindex", 0);
                    
                    // aria-selected
                    j$(elmnt).parent("li").siblings().children("a").attr("aria-selected", false);
                    j$(elmnt).attr("aria-selected", true);              
                }
                function TroubleshootselectTab(elmnt, XeroOrgId) {
                    siblingSelectTab(elmnt);                
                    sendXeroOrgId(XeroOrgId);
                }
                
                function showHideNestedMenu(elmnt){
                    
                    if(j$(elmnt).parent("li").hasClass("slds-section slds-is-open")){
                        j$(elmnt).parent("li").removeClass("slds-section slds-is-open");
                        j$(elmnt).parent("li").children("ul.slds-is-nested.slds-show").removeClass("slds-show").addClass("slds-hide");
                    }
                    else{
                        j$(elmnt).parent("li").addClass("slds-section slds-is-open");
                        j$(elmnt).parent("li").children("ul.slds-is-nested").removeClass("slds-hide").addClass("slds-show");
                    }
                    
                }
                
                function HandleSearch(){
                    var findword=j$("#MenuSearchBox").val().toLowerCase();
                    j$( "#Breadwinner-Left-Menu ul li" ).addClass("slds-hide").removeClass("slds-show");
                    
                    var checkOpenedInnerTab=j$("li.slds-list__item.slds-is-active").length;
                    console.log('inner count:'+checkOpenedInnerTab);
                    if(findword.length > 0){
                        
                        j$( "h2.slds-text-title_caps" ).css( "display", "none" );
                        
                        j$( "#Breadwinner-Left-Menu ul li.searachableclass a" ).each(function( index ) {
                            var textreturned=j$( this ).text().toLowerCase()
                            
                            if(textreturned.indexOf(findword)>-1){
                                
                                j$( this ).parents("li,ul").removeClass("slds-hide").addClass("slds-show");
                                j$( this ).parents("li.nestedcheck").addClass("slds-section slds-is-open");
                            }
                            
                        });
                        
                    }
                    else{
                        j$( "#Breadwinner-Left-Menu ul li" ).removeClass("slds-hide").addClass("slds-show");
                        j$("#Breadwinner-Left-Menu").find("li.slds-section.slds-is-open ul").removeClass("slds-show").addClass("slds-hide");
                        j$("#Breadwinner-Left-Menu").find("li.slds-section.slds-is-open").removeClass("slds-section slds-is-open");
                        
                        if(checkOpenedInnerTab>0){
                            j$("#Breadwinner-Left-Menu li.slds-list__item.slds-is-active").parents("li.nestedcheck").addClass("slds-section slds-is-open");
                            j$("#Breadwinner-Left-Menu li.slds-list__item.slds-is-active").parents("ul").removeClass("slds-hide").addClass("slds-show");
                        }                    
                        j$( "h2.slds-text-title_caps" ).css( "display", "initial" );
                    }
                    
                }
                
                function  OpenContactSupportTab(){
                    var SupportTabId="ContactSupport";
                    selectTab(document.getElementById(SupportTabId)); 
                }            
                function  OpenTroubleshootGeneralTab(){
                    var TroubleshootTab="General-Troubleshoot";
                    selectTab(document.getElementById(TroubleshootTab));
                }
                
                function HideStyleSheet() {
                    j$("link.user[href$='elements.css']").each(function() {
                        //j$(this).removeAttr("href");                       
                    });
                }
                
                function message() {
                    j$(".infoM6, .infoM4, .infoM3, .infoM2, .infoS1").addClass("slds-notify slds-notify_alert slds-theme_inverse-text  slds-text-align_left slds-text-heading_small slds-m-bottom_small").css( {"font-weight":"500","line-height":"1.4","word-spacing":"1px","justify-content":"left", "background":"rgba(84,105,141,.95)"} );
                    j$(".errorM6, .errorM4, .errorM3, .errorM2, .errorS1").addClass("slds-notify slds-notify_alert slds-theme_error  slds-text-align_left slds-text-heading_small slds-m-bottom_small").css({"font-weight":"500","line-height":"1.4","word-spacing":"1px","justify-content":"left"});
                    j$(".warningM6, .warningM4, .warningM3, .warningM2, .warningS1").addClass("slds-notify slds-notify_alert slds-theme_warning  slds-text-align_left slds-text-heading_small slds-m-bottom_small").css( {"font-weight":"500","line-height":"1.4","word-spacing":"1px","justify-content":"left"}) ;
                    j$(".confirmM6, .confirmM4, .confirmM3, .confirmM2, .confirmS1").addClass("slds-notify slds-notify_alert slds-theme_success slds-text-align_left slds-text-heading_small slds-m-bottom_small").css( {"font-weight":"500","line-height":"1.4","word-spacing":"1px","justify-content":"left"} ) ;
                    
                    j$("div .messageText h4").css( "color", "white" );
                    j$("div[class*='warning'] div.messageText h4").css( "color", "black" );
                    j$("table.messageTable td").css({"color" : "white"});
                    j$("div[class*='warning'] table.messageTable td").css( "color", "black" );
                    j$(".dateFormat").hide();
                }
                
                function SubTabsSelect(elmnt, XeroOrgId,BillOrPOParam) {                    
                    siblingSelectTab(elmnt);                    
                    if(BillOrPOParam=='Bill'){
                        BillPassXeroOrgId(XeroOrgId);
                    }
                    else{
                        PoPassXeroOrgId(XeroOrgId);
                    }                    
                }
                
                function helptextPosition(elementt, helptext, TopMinusparam,LeftMinusParam) {
                    if(j$(".bPageHeader").outerHeight(true)==null){
                        LeftMinusParam=LeftMinusParam-9;
                        TopMinusparam=TopMinusparam-100;
                    }
                    var x = j$(elementt).offset();
                    //alert("Top position: " + x.top + " Left position: " + x.left+" height: "+$(elementt).height());                
                    var ToSetleft = x.left - LeftMinusParam;
                    j$("#help p").text(helptext);
                    var ToSetheight = x.top - TopMinusparam;
                    var heptextdiv = document.getElementById("help");
                    j$(heptextdiv).css({
                        top: ToSetheight + 'px',
                        left: ToSetleft + 'px',
                        display: ""
                    })
                }               
                
                function mouseouthelp() {
                    var heptextdiv = document.getElementById("help");
                    j$(heptextdiv).css({
                        top: "0px",
                        left: "0px",
                        display: "none"
                    });
                }

                function identifyfield(elementt, helptext, TopMinusparam,LeftMinusParam) {
                    if(j$(".bPageHeader").outerHeight(true)!=null){
                        LeftMinusParam=+LeftMinusParam + +7;
                        TopMinusparam=+TopMinusparam + +108;
                    }
                    var x = j$(elementt).offset();
                    //alert("Top position: " + x.top + " Left position: " + x.left+" height: "+$(elementt).height());                
                    var ToSetleft = x.left - LeftMinusParam;
                    j$("#InvoiceConfighelp p").text(helptext);
                    var ToSetheight = x.top - TopMinusparam;
                    var heptextdiv = document.getElementById("InvoiceConfighelp");
                    j$(heptextdiv).css({
                        top: ToSetheight + 'px',
                        left: ToSetleft + 'px',
                        display: ""
                    })
                    
                }
                
                function mouseoutclose() {
                    var heptextdiv = document.getElementById("InvoiceConfighelp");
                    j$(heptextdiv).css({
                        top: "0px",
                        left: "0px",
                        display: "none"
                    });
                }

                function scrolltoBottom()
                {
                    window.scrollTo(0,document.body.scrollHeight);
                }
                
                function scrolltoTop()
                {
                    window.scrollTo(0,0);
                }
                
                j$(function() {
                    HideStyleSheet();   
                    message();                           
                    console.log('script loaded');
                    
                    if(!{!islayoutupdated} || ({!isUnauthorizedEndpoint}===true))createRemoteSiteMetadata();
                    checkIfOpportunityPagelayoutsAreUpdated();
                    onTabEnterPushToInteractionLog('Setup');
                    j$('.removeMeForSBDev').remove();// removing the subscribe path item for Develper/sandbox orgs to avoid css conflicts 
                });

                function loadIframesfun(iframeSectionId,iframeURL){                    
                    // to clear div before we insert iframe
                    j$("#"+iframeSectionId).empty();
                    
                    // to create iframe element
                    var para = document.createElement("iframe");
                    para.setAttribute("src", iframeURL);
                    para.setAttribute("id", iframeSectionId+'Id');
                    para.setAttribute("height","800px");
                    para.setAttribute("width","100%");
                    if(iframeSectionId == 'Contact_SupportPage'){
                        para.setAttribute("name","ContactIframe");
                    }
                    
                    // injecting iframe to refereced div
                    document.getElementById(iframeSectionId).appendChild(para);
                }

                window.onmessage = (e) => {
                    if (e.data.hasOwnProperty("iframeId")) {
                    console.log('parent:::'+e.data.iframeId);                        
                    j$("#"+e.data.iframeId).css("height",e.data.iframeHeight+50+'px');
                    console.log('height'+document.getElementById(e.data.iframeId).style.height);
                }
                };
                
                function ShowBreadwinnerMode(){
                    j$("#ModeImg").show();
                    j$("body.sfdcBody").css({"overflow" : "hidden"});
                }
                function HideBreadwinnerMode(){
                    j$("#ModeImg").hide();
                    j$("body.sfdcBody").css({"overflow" : "scroll"});
                }
                function reRendercheckmarkSVGIcons(){
                    var imageURL = '';
                    var SVG;
                    var SVGUse;                 
                    imageURL = '{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#check')}';
                    SVG = j$('<svg/>', {
                        class: 'slds-icon slds-icon_x-small',
                    });                    
                    
                    SVGUse = j$('<use/>');
                    SVGUse.attr('xlink:href',imageURL);
                    j$(".slds-path__stage").prepend(SVG.append(SVGUse));
                    j$(".slds-path__stage").html(j$(".slds-path__stage").html());
                    
                }
                function reRenderArrowDownSVG(columnId){
                    var imageURL = '';
                    var SVG;
                    var SVGUse;  
                    imageURL = '{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#arrowdown')}';
                    SVG = j$('<svg/>', {
                        class: 'slds-button__icon',
                    });                    
                    
                    SVGUse = j$('<use/>');
                    SVGUse.attr('xlink:href',imageURL);
                    j$(columnId).append(SVG.append(SVGUse));
                    j$(columnId).html(j$(columnId).html());
                }
                function reRenderArrowUpSVG(columnId){
                    var imageURL = '';
                    var SVG;
                    var SVGUse;  
                    imageURL = '{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#arrowup')}';
                    SVG = j$('<svg/>', {
                        class: 'slds-button__icon',
                    });                    
                    
                    SVGUse = j$('<use/>');
                    SVGUse.attr('xlink:href',imageURL);
                    j$(columnId).append(SVG.append(SVGUse));
                    j$(columnId).html(j$(columnId).html());
                }

                function reRenderRightSVGIcon(){
                    var imageURL = '';
                    var SVG;
                    var SVGUse;  
                    imageURL = '{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#right')}';
                    SVG = j$('<svg/>', {
                        class: 'slds-icon slds-float_left',
                    });                    
                    
                    SVGUse = j$('<use/>');
                    SVGUse.attr('xlink:href',imageURL);
                    j$('.rightSVGIcon').append(SVG.append(SVGUse));
                    j$('.rightSVGIcon').html(j$('.rightSVGIcon').html());
                }

                function showHideSectionConent(sectionId,imageid){
                    var sectiondiv=document.getElementById(sectionId);
                    var imagediv=document.getElementById(imageid);

                    if(j$(sectiondiv).hasClass("slds-is-open")){
                        j$(sectiondiv).removeClass("slds-is-open");
                        j$(imagediv).attr("src","{!URLFOR($Resource.Breadwinner_Xero, 'Breadwinner_Xero/Images/SectionClose.png')}");
                        j$(imagediv).css({"margin-bottom":"3px", "margin-right":"4px", "width":"14px"});
                    }
                    else{
                        if(sectionId == 'ConnectionDeleteRecDivId'){ DeleteConnectionSectionFunction(true); }
                        if(sectionId == 'GeneralDeleteRecDivId'){ DeleteDisconnectionSectionFunction(true); }
                        j$(sectiondiv).addClass("slds-is-open");
                        j$(imagediv).attr("src","{!URLFOR($Resource.Breadwinner_Xero, 'Breadwinner_Xero/Images/SectionOpen.png')}");
                        j$(imagediv).css({"margin-bottom":"0px", "margin-right":"3px", "width":"15px"});
                    }
                }
                
                function cancelDiscBatchInv(){
                    j$('#backdrop').removeClass('slds-backdrop_open');
                    j$('#alert_popup').removeClass('slds-fade-in-open');
                }
                
                function showBatchInvModal(popup_msg){                    
                    j$("#alert_popup p").text(popup_msg);
                    j$('#backdrop').addClass('slds-backdrop_open');
                    j$('#alert_popup').addClass('slds-fade-in-open');
                    window.parent.scrollTo(0,0);
                }

                function troubleshootCancelDisc(){
                    j$('#troubleshootBackdrop').removeClass('slds-backdrop_open');
                    j$('#dyn_popup').removeClass('slds-fade-in-open');
                }
                
                function troubleshootShowDiscModal(){
                    j$('#troubleshootBackdrop').addClass('slds-backdrop_open');
                    j$('#dyn_popup').addClass('slds-fade-in-open');
                }
                
                function add_popup_text(popup_msg){
                    j$("#dyn_popup p").text(popup_msg);
                    troubleshootShowDiscModal();
                }

                j$(document).keydown (                     
                    function(event){                     
                        var code = event.keyCode || event.which;                    
                        if (code == 27) {                                     
                            if( j$('#ModeImg').css('display') != 'none' ){      
                                j$('#ModeImg').hide();                              
                                j$("body.sfdcBody").css({"overflow" : ""});                        
                            }                        
                            if( j$('#DivImgs').css('display') != 'none' )
                                j$('#DivImgs').hide();                         
                            cancelDisc();    
                            cancelDiscBatchInv();
                            troubleshootCancelDisc();
                        }                
                    });

                // Invoice Configuration Javascript start
                function InvoiceConfigSelectTab(elmnt, XeroOrgId) {                     
                    siblingSelectTab(elmnt);
                    passXeroOrgId(XeroOrgId);
                }

                function addLinkDynamically(){
                    // adding links by identifying UX change the URLs
                    var windowparentlocation=String(window.location);
                    var getindex=windowparentlocation.search("sfdcIFrameOrigin=");
                    var resultedOpptyFieldsURL='';
                    var resultedOpptyProdFieldsURL='';
                    if(parseInt(getindex)>-1){                        
                        var baseURL = '{!$Site.BaseUrl}';
                        resultedOpptyFieldsURL=baseURL+'/lightning/setup/object/Opportunity/FieldsAndRelationships/view';
                        resultedOpptyProdFieldsURL=baseURL+'/lightning/setup/object/OpportunityLineItem/FieldsAndRelationships/view';
                        resultedOrderFieldsURL=baseURL+'/lightning/setup/object/Order/FieldsAndRelationships/view';
                        resultedOrderProdFieldsURL=baseURL+'/lightning/setup/object/OrderItem/FieldsAndRelationships/view';
                    }
                    else{
                        var baseURL=windowparentlocation.split("/apex").reverse().pop();
                        resultedOpptyFieldsURL=baseURL+'/p/setup/layout/LayoutFieldList?type=Opportunity&setupid=OpportunityFields';
                        resultedOpptyProdFieldsURL=baseURL+'/p/setup/layout/LayoutFieldList?type=OpportunityLineItem&setupid=OpportunityLineItemFields';
                        resultedOrderFieldsURL=baseURL+'/p/setup/layout/LayoutFieldList?type=Order&setupid=OrderFields';
                        resultedOrderProdFieldsURL=baseURL+'/p/setup/layout/LayoutFieldList?type=OrderItem&setupid=OrderItemFields';
                    }
                    //opptyFieldsLink
                    if(document.getElementById("opptyFieldsLink"))
                        document.getElementById("opptyFieldsLink").href=resultedOpptyFieldsURL;
                    if(document.getElementById("opptyFieldsForLILink"))
                        document.getElementById("opptyFieldsForLILink").href=resultedOpptyFieldsURL;
                    //opptyProdFieldsLink
                    if(document.getElementById("opptyProdFieldsLink"))
                        document.getElementById("opptyProdFieldsLink").href=resultedOpptyProdFieldsURL;
                    //Order and Order Product Fields Links
                    if(document.getElementById("orderFieldsLink"))
                        document.getElementById("orderFieldsLink").href=resultedOrderFieldsURL;
                    if(document.getElementById("orderProductFieldsLink"))
                        document.getElementById("orderProductFieldsLink").href=resultedOrderProdFieldsURL;
                    
                }
                
                function InvoiceConfigJSInit() {
                    addLinkDynamically(); 
                    select2Init(); 
                    if({!updateCustomButtons}){
                        update_additional_custom_buttons();
                    }              
                };
                function select2Init() {
                    j$(".CustombuttonsSelect").select2({
                        tags: true,  
                        maximumSelectionLength: 25,                    
                    });                
                    
                    j$(".CustombuttonsSelect").on('select2:select', function (e) {
                        var data = e.params.data;
                        var buttonName = data.id;
                        updateButtonsConfiguration(buttonName,'adding');
                        console.log('adding: ',buttonName);
                    });
                    
                    j$(".CustombuttonsSelect").on('select2:unselect', function (e) {
                        var data = e.params.data;
                        var buttonName = data.id;
                        updateButtonsConfiguration(buttonName,'removing');
                        console.log('removing: ',buttonName);
                    });
                }
                // Invoice Configuration Javascript End
                
                //Address Sync JavaScript start here            
                function lightningMessageStyle(){
                    HideStyleSheet();                    
                    message();
                    //scrollWindowUp();
                }
                function scrollWindowUp(){                
                    if((j$("div[class*='error']").length>0) || (j$("div[class*='warning']").length>0)){
                        window.scrollTo(0,0);
                    }
                }
                //Address Sync JavaScript End here
                
                // Batch Invoice JavaScript Start here
                var oppSelectedCountPerPageMap = new Map(); 
                function resetSelectedCountMap(){
                    oppSelectedCountPerPageMap = new Map();
                }
                function massCheckUncheck(element, offset){
                    var pageNo = offset / 50;
                    var countToCheck = 0;
                    if(element.id=='Checkall'){
                        var AllCheckboxElements=j$('input[id$=\"oppCheck\"]');
                        for(x in AllCheckboxElements ){
                            if(AllCheckboxElements[x].type=='checkbox'){
                                AllCheckboxElements[x].checked=element.checked;
                                countToCheck++;
                            }
                        }
                        if(element.checked)
                            oppSelectedCountPerPageMap.set(pageNo,countToCheck);
                        else
                            oppSelectedCountPerPageMap.set(pageNo,0);
                        console.log('oppSelectedCountPerPageMap ::'+oppSelectedCountPerPageMap);
                        oppSelectedCountPerPageMap.forEach(logMapElements);
                        checkfor50checksCount();  
                    }
                    // following is used to uncheck 
                    var AllCheckboxElementsCopy=j$('input[id$=\"oppCheck\"]');
                    var checkboxtotalcount=AllCheckboxElementsCopy.length;
                    var checkedcount=0;
                    for(xw in AllCheckboxElementsCopy ){
                        if(AllCheckboxElementsCopy[xw].checked){
                            checkedcount+=1;}
                    }
                    console.log(checkedcount);
                    //alert(document.getElementById("Checkall"));
                    if(document.getElementById("Checkall") != null){
                        if(document.getElementById("Checkall").checked){
                            if(checkedcount<checkboxtotalcount){
                                document.getElementById("Checkall").checked='';
                                document.getElementById("Checkall").value='';}
                        }
                        else {
                            if(checkedcount==(checkboxtotalcount)){
                                document.getElementById("Checkall").checked='checked';
                                document.getElementById("Checkall").value='true';}
                            else{
                                document.getElementById("Checkall").checked='';
                                document.getElementById("Checkall").value='';
                            }
                        }
                    }
                    
                    
                }
                
                function checkCount(element, offset){
                    var pageNo = offset / 50;
                    var count = 0;
                    if(oppSelectedCountPerPageMap.has(pageNo))
                        count = oppSelectedCountPerPageMap.get(pageNo);
                    if(element.checked)
                        count++;
                    else
                        count--;
                    oppSelectedCountPerPageMap.set(pageNo,count);
                    console.log('oppSelectedCountPerPageMap ::'+oppSelectedCountPerPageMap);
                    oppSelectedCountPerPageMap.forEach(logMapElements);
                    checkfor50checksCount();
                    
                }
                function logMapElements(value, key, map) {
                    console.log(`m[${key}] = ${value}`);
                }
                
                function checkfor50checksCount(){
                    var selectedCount = 0;
                    oppSelectedCountPerPageMap.forEach(function (value, key, mapObj) { selectedCount+=value });  
                    console.log('Total count is: '+selectedCount);
                    if(selectedCount == 50)showBatchInvModal('You have reached the maximum number of Opportunities (50) that can be selected.');
                    if(selectedCount > 50)showBatchInvModal('You have crossed the maximum number of Opportunities (50) that can be selected.');
                }
                
                function changeTheContact(name,ele){
                    if(!name.value){
                        document.getElementById('' + name.id).style.borderColor = 'Red';
                        document.getElementById('' + name.id).focus();
                        showBatchInvModal("Please enter a valid value");
                    }
                    else{
                        var eleid=ele+':test';
                        j$('input[id$=\"'+eleid+'\"]').val(name.value); 
                        document.getElementById('' + name.id).style.borderColor = '';
                    }
                    
                }
                
                function enablingInput(elemId,eleValue,index)
                {
                    j$('#'+elemId).removeAttr("disabled");
                    var eleid=index+':test';
                    j$('input[id$=\"'+eleid+'\"]').val(document.getElementById(elemId).value);
                    checkingDuplicateInputValues();
                }
                
                function disablingInput (elemId,eleValue,index)
                {
                    j$('#'+elemId).attr("disabled","disabled");
                    var eleid=index+':test';
                    j$('input[id$=\"'+eleid+'\"]').val(eleValue.value);
                    var AllTextboxElements=j$("input[type*='text']:disabled");
                    var Textboxtotalcount=AllTextboxElements.length;
                    for(i=0; i< Textboxtotalcount ; i++){
                        document.getElementById('' + AllTextboxElements[i].id).style.borderColor = '';
                        document.getElementById('' + AllTextboxElements[i].id).focus();
                    }
                    checkingDuplicateInputValues();
                }
                
                function checkingDuplicateInputValues(){
                    var AllTextboxElements=j$("input[type*='text']:enabled");
                    var Textboxtotalcount=AllTextboxElements.length;
                    var mapWithValuesandId = new Map();
                    var duplicatesFoundMapID = [];
                    for(i=0; i< Textboxtotalcount ; i++){
                        document.getElementById('' + AllTextboxElements[i].id).style.borderColor = '';
                        document.getElementById('' + AllTextboxElements[i].id).focus();
                        if(mapWithValuesandId.has(AllTextboxElements[i].value)){
                            duplicatesFoundMapID.push(mapWithValuesandId.get(AllTextboxElements[i].value));
                            duplicatesFoundMapID.push(AllTextboxElements[i].id);
                        }
                        else
                            mapWithValuesandId.set(AllTextboxElements[i].value,AllTextboxElements[i].id);
                    }
                    var btnId = 'recheckbutton';
                    if(duplicatesFoundMapID.length >= 1){
                        showBatchInvModal('Please enter the Unique Xero Contact Names.');
                        for(i=0; i<duplicatesFoundMapID.length; i++ ){
                            document.getElementById('' + duplicatesFoundMapID[i]).style.borderColor = 'Red';
                            document.getElementById('' + duplicatesFoundMapID[i]).focus();
                        }
                        //j$('#'+btnId).attr("disabled","disabled");
                        j$('*[id*=recheckbutton]:visible').attr("disabled","true");
                    }
                    else
                        j$('*[id*=recheckbutton]:visible').removeAttr("disabled");
                }
                function disableButton(btnid){
                    var AllErrorMessagesCopy=j$(".errorM6, .errorM4, .errorM3, .errorM2, .errorS1");
                    var ErrorMessagesCount=AllErrorMessagesCopy.length;
                    if(ErrorMessagesCount > 0){
                        j$('input[id$=\"'+btnid+'\"]').attr("disabled", true);
                    }
                }    
            // Batch Invoice JavaScript End here

            </script>
            
            <apex:includeScript value="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/JS/jsapi.js')}" />
            <!-- Invoice Configuration CSS Styles start-->
            <style>
                .msgIcon{
                    display:none;
                }
                .message {
                    margin: 0px !important;
                }
                .message .messageText {
                    margin: 0px;
                }
                .message .messageText h4 {
                    font-weight: inherit;
                    display: initial;
                }
                .slds-scope .slds-spinner_container{
                    position: fixed;
                    z-index: 9999;
                }
                .slds-scope .slds-section__title-action{
                    display: initial;
                }
                .slds-scope .slds-section__title-action:active,
                .slds-scope .slds-section__title-action:focus, 
                .slds-scope .slds-section__title-action:hover{
                    background: initial;
                }
                .slds-scope .slds-section-title_divider .slds-button:focus{
                    box-shadow: initial;
                }                
                .select2-container--default .select2-selection--multiple {
                    border: solid #d8dde6 1px;
                }
                .select2-container--default.select2-container--focus .select2-selection--multiple {
                    border: solid #1589ee 1px;
                    box-shadow: 0 0 3px #0070D2;
                }
                .select2-dropdown{
                    border: 1px solid #1589ee;
                    border-bottom-left-radius: 0;
                    border-bottom-right-radius: 0;
                }
                .select2-results__option {
                    margin-left:0;
                    line-height:7px !important;
                    font-family: "Salesforce Sans",Arial,sans-serif;
                    font-size: .8125rem;
                    color: #3e3e3c;
                }
                .select2-container--default .select2-results__option--highlighted[aria-selected]{
                    background-color: #2692FB;
                }
                .select2-container--default .select2-selection--multiple .select2-selection__choice{
                    background-color: #fff;
                    color: #16325c;
                    border: 1px solid #d8dde6;
                    border-radius: 3px;
                }
                .select2-container--default .select2-selection--multiple .select2-selection__choice__remove {
                    font-weight: 700;
                    font-size: 17px;
                }
                .select2-container .select2-search--inline .select2-search__field {
                    margin-top: 6px;
                    line-height: 24px;
                }
                .select2-results__message{
                    color: red;
                    font-weight: bold;
                }
                .select2-container--default.select2-container--disabled .select2-selection--multiple {
                    background-color: #e0e5ee;
                    border-color: #a8b7c7;
                    cursor: not-allowed;
                }
                <!-- Invoice Configuration CSS Styles End -->
                <!-- Address Sync CSS Styles Start -->
                .innermost_table td{padding: .3rem !important ;height:1.9rem;}
                .big_arrow{color:#42B7F4;font-size:40px;}
                .rotate_arrow{-ms-transform: rotate(180deg); /* IE 9 */ -webkit-transform: rotate(180deg); /* Chrome, Safari, Opera */ transform: rotate(180deg);}
                .commandlink{text-decoration:none !important;}
                .arrow{color:#42B7F4;font-size:14px;}
                .widget_big_arrow{color:#42B7F4;font-size:2em;}
                @media only screen and (min-width: 64em) {
                    .centerDiv{
                        width: 50%;
                    }
                }
                @media only screen and (max-width: 64em) {
                    .centerDiv{
                        width: 75%;
                    }
                }
                .slds-scope .slds-notify_alert {justify-content: inherit !important;}
                .slds-spinner-displaytext {
                    top: 55%;
                    position:absolute;
                    width: 100%;
                    text-align: center;
                    font-size: larger;
                }
            </style>
            <!-- Address Sync Styles Ends here -->
            <style>
                
                .message {
                    background-color: inherit;
                    border-style: none;
                    padding: initial;
                    margin: 0px 0px 12px 0px !important;
                }
                table.messageTable td {
                    border-top: 0px !important;
                }                                             
                .slds-scope .slds-table .messageTable td {
                    padding: 1px;
                }
                iframe{ border:0px;}
                               
                .slds-scope a{
                    text-decoration: underline;
                    color: gray;
                }
                .slds-scope .slds-table td{
                    white-space: normal;
                    padding: 0.5rem !important;
                }
                .slds-table td img {
                    max-width: initial;
                    height:initial;
                }
                
                table.google-visualization-table-table td:nth-child(4) {
                    word-break: break-word;
                }

                table.google-visualization-table-table td:nth-child(5) {
                    white-space: nowrap;
                }
                
                .slds-scope .Tabitha .slds-checkbox_toggle .slds-checkbox_faux{
                    width: 8.7rem;
                    background-color: #30A256;
                }
                .slds-scope .Tabitha .slds-checkbox_toggle .slds-checkbox_faux:focus, .slds-scope .Tabitha .slds-checkbox_toggle .slds-checkbox_faux:hover{
                    background-color: darkgreen;
                }
                .slds-scope .Tabitha .slds-checkbox_toggle .slds-checkbox_faux:before{
                    position: absolute;
                    transform: rotate(0deg);
                    border-left: 2px;
                    border-right: 0px;
                    border-bottom: 0px;
                    bottom: 3px;
                    right: 0rem;
                    width: 7rem;
                    border-radius: 0;
                    background-color: transparent;
                    content: 'Xero Read Only Mode';
                    color: white;
                }
                .slds-scope .Tabitha .slds-checkbox_toggle [type=checkbox]:checked+.slds-checkbox_faux:after, 
                .slds-scope .Tabitha .slds-checkbox_toggle [type=checkbox]:checked+.slds-checkbox_faux_container .slds-checkbox_faux:after, 
                .slds-scope .Tabitha .slds-checkbox_toggle [type=checkbox]:checked~.slds-checkbox_faux:after{
                    position: absolute;
                    transform: rotate(0deg);
                    border-left: 2px;
                    border-bottom: 0px;
                    border-right: 0px;
                    left: .6rem;
                    width: 7rem;
                    border-radius: 0;
                    background-color: transparent;
                    content: 'Xero Active Mode';
                    color: white;
                }
                .slds-scope .slds-table_bordered {
                    border-top: 0px solid #d8dde6;
                }
                .mt, .topborder {
                    border-top: 1px solid #d8dde6 !important;
                    padding : 0px !important;                   
                }
                .topborder th {
                    padding : 0.5rem !important;
                }
                .slds-text-body_small {
                    font-size: .75rem;
                    color: rgb(62, 62, 60);
                }
                .slds-scope .slds-page-header{
                    border:0px;
                    border-bottom: 1px solid #d8dde6;
                    background: #f7f9fb;
                    padding: 0.5rem !important;
                }
                .slds-scope .slds-page-header__title{
                    font-weight: normal;
                }
                .slds-scope .slds-media_center{
                    margin: 0.50rem;
                }
                .slds-scope .slds-tabs_default__item.slds-is-active .slds-tabs_default__link{
                    font-weight: normal;    
                }
                .slds-scope .slds-section-title_divider{
                    background: #f4f6f9;
                }
                .slds-scope .slds-section__title-action{
                    background: #f4f6f9;
                }
                .slds-scope .slds-tabs_default__item.slds-is-active .slds-tabs_default__link{
                    text-decoration: none;
                }
                .noSidebarCell, .sidebarCell .fixed{
                    padding: 0px !important;
                }
                .sfdcBody{
                    padding: 0px !important;
                }
                .nohover:hover {
                    background-color: #f4f8fA !important;
                    box-shadow: initial !important
                }
                .slds-scope .slds-path__nav :hover{
                    cursor:default !important;
                }
                /* Arrow Path styles start */
                .slds-scope .slds-path__nav .slds-is-complete, .slds-scope .slds-path__nav .slds-is-complete:before, .slds-scope .slds-path__nav .slds-is-complete:after {
                    background: rgb(75, 202, 129);
                }
                .slds-scope .slds-path__nav .slds-is-active, .slds-scope .slds-path__nav .slds-is-active:before, .slds-scope .slds-path__nav .slds-is-active:after {
                    background: rgb(0, 95, 178);
                }
                .slds-scope .slds-path__nav .slds-is-incomplete, .slds-scope .slds-path__nav .slds-is-incomplete:before, .slds-scope .slds-path__nav .slds-is-incomplete:after {
                    background: rgb(236, 235, 234);
                }
                .slds-scope .slds-path__nav .slds-is-complete:hover, .slds-scope .slds-path__nav .slds-is-complete:hover:before, .slds-scope .slds-path__nav .slds-is-complete:hover:after{
                    background: rgb(4, 132, 75);
                }
                .slds-scope .slds-path__nav .slds-is-active:hover, .slds-scope .slds-path__nav .slds-is-active:hover:before, .slds-scope .slds-path__nav .slds-is-active:hover:after{
                    background: rgb(0, 57, 107);
                }
                .slds-scope .slds-path__nav .slds-is-incomplete:hover, .slds-scope .slds-path__nav .slds-is-incomplete:hover:before, .slds-scope .slds-path__nav .slds-is-incomplete:hover:after {
                    background: rgb(221, 219, 218);
                }
                /* Arrow Path styles end */
                /* Styles for Invoice Chaser Lightning component */
                .slds-scope .slds-text-heading_large, .slds-scope .slds-text-heading--large {
                    font-size: 0.95rem ;
                }
                .slds-scope .slds-th__action {
                    padding: 0.25rem !important;
                }
                /*Styles for Invoice Chaser Lightning Component ends */
                .slds-scope .slds-tabs_default__link, .sortlink {
                    text-decoration: none !important;
                    color: rgb(81, 79, 77) !important;
                }
                .sortlink:hover {
                    color: rgb(0, 95, 178) !important;
                }
                /*Troubleshoot menu section styles*/
                .slds-scope img[src*='https://cdn.daddyanalytics.com/breadwinner'] {
                    width: 24px;
                    height: 20px;
                }
                .slds-spinner.slds-spinner_small.slds-spinner_brand.troubleshootspinner{
                    top: inherit !important;
                    left: inherit !important;
                    transform: translate(0%, 0%) rotate(90deg) !important;
                }
                .slds-scope .slds-form-element__icon {
                    vertical-align: middle;
                }
                .BatchInvoiceLinks {
                    color: rgb(0, 109, 204) !important;
                    text-decoration: none !important;
                }
                .BatchInvoiceLinks:hover {
                    text-decoration: underline !important;
                }

            </style>
            
        </head>
        <body style="height:100%">
            <apex:form id="theForm" style="height:100%">
                <div class="slds-scope slds-p-vertical_x-small" style="height:100%">
                    <apex:actionFunction name="deleteMDfield" action="{!deleteMasterDetailFieldIfExists}" rerender="nothing"/>
                    <!-- ----------------------------------- fields level help ---------------------------------- -->
                    <div id="help" class="slds-popover slds-popover_tooltip slds-nubbin_bottom-left" role="tooltip" aria-live="polite" style="display:none;position:absolute;top:0px;left:0px;">
                        <div class="slds-popover__body slds-text-longform">
                            <p>Help text will come here dynamically</p>
                        </div>
                    </div>
                    <!-- ----------------------------------- fields level help ---------------------------------- -->
                    <apex:actionStatus id="assign-action-status" layout="block">
                        <apex:facet name="start">
                            <div class="slds-spinner_container">
                                <div class="slds-spinner_brand slds-spinner slds-spinner_medium" role="alert">
                                    <span class="slds-assistive-text">Loading</span>
                                    <div class="slds-spinner__dot-a"></div>
                                    <div class="slds-spinner__dot-b"></div>
                                </div>
                            </div>
                        </apex:facet>
                    </apex:actionStatus>
                    <apex:actionFunction name="queryappconfigdynamic" action="{!QueryAppconfigDynamic}" status="assign-action-status" reRender="BillsMenuFieldsSectionId,PoMenuFieldsSectionId" oncomplete="HideStyleSheet();message();">
                        <apex:param name="BillsORPoParam" value="" assignTo="{!BillsORPo}"/>
                    </apex:actionFunction>
                    <apex:actionFunction name="queryPSAssignedUsers" action="{!queryPermissionSetAssignedUsers}" status="assign-action-status" reRender="psWholeBlock" oncomplete="reRenderArrowUpSVG('.nameColumnUp');reRenderArrowDownSVG('.nameColumnDown');reRenderArrowUpSVG('.nameColumnUp1');reRenderArrowDownSVG('.nameColumnDown1');reRenderArrowUpSVG('.unameColumnUp');reRenderArrowDownSVG('.unameColumnDown');reRenderArrowUpSVG('.profileColumnUp');reRenderArrowDownSVG('.profileColumnDown');HideStyleSheet();message();">
                        <apex:param name="selectedPermissionSetParam" value="" assignTo="{!selectedPermissionSet}"/>
                        <apex:param name="column" value="Name" assignTo="{!sortExpression}"/>
                        <apex:param name="dir" value="ASC" assignTo="{!sortDirection}"/>
                        <apex:param name="column" value="Name" assignTo="{!modifyAllDataSortExpression}"/>
                        <apex:param name="dir" value="ASC" assignTo="{!modifyAllDataSortDirection}"/>
                    </apex:actionFunction>
                    <apex:actionFunction name="reRenderInvoiceConfigSection" reRender="InvoiceConfigSection" action="{!InvoiceConfigInit}" status="assign-action-status" oncomplete="InvoiceConfigJSInit();reRenderRightSVGIcon()"/>
                    <apex:actionFunction name="reRenderXeroContactSection" reRender="xeroContactsBlock" action="{!QueryAppconfigDynamic}" status="assign-action-status" oncomplete="HideStyleSheet();message();"/> 
                    <apex:actionFunction name="reRenderEmailConfigSection" reRender="emailConfigSection" action="{!emailConfigInit}" status="assign-action-status" oncomplete="HideStyleSheet();message();"/> 
                    <apex:actionFunction name="reRenderMissionControlSection" reRender="missionControlBlock" action="{!QueryAppconfigDynamic}" status="assign-action-status" oncomplete="HideStyleSheet();message();"/>
                    <apex:actionFunction name="reRenderAddressSyncSection" reRender="AddressSyncSection" action="{!AddressSyncInit}" status="assign-action-status" oncomplete="message();callPageLoadMethod();HideStyleSheet();"/>
                    <apex:actionFunction name="reRenderBatchInvoiceSection" reRender="BatchInvoiceSection" action="{!BatchInvoiceInit}" status="assign-action-status" oncomplete="message();"/>
                    <apex:actionFunction name="refreshGeneralTroubleshootVars" action="{!refreshGeneralTroubleshootVariables}" status="assign-action-status" oncomplete="HideStyleSheet();message();" reRender="GeneralTroubleshootSection"/>
                    <!-- Adding SLDS Modal for popup box -->
                    <div >
                        <div class="slds-modal slds-modal_small" aria-hidden="false" role="dialog" id="disconnectmodal">
                            <div class="slds-modal__container" style="max-width:33%">
                                <div class="slds-modal__header">
                                    <h2 class="slds-text-heading_medium">Disconnect Xero Org</h2>
                                </div>
                                <div class="slds-modal__content slds-p-around_medium">
                                    <div>
                                        Clicking disconnect would only delete the connection with this Xero Org. Do you really want to disconnect this Xero Org? 
                                    </div>
                                    <div align="right" style="margin-top: 1rem;">
                                        <apex:commandLink id="okaybutton" styleClass="btns slds-button slds-button_brand" value="OK" action="{!DisconnectAppConfig}" status="assign-action-status" />                                        
                                        <apex:commandbutton id="cancelbutton" styleClass="btns slds-button slds-button_neutral slds-m-left_xx-small" value="Cancel" onclick="cancelDisc();" reRender="nothing"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="slds-backdrop" id="backdrop"></div>
                    </div>
                    <Script>
                        function cancelDisc(){
                        //window.location.href = '{!URLFOR($Page.Breadwinner)}';
                        j$('#backdrop').removeClass('slds-backdrop_open');
                        j$('#disconnectmodal').removeClass('slds-fade-in-open');
                        }
                        
                        function showDiscModal(){
                        j$('#backdrop').addClass('slds-backdrop_open');
                        j$('#disconnectmodal').addClass('slds-fade-in-open');
                        }  
                    </Script>
                    <!-- End of Modal -->
                    
                    <apex:outputPanel rendered="{!isBreadwinnerConnection}">
                        <div class="slds-grid" style="flex-wrap:wrap; height:100%">
                            <div class="slds-p-horizontal_x-small slds-size_1-of-1 slds-medium-size_1-of-6 slds-large-size_2-of-12" style="border-right: 1px solid gray;" >
                                <div class="slds-m-top_medium slds-align_absolute-center" style="height: 125px;">
                                    <img src="{!URLFOR($Resource.Breadwinner_Xero, 'Breadwinner_Xero/Images/BreadwinnerLogo.png')}" alt="Breadwinner Logo" />
                                </div>
                                
                                <hr style="margin: 0rem;border-top: 1px solid gray;"/>
                                
                                <div id="Breadwinner-Left-Menu" class="slds-grid slds-grid_vertical slds-navigation-list_vertical">
                                    
                                    <h2 class="slds-text-title_caps slds-p-around_medium" id="SETUPANDCONFIG">SETUP AND CONFIG</h2>
                                    <apex:outputPanel >
                                        <ul>
                                            <li class="slds-is-active slds-nav-vertical__item"><a href="javascript:void(0);" onclick="selectTab(this);checkSetupTabStepsCompletedFunc(); onTabEnterPushToInteractionLog('Setup'); " class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="Setup"  title="Setup" >Setup</a></li>
                                        </ul>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!AND(listAppConfig.size>0, OR(isBreadwinnerAdministrator, canPerformBreadwinnerOperations))}">
                                        <ul>
                                            <!-- <li class="searachableclass slds-is-active"><a href="javascript:void(0);" onclick="selectTab(this);checkSetupTabStepsCompletedFunc(); onTabEnterPushToInteractionLog('Setup'); " class="slds-truncate slds-navigation-list_vertical__action slds-text-link_reset" id="Setup"  title="Setup" >Setup</a></li> -->
                                            <li class="nestedcheck"><a href="javascript:void(0);" style="padding-left: 0px;" onclick="showHideNestedMenu(this);" class="slds-truncate slds-nav-vertical__action slds-text-link_reset nohover" id="Configuration"  title="Configuration" >
                                                <svg aria-hidden="true" class="slds-section__title-action-icon slds-button__icon slds-button__icon_left slds-m-left_x-small">
                                                    <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#switch')}"></use>
                                                </svg>
                                                Configuration
                                                </a>
                                                <ul class="slds-list_vertical slds-has-block-links slds-is-nested slds-hide">
                                                    <li class="searachableclass slds-nav-vertical__item"><a href="javascript:void(0);" onclick="selectTab(this);onTabEnterPushToInteractionLog('Invoice Configuration');reRenderInvoiceConfigSection();" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="InvoiceContent" title="Invoices" >Invoices</a></li>
                                                    <li class="searachableclass slds-nav-vertical__item" style="display:{!if(AND(!isFreePlan, isAccountsPayableEnabled),'Block','None')}"><a href="javascript:void(0);" onclick="queryappconfigdynamic('Bill');selectTab(this);onTabEnterPushToInteractionLog('Bills Configuration');" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="BillsContent" title="Bills">Bills</a></li>
                                                    <li class="searachableclass slds-nav-vertical__item" style="display:{!if(AND(!isFreePlan, isAccountsPayableEnabled),'Block','None')}"><a href="javascript:void(0);" onclick="queryappconfigdynamic('PO');selectTab(this);onTabEnterPushToInteractionLog('POs Configuration');" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="POsContent" title="Purchase Orders">POs</a></li>
                                                    <li class="searachableclass slds-nav-vertical__item"><a href="javascript:void(0);" onclick="selectTab(this);onTabEnterPushToInteractionLog('Xero Contacts Configuration');reRenderXeroContactSection();" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="XeroContactsContent" title="Xero Contacts">Xero Contacts</a></li>
                                                    <li class="searachableclass slds-nav-vertical__item" style="display:{!if(AND(!isFreePlan, isBusinessOrHigher),'Block','None')}"><a href="javascript:void(0);" onclick="selectTab(this);onTabEnterPushToInteractionLog('Emails Configuration');reRenderEmailConfigSection();" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="EmailsContent" title="Emails">Emails</a></li>
                                                    <li class="searachableclass slds-nav-vertical__item" style="display:{!if(AND(!isFreePlan, MultiTenantEnabled, isProfessionalOrHigher),'Block','None')}"><a href="javascript:void(0);" onclick="selectTab(this);onTabEnterPushToInteractionLog('Multi Tenant Configuration');" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="MultiTenantSetup" title="Multi Tenant">Multi Tenant</a></li>                                                    
                                                </ul>
                                            </li>
                                        </ul>
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!isMissionControlInstalled}">
                                        <ul>
                                            <li class="searachableclass slds-nav-vertical__item"><a href="javascript:void(0);" onclick="selectTab(this);onTabEnterPushToInteractionLog('Mission Control Configuration');reRenderMissionControlSection();" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="missionControlContent" title="Mission Control">Mission Control</a></li>
                                        </ul>
                                    </apex:outputPanel>
                                    
                                    <apex:outputPanel rendered="{!OR(isBreadwinnerAdministrator, canPerformBreadwinnerOperations)}">
                                        <ul>
                                            <li class="searachableclass slds-nav-vertical__item"><a href="javascript:void(0);" onclick="selectTab(this);onTabEnterPushToInteractionLog('Permissions');" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="Permissions" title="Permissions" >Permissions</a></li>
                                        </ul>
                                    </apex:outputPanel>
                                    <h2 class="slds-text-title_caps slds-p-around_medium" id="TOOL" style="display:{!if(AND(isFreePlan, NOT(OR(isBreadwinnerAdministrator, canPerformBreadwinnerOperations))),'None','Block')}">TOOLS</h2>
                                    <ul>
                                        <li style="display:{!if(!isFreePlan,'Block','None')}" class="searachableclass slds-nav-vertical__item"><a href="javascript:void(0);" onclick="selectTab(this);onTabEnterPushToInteractionLog('Invoice Collection');showspinner();loadInvoiceCollection();" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="InvoiceCollection" title="Invoice Collection" >Invoice Collection</a></li>
                                        <li style="display:{!if(OR(isBreadwinnerAdministrator, canPerformBreadwinnerOperations),'Block','None')}" class="searachableclass slds-nav-vertical__item"><a href="javascript:void(0);" onclick="selectTab(this);onTabEnterPushToInteractionLog('Address Sync');reRenderAddressSyncSection();" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="AddressSync" title="Address Sync">Address Sync</a></li>
                                        <li style="display:{!if(AND(!isFreePlan, isBusinessOrHigher, OR(isBreadwinnerAdministrator, canPerformBreadwinnerOperations)),'Block','None')}" class="searachableclass slds-nav-vertical__item"><a href="javascript:void(0);" onclick="selectTab(this);onTabEnterPushToInteractionLog('Batch Invoice');reRenderBatchInvoiceSection();" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="BatchInvoice" title="Batch Invoicing" >Batch Invoicing</a></li>
                                    </ul>
                                    <h2 class="slds-text-title_caps slds-p-around_medium" id="LEARN">LEARN</h2>
                                    <ul>
                                        <li class="searachableclass slds-nav-vertical__item"><a href="javascript:void(0);" onclick="loadIframesfun('Knowledge_BasePage','{!BW_SupportPortalURL}/support/home');selectTab(this);onTabEnterPushToInteractionLog('Knowledge Base');" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="KnowledgeBase" title="Knowledge Base" >Knowledge Base</a></li>
                                        <li class="searachableclass slds-nav-vertical__item"><a href="javascript:void(0);" onclick="loadIframesfun('Contact_SupportPage','{!BW_SupportPortalURL}/support/tickets/new?{!contactSupportPrameters}');selectTab(this);onTabEnterPushToInteractionLog('Support');" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="ContactSupport" title="Contact Support">Contact Support</a></li>
                                    </ul>
                                    <h2 class="slds-text-title_caps slds-p-around_medium" id="ADMIN">ADMIN</h2>
                                    <ul>
                                        <li class="searachableclass slds-nav-vertical__item"><a href="javascript:void(0);" onclick="selectTab(this);onTabEnterPushToInteractionLog('Billing');" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="Billing" title="Billing" >Billing</a></li>
                                        <li class="nestedcheck"><a href="javascript:void(0);" style="padding-left: 0px;" onclick="showHideNestedMenu(this);" class="slds-truncate slds-nav-vertical__action slds-text-link_reset nohover" id="Troubleshoot" title="Troubleshoot">
                                            <svg aria-hidden="true" class="slds-section__title-action-icon slds-button__icon slds-button__icon_left slds-m-left_x-small">
                                                <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#switch')}"></use>
                                            </svg>
                                            Troubleshoot
                                            </a>
                                            <ul class="slds-list_vertical slds-has-block-links slds-is-nested slds-hide">
                                                <li class="searachableclass slds-nav-vertical__item"><a href="javascript:void(0);" onclick="selectTab(this);onTabEnterPushToInteractionLog('Troubleshoot - General');refreshGeneralTroubleshootVars();" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="General-Troubleshoot" title="General" >General</a></li>
                                                <li class="searachableclass slds-nav-vertical__item"><a href="javascript:void(0);" onclick="selectTab(this);onTabEnterPushToInteractionLog('Troubleshoot - Connection');sendXeroOrgId('{!XeroOrgId}');" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="Connection-Troubleshoot" title="Connection" >Connection</a></li>
                                                <li class="searachableclass slds-nav-vertical__item"><a href="javascript:void(0);" onclick="selectTab(this);onTabEnterPushToInteractionLog('Status Logs');" class="slds-truncate slds-nav-vertical__action slds-text-link_reset" id="StatusLogs" title="Status Logs">Status Logs</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="slds-size_1-of-1 slds-medium-size_5-of-6 slds-large-size_10-of-12 slds-m-bottom_large">
                                <div id="breadwinner-right-content">
                                    
                                    
                                    <div id="SetupAndConfig-TAB1" class="slds-show" aria-labelledby="Setup">
                                        <!-- -----------------------------BreadwinnerHome Tab header start ---------------------------->
                                        <div class="slds-page-header slds-m-bottom_small" role="banner">
                                            <div class="slds-media slds-media_center">
                                                <div class="slds-media__figure">
                                                    <span class="slds-icon_container slds-icon-custom-custom3" title="Setup">
                                                        <svg aria-hidden="true" class="slds-icon">
                                                            <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/custom-sprite/svg/symbols.svg#custom3')}"></use>
                                                        </svg>
                                                    </span>
                                                </div>
                                                <div class="slds-media__body">
                                                    <p class="slds-page-header__title slds-truncate" title="Breadwinner Setup">Setup</p>
                                                    <p class="slds-text-body_small">Breadwinner  Xero </p>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- -----------------------------BreadwinnerHome Tab header END ---------------------------->                  
                                        <div class="slds-m-top_medium slds-m-horizontal_small" >
                                            <apex:outputPanel rendered="{!AND(NOT(ISBLANK(bwsettingWrapper.Endpoint_URL_Override)), bwsettingWrapper.Endpoint_URL_Override <> BW_API_BaseURL)}">
                                                <div class="slds-align_absolute-center slds-m-bottom_small" style="font-size:24px; color: darkred;">You are using the endpoint {!bwsettingWrapper.Endpoint_URL_Override}</div>
                                            </apex:outputPanel>
                                            <apex:outputPanel layout="block" styleClass="slds-m-horizontal_small">
                                                <apex:outputPanel layout="block" styleClass="warningM3" style="border-radius:4px;color: black;" rendered="{!AND(orgStatus =='expired',!isFreePlan)}">
                                                    Your trial/subscription has expired. Please contact sales@breadwinner.com<span style="display:{!IF(OR(isDeveloperEdition,isSandbox),'none','inline')}">, or please contact your Account Executive.</span>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="warningM3" style="border-radius:4px;color: black;" rendered="{!AND(isOrgOutOfInvoiceSync, orgStatus != 'expired')}">
                                                    Breadwinner is not able to sync data from Xero to Salesforce. Please check for errors in the <a href="javascript:void(0);" style="display: contents;" onclick='selectTab(this);onTabEnterPushToInteractionLog("Status Logs");' id="StatusLogs">Status Logs</a> to know the cause of the issue.                                                </apex:outputPanel>
                                                <apex:pagemessages id="pgmsgtag"/>
                                            </apex:outputPanel>
                                            <!-- ----------- Schedule job status Start-------------- -->
                                            <apex:outputPanel layout="block" rendered="{!isBreadwinnerAdministrator}" id="InactiveUserMessage">
                                                <apex:outputPanel layout="block" styleClass="warningM3" style="border-radius:4px;" rendered="{!NOT(areScheduledJobsRunbyActiveUser)}">
                                                    Breadwinner scheduled Jobs are running from an Inactive User. Visit the&nbsp;<a href="javascript:void(0);" style="color:black" onclick="OpenTroubleshootGeneralTab();">General tab</a>&nbsp;under the Troubleshoot section to fix this.
                                                </apex:outputPanel>
                                            </apex:outputPanel>
                                            <!-- ----------- Schedule job status END---------------- -->
                                            
                                            <!-- ----------- Progress Bar Start-------------- -->
                                            
                                            <!-- Setup Steps Arrow Path start -->
                                            <apex:outputPanel layout="block" id="setupArrowPath" style="padding-bottom: 1rem;">
                                                <div class="slds-path slds-path_has-coaching">
                                                    <div class="slds-grid slds-path__track">
                                                        <div class="slds-grid slds-path__scroller-container">
                                                            <div class="slds-path__scroller" role="application">
                                                                <div class="slds-path__scroller_inner">
                                                                    <ul class="slds-path__nav" role="listbox" aria-orientation="horizontal">
                                                                        <li class="slds-path__item slds-is-complete" role="presentation">
                                                                            <a aria-selected="false" class="slds-path__link" href="javascript:void(0);" id="path-1" role="option" tabindex="-1">
                                                                                <span class="slds-path__stage">
                                                                                    <svg class="slds-icon slds-icon_x-small" aria-hidden="true">
                                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#check')}" />
                                                                                    </svg>
                                                                                    <span class="slds-assistive-text">Breadwinner Installed</span>
                                                                                </span>
                                                                                <span class="slds-path__title" style="font-weight: normal;font-size: medium;">Breadwinner Installed</span>
                                                                            </a>
                                                                        </li>
                                                                        <li style="display: {!if(OR(OR(orgStatus =='subscribed', isSandbox, isDeveloperEdition), orgStatus == 'expired'), '', 'none')}" class="slds-path__item {!If(AND(orgStatus =='expired', !isFreePlan),'slds-is-active','slds-is-complete')}" role="presentation" >                                                                            <a aria-selected="false" class="slds-path__link" href="javascript:void(0);" id="path-5" role="option" tabindex="-1">
                                                                            <span class="slds-path__stage">
                                                                                <svg class="slds-icon slds-icon_x-small" aria-hidden="true">
                                                                                    <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#check')}" />
                                                                                </svg>
                                                                                <span class="slds-assistive-text">Subscribed</span>
                                                                            </span>
                                                                            <span class="slds-path__title" style="font-weight: normal;font-size: medium;">{!If(orgStatus =='subscribed','Subscribed', if(isFreePlan, 'Free Plan', if(orgStatus =='expired', 'Trial / Subscription Expired' ,'In Trial')))}
                                                                            </span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="slds-path__item {!If(isConsumerDetailFilled, 'slds-is-complete', if(AND(orgStatus == 'expired', !isFreePlan),'slds-is-incomplete','slds-is-active'))}" role="presentation">
                                                                            <a aria-selected="false" class="slds-path__link" href="javascript:void(0);" id="path-2" role="option" tabindex="-1">
                                                                                <span class="slds-path__stage" id="xeropath">
                                                                                    <svg class="slds-icon slds-icon_x-small" aria-hidden="true">
                                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#check')}" />
                                                                                    </svg>
                                                                                    <span class="slds-assistive-text">Xero Connected</span>
                                                                                </span>
                                                                                <span class="slds-path__title" style="font-weight: normal;font-size: medium;">{!If(isConsumerDetailFilled, 'Xero Connected', 'Connect to Xero')}</span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="slds-path__item {!If(isConsumerDetailFilled, If(AND(NOT(unableToAddRemoteSiteSetting),isLayoutUpdated), 'slds-is-complete', 'slds-is-active'),'slds-is-incomplete')}" role="presentation" >
                                                                            <a aria-selected="false" class="slds-path__link" href="javascript:void(0);" id="path-3" role="option" tabindex="-1">
                                                                                <span class="slds-path__stage" id="layoutspath">
                                                                                    <svg class="slds-icon slds-icon_x-small" aria-hidden="true">
                                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#check')}" />
                                                                                    </svg>
                                                                                    <span class="slds-assistive-text">Layouts Updated</span>
                                                                                </span>
                                                                                <span class="slds-path__title" style="font-weight: normal;font-size: medium;">{!If(isConsumerDetailFilled, If(AND(NOT(unableToAddRemoteSiteSetting),isLayoutUpdated), 'Layouts Updated', 'Update Layouts'),'Update Layouts')}</span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="slds-path__item {!If(AND(isConsumerDetailFilled, isLayoutUpdated, AND(isAccountSyncDone, DoneAllContactsSyn)), 'slds-is-complete', If(AND(AND(NOT(unableToAddRemoteSiteSetting),isLayoutUpdated), isConsumerDetailFilled), 'slds-is-active' ,'slds-is-incomplete'))}" role="presentation" >
                                                                            <a aria-selected="false" class="slds-path__link" href="javascript:void(0);" id="path-4" role="option" tabindex="-1">
                                                                                <span class="slds-path__stage" id="contactMatchPath">
                                                                                    <svg class="slds-icon slds-icon_x-small" aria-hidden="true">
                                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#check')}" />
                                                                                    </svg>
                                                                                    <span class="slds-assistive-text">Contacts Matched</span>
                                                                                </span>
                                                                                <span class="slds-path__title" style="font-weight: normal;font-size: medium;">{!If(AND(isConsumerDetailFilled, isLayoutUpdated, AND(isAccountSyncDone, DoneAllContactsSyn)), 'Contacts Matched', If(AND(AND(NOT(unableToAddRemoteSiteSetting),isLayoutUpdated), isConsumerDetailFilled), 'Match Contacts' ,'Match Contacts'))}</span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="slds-path__item {!If(AND(isConsumerDetailFilled, AND(isAccountSyncDone, DoneAllContactsSyn), AND(NOT(unableToAddRemoteSiteSetting),isLayoutUpdated), (orgStatus =='subscribed' || isSandbox || isDeveloperEdition)),'slds-is-complete',If(AND(isConsumerDetailFilled, AND(isAccountSyncDone, DoneAllContactsSyn), isLayoutUpdated), 'slds-is-active', 'slds-is-incomplete'))} {!if(OR(OR(orgStatus =='subscribed', isSandbox, isDeveloperEdition), orgStatus =='expired'), 'slds-hide removeMeForSBDev', '')}" role="presentation" >
                                                                            <a aria-selected="false" class="slds-path__link" href="javascript:void(0);" id="path-5" role="option" tabindex="-1">
                                                                                <span class="slds-path__stage">
                                                                                    <svg class="slds-icon slds-icon_x-small" aria-hidden="true">
                                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#check')}" />
                                                                                    </svg>
                                                                                    <span class="slds-assistive-text">Subscribed</span>
                                                                                </span>
                                                                                <span class="slds-path__title" style="font-weight: normal;font-size: medium;">{!If(AND(isConsumerDetailFilled, AND(isAccountSyncDone, DoneAllContactsSyn), AND(NOT(unableToAddRemoteSiteSetting),isLayoutUpdated), (orgStatus =='subscribed' || isSandbox || isDeveloperEdition)),'Subscribed',If(AND(isConsumerDetailFilled, AND(isAccountSyncDone, DoneAllContactsSyn), isLayoutUpdated), 'Subscribe', 'Subscribe'))}</span>
                                                                            </a>
                                                                        </li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </apex:outputPanel>
                                            <!-- Setup Steps Arrow Path end -->
                                            
                                            <!-- ----------- Progress Bar End---------------- -->
                                            <!-------------------- Breadwinner Mode starts here ---------------->
                                            <div id="ModeImg" style="display:none;overflow:auto">
                                                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                                                    <div class="slds-modal__container" style="max-width:50%">
                                                        <header class="slds-modal__header">
                                                            <button class="slds-button slds-button_icon-inverse slds-modal__close" type="button" onclick="HideBreadwinnerMode();">
                                                                <svg aria-hidden="true" class="slds-button__icon slds-button__icon_large" >
                                                                    <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/action-sprite/svg/symbols.svg#close')}" ></use>
                                                                </svg>
                                                                <span class="slds-assistive-text">Close</span>
                                                            </button>
                                                            <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate slds-m-top_x-small"><b>Whats the difference between Read Only and Active Mode?</b></h2>
                                                        </header>
                                                        <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                                                            <p style="padding-bottom:2%" align="left">
                                                                In Read Only Mode, no matter what you do with Breadwinner, nothing will change in Xero. We will read from Xero and update back to Salesforce, but we will not edit, create, or delete anything in Xero.                                                       </p>
                                                            <table class="slds-table slds-table_bordered slds-table_col-bordered">
                                                                <thead class="slds-text-title_caps">
                                                                    <tr scope="col">
                                                                        <th></th>
                                                                        <th><b>Read Only Mode</b></th>
                                                                        <th><b>Active Mode</b></th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr>
                                                                        <td><b>Clicking New Invoice in Breadwinner</b></td>
                                                                        <td>No Invoice will be created in Xero.</td>
                                                                        <td>After confirming data to be created, Invoice created in Xero.</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td><b>Clicking Create New Xero Contact</b></td>
                                                                        <td>No Contact will be created in Xero.</td>
                                                                        <td>After confirming data, new Contact created in Xero.</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td><b>Clicking Edit Xero Contact</b></td>
                                                                        <td>The Xero Contact will not be edited.</td>
                                                                        <td>The Xero Contact will be edited.</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td><b>Clicking New Bill or New Purchase Orders</b></td>
                                                                        <td>No Bill or Purchase Order will be created in Xero.</td>
                                                                        <td>After confirming the data, a new Bill or new Purchase Order will be created in Xero.</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td><b>Adding or Editing an Invoice directly in Xero</b></td>
                                                                        <td colspan="2">That Invoice will be replicated over to Salesforce/Breadwinner within the hour.</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td><b>Adding a Xero Contact/Xero Customer directly in Xero.</b></td>
                                                                        <td colspan="2">We will attempt to match the new Xero Contact to a Salesforce Account, but if we cannot match one, we will create a Salesforce Account.</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td><b>Editing a Xero Contact/Xero Customer directly in Xero</b></td>
                                                                        <td colspan="2">We will update the Xero Contact record in Breadwinner within the hour, but no changes will be made to the Salesforce Account.</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                            <div>
                                                                <h1 align="center" class="slds-text-heading_medium" style="padding-top:1%;padding-bottom:1%">
                                                                    <b>Things Breadwinner will Never Do in Either Mode</b>
                                                                </h1>
                                                                <p align="left">
                                                                    <span class="slds-text-heading_small">Breadwinner, for financial security and data integrity, will never:</span><br/>
                                                                    Create or Edit Credit Memos<br/>
                                                                    Edit an existing Invoice, Bill, or PO once created.<br/>
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </section>
                                                <div class="slds-backdrop slds-backdrop_open"></div>
                                            </div>
                                            <apex:actionFunction name="EnableSafeMode" action="{!XeroReadModeSettings}" reRender="safemode" status="assign-action-statuss"/>
                                            <apex:outputPanel id="safemode">
                                                <table class="slds-table slds-table_bordered slds-max-medium-table_stacked slds-no-row-hover" cellpadding="0" cellspacing="0" border="0">
                                                    <tr>
                                                        <td style="width:36%">
                                                            <div Class="slds-text-heading_medium">
                                                                <apex:outputText value="Breadwinner is currently in {!if(XeroActiveMode,'Xero Active Mode','Xero Read Only Mode')}" styleClass="slds-text-heading_medium" style="font-weight:2"></apex:outputText>
                                                            </div>                                                        
                                                        </td>
                                                        <td style="width:11%"> 
                                                            <div class="Tabitha" float="left" >
                                                                <label class="slds-checkbox_toggle" id="Toggle">                                                            
                                                                    <apex:inputCheckbox id="XertoActiveM" value="{!XeroActiveMode}" onclick="EnableSafeMode();" disabled="{!OR(NOT(isBreadwinnerAdministrator), AND(orgStatus =='expired', !isFreePlan))}" />
                                                                    <span class="slds-checkbox_faux_container" aria-live="assertive" title="{!if(isBreadwinnerAdministrator,'','You should have Breadwinner Admin Permission set assigned to enable or disable it.')}">
                                                                        <span class="slds-checkbox_faux slds-align_absolute-center" > </span>
                                                                    </span>                                                            
                                                                </label>
                                                            </div>
                                                            <apex:actionStatus id="assign-action-statuss" layout="block">
                                                                <apex:facet name="start">
                                                                    <div class="slds-spinner_container">
                                                                        <div class="slds-spinner_brand slds-spinner slds-spinner_medium" role="alert">
                                                                            <span class="slds-assistive-text">Loading</span>
                                                                            <div class="slds-spinner__dot-a"></div>
                                                                            <div class="slds-spinner__dot-b"></div>
                                                                        </div>
                                                                    </div>
                                                                </apex:facet>
                                                            </apex:actionStatus>
                                                        </td>
                                                        <td>
                                                            <div class="slds-text-body_small">
                                                                <div class="slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-1 slds-m-bottom_xxx-small" >
                                                                    <a href="#" onclick="ShowBreadwinnerMode();" style="color:gray;">Explain the difference between Read Only and Active Modes</a>
                                                                </div>
                                                            </div> 
                                                        </td>
                                                    </tr> 
                                                </table>
                                                <!-------------------- Breadwinner Mode ends here ------------------>
                                                <!------------- Free Trail info Block starts here ------------- -->
                                                <table  class="slds-table slds-table_bordered slds-max-medium-table_stacked slds-no-row-hover" cellpadding="0" cellspacing="0" border="0"> 
                                                    <tr>
                                                        <td style="width:43%;border-top-color: white;">
                                                            <div class="slds-text-heading_medium">
                                                                <apex:outputPanel rendered="{!IF(AND(orgStatus =='subscribed',!isFreePlan), true, false)}">
                                                                    You have an active, valid subscription to Breadwinner
                                                                </apex:outputPanel>
                                                                <apex:outputPanel rendered="{!IF(AND(orgStatus =='trial',!isFreePlan), true, false)}">
                                                                    Your fully-featured free trial has been activated
                                                                </apex:outputPanel>
                                                                <apex:outputPanel rendered="{!IF(AND(orgStatus =='expired',!isFreePlan), true, false)}">
                                                                    Your Data Subscription to Breadwinner has Expired
                                                                </apex:outputPanel>
                                                                <apex:outputPanel rendered="{!isFreePlan}">
                                                                    You are on Breadwinner's Free Plan
                                                                </apex:outputPanel>
                                                            </div>
                                                            <apex:outputPanel rendered="{!IF(orgStatus =='expired', true, false)}" styleClass="slds-text-body_small" > 
                                                                Need an active Subscription? Please contact sales@breadwinner.com
                                                            </apex:outputPanel>
                                                        </td>
                                                        <td style="width: 4%;border-top-color: white;">
                                                            <div class="textDiv">
                                                                <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/green_check.png')}" rendered="{!IF(orgStatus =='subscribed' || orgStatus =='trial' || isFreePlan, true, false)}"/>
                                                                <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/red_check.png')}" rendered="{!IF(AND(orgStatus =='expired', !isFreePlan), true, false)}"/> 
                                                            </div>
                                                        </td>
                                                        <td style="border-top-color: white;">
                                                            <apex:outputPanel styleClass="slds-text-heading_medium" rendered="{!IF(orgStatus =='trial', true, false)}">
                                                                Your trial will expire in {!noOfDaysLeft} Days.
                                                            </apex:outputPanel>
                                                        </td>
                                                    </tr>
                                                    
                                                </table>
                                                
                                            </apex:outputPanel>
                                            <!------------- Free Trail info Block ends here --------------- -->
                                            
                                            <apex:outputPanel >
                                                <table class=" slds-table slds-table_bordered slds-max-medium-table_stacked slds-no-row-hover">
                                                    <tr>
                                                        <td style="width:43%;border-top-color: white;">
                                                            <apex:outputPanel layout="block" id="consumerHeaderPanelMO">
                                                                <div class="slds-text-heading_medium">
                                                                    Connect Breadwinner / Salesforce to Xero
                                                                </div> 
                                                                <apex:outputPanel layout="block" rendered="{!AND(isBreadwinnerAdministrator, NOT(isMultiOrgEnabled))}" styleClass="slds-text-body_small" >
                                                                    Need to connect more than one Xero org to Salesforce? Please&nbsp;
                                                                    <apex:outputLink onclick="OpenContactSupportTab();loadIframesfun('Contact_SupportPage','{!BW_SupportPortalURL}/support/tickets/new?{!contactSupportPrameters}');" value="javascript:void(0);" style="color:gray;">contact Breadwinner Sales</apex:outputLink>
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                        </td>
                                                        <td style="width:4%;border-top-color: white;"> 
                                                            <div >
                                                                <apex:outputPanel id="consumerDetailCheckIconPanelMO">
                                                                    <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/green_check.png')}" rendered="{!AND(!isOAuthIssue, isConsumerDetailFilled)}"/>                                            
                                                                    <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/yellow_check.png')}" rendered="{!AND(isOAuthIssue, isConsumerDetailFilled)}"/>  
                                                                    <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/red_check.png')}" rendered="{!!isConsumerDetailFilled}"/> 
                                                                </apex:outputPanel>
                                                            </div>
                                                        </td>
                                                        <td style="border-top-color: white;"> 
                                                            <div >
                                                                <apex:outputPanel id="consumerDetailLinkPanelMO">
                                                                    
                                                                    <apex:outputLink rendered="{!AND(isBreadwinnerAdministrator,NOT(isConsumerDetailFilled),OR(orgStatus != 'expired', isFreePlan))}" value="{!bwsettingWrapper.Endpoint_URL_Override}/api/xero/auth/{!$Organization.Id}?callbackurl={!URLENCODE(URLFOR($Page.Bread_Winner__CompleteAuth))}" ><!--value="{!publicAppConnectionURL}"-->
                                                                        <apex:image url="https://s3.amazonaws.com/bw-cdn/connect_xero_button_blue.png"/>
                                                                    </apex:outputLink>
                                                                    <apex:outputPanel layout="block" rendered="{!AND(OR(isConsumerDetailFilled,orgStatus == 'expired', isFreePlan), listAppConfig.size>0)}" styleclass="{!IF(isBreadwinnerAdministrator,'','slds-m-bottom_small')}">
                                                                        
                                                                        <apex:repeat value="{!appConfigMap}" var="appC">
                                                                            
                                                                            <div class="slds-text-heading_medium slds-m-top_small">
                                                                                {!appConfigMap[appC].Connecting_App_Name} is Connected
                                                                            </div>
                                                                            <apex:outputPanel rendered="{!AND(OR(isBreadwinnerAdministrator, canPerformBreadwinnerOperations), orgStatus != 'expired')}"><apex:outputLink id="previewiifrmXero" styleClass="slds-text-body_small" style="color:grey;" value="{!($Page.Bread_Winner__InventoryImportPage)}?id={!appConfigMap[appC].Xero_Org_ID}">Preview of Inventory import from Xero</apex:outputLink>&nbsp;&nbsp;</apex:outputPanel>
                                                                            <apex:outputPanel rendered="{!isBreadwinnerAdministrator}">
                                                                                <apex:variable value="BreadwinnerOptionalSettings?id={!appConfigMap[appC].Xero_Org_ID}" var="url2"/>
                                                                                <apex:outputLink rendered="{!OR(orgStatus != 'expired', isFreePlan)}" id="reconnct" styleClass="{!IF(appConfigMap[appC].Active, 'slds-text-heading_medium slds-text-color_error', 'slds-text-body_small')} " style="color:{!IF(appConfigMap[appC].Active, 'red', 'gray')}" value="{!bwsettingWrapper.Endpoint_URL_Override}/api/xero/auth/{!$Organization.Id}?callbackurl={!URLENCODE(URLFOR($Page.Bread_Winner__CompleteAuth))}">{!IF( AND(appConfigMap[appC].Active, isBreadwinnerAdministrator),"Please reconnect with Xero","Reconnect")}</apex:outputLink>
                                                                                &nbsp;
                                                                                <apex:commandlink id="DisconnectOrg" styleClass="slds-text-body_small" style="color:grey;" value="Disconnect" status="assign-action-status" onclick="showDiscModal();" rerender="nothing" > 
                                                                                    <apex:param name="xeroOrgToDisconnect" assignTo="{!xeroOrgToDisconnect}" value="{!appConfigMap[appC].Name}"/>
                                                                                </apex:commandlink>
                                                                                <br/>
                                                                            </apex:outputPanel>
                                                                        </apex:repeat>
                                                                        
                                                                        <apex:outputPanel layout="block" styleClass="slds-m-top_x-small" rendered="{!AND(!isFreePlan, orgStatus != 'expired', isMultiOrgEnabled, isBreadwinnerAdministrator)}">
                                                                            <apex:outputLink styleClass="slds-text-body_small" style="color:grey;" value="{!bwsettingWrapper.Endpoint_URL_Override}/api/xero/auth/{!$Organization.Id}?callbackurl={!URLENCODE(URLFOR($Page.Bread_Winner__CompleteAuth))}" >
                                                                                Add another Xero Org
                                                                            </apex:outputLink>
                                                                        </apex:outputPanel>
                                                                    </apex:outputPanel>
                                                                    
                                                                </apex:outputPanel>
                                                            </div>
                                                        </td>
                                                    </tr>              
                                                </table>
                                            </apex:outputPanel>
                                            
                                            <table  class=" slds-table slds-table_bordered slds-max-medium-table_stacked slds-no-row-hover" cellpadding="0" cellspacing="0" border="0">
                                                <tr>
                                                    <td style="width:43%;border:0;">  
                                                        <div class="slds-text-heading_medium">
                                                            Update Account and Opportunity Page Layouts
                                                        </div>
                                                    </td> 
                                                    <td style="width:4%;border:0;">
                                                        <div >
                                                            <apex:outputPanel id="pagelayoutCheck" >
                                                                <apex:outputPanel >
                                                                    <apex:image styleClass="crossIcon" value="{!IF(AND(isConsumerDetailFilled, isLayoutUpdated), URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/green_check.png') , URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/red_check.png') )}" height="32" width="32"/>
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </td>  
                                                    
                                                    
                                                    <td style="border:0;">
                                                        <apex:outputPanel id="pageLayoutHeadingPanel" >
                                                            <script>    
                                                                var isExceptionfound="{!foundException}";
                                                                function showLayoutEditsection(){
                                                                    document.getElementById("showlayoutTRId").style.display="";
                                                                }
                                                                function HideLayoutEditsection(){
                                                                    
                                                                    if(isExceptionfound=='false'){
                                                                        document.getElementById("showlayoutTRId").style.display="none";
                                                                    }
                                                                    else{
                                                                        document.getElementById("showlayoutTRId").style.display="";
                                                                    }
                                                                }
                                                            </script> 
                                                                
                                                            <apex:outputPanel rendered="{!unableToAddRemoteSiteSetting && NOT(isLayoutUpdated)}" >
                                                                <a  target="_blank" style="color:gray" href="{!BW_SupportPortalURL}/support/solutions/articles/44001664375">
                                                                    Read Instructions
                                                                </a>
                                                                on configuring your Page Layouts
                                                                <div class="slds-text-body_small">
                                                                    (we can&apos;t monitor this, so no green check will appear)
                                                                </div>
                                                            </apex:outputPanel>

                                                            <apex:outputPanel rendered="{!AND(listAppConfig.size>0,NOT(unableToAddRemoteSiteSetting),NOT(isLayoutUpdated),isAdministrator, !OldOrg, !foundException)}">
                                                                <apex:commandLink style="color:gray" action="{!selectedUserPermissionSetassignment}" status="assign-action-status" oncomplete="updatingPageLayouts();" reRender="noofAssignee,pmStatus">Update Page Layouts</apex:commandLink>
                                                            </apex:outputPanel>
                                                            
                                                        </apex:outputPanel>
                                                        <apex:actionFunction name="updatingPageLayouts" action="{!updatePageLayouts}" oncomplete="reRendercheckmarkSVGIcons();HideStyleSheet();message();" status="assign-action-status" rerender="pageLayoutUpdatePanel,V2pageLayoutUpdatePanel,progressPanel,infoPanel,pagelayoutCheck,pageLayoutHeadingPanel,pnl,pgmsgtag,V2Section,setupArrowPath"></apex:actionFunction>
                                                        <apex:actionFunction name="createRemoteSiteMetadata_af" action="createRemoteSiteMetadata();" oncomplete="createRemoteSiteMetadata2()"/>
                                                        <apex:actionFunction name="createRemoteSiteMetadata2" action="{!isMetaApiAccessible}" rerender="pageLayoutUpdatePanel,V2pageLayoutUpdatePanel,nothing"/>
                                                    
                                                        <apex:outputPanel id="V2Section">
                                                            
                                                            <apex:outputPanel layout="block"  id="V2Pagelayouts" rendered="{!AND(isAdministrator, OldOrg)}">
                                                                <apex:commandLink styleClass="slds-text-body_small" style="color:gray;" rendered="{!AND(NOT(isLayoutUpdated),!unableToAddRemoteSiteSetting)}" status="assign-action-status" onclick="createRemoteSiteMetadata();showLayoutEditsection();"  action="{!showV2layouts}" oncomplete="createRemoteSiteMetadata2();HideStyleSheet();message();">Update Breadwinner 2.0 Page Layouts</apex:commandLink>
                                                            </apex:outputPanel>
                                                            <apex:outputPanel styleClass="slds-text-body_small slds-text-color_weak" rendered="{!OR(AND(unableToAddRemoteSiteSetting,NOT(isLayoutUpdated)),foundException)}">
                                                                We are unable to monitor your Account or Opportunity Page Layouts.
                                                                <a  target="_blank" style="color:gray" href="{!BW_SupportPortalURL}/support/solutions/articles/44001664375">Read Instructions</a> on configuring your Page Layouts.<br/>
                                                                When you have configured your page layout, please click the toggle to mark them completed.
                                                                <div class="slds-clearfix">
                                                                    <div class="slds-form-element slds-float_left">
                                                                        <label class="slds-checkbox_toggle slds-grid">
                                                                            <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="PageLayoutsStatus1" onclick='Check_PageLayoutsStatus1(this);'/>
                                                                            <span id="toggle-desc" class="slds-checkbox_faux_container" aria-live="assertive">
                                                                                <span class="slds-checkbox_faux"></span>
                                                                                <span class="slds-checkbox_on">Enabled</span>
                                                                                <span class="slds-checkbox_off">Disabled</span>
                                                                            </span>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                            <apex:actionFunction name="SaveUpdatePagelayouts1" action="{!SaveUpdatePagelayouts}" rerender="pageLayoutHeadingPanel,pagelayoutCheck,V2Section,progressPanel,pgmsgtag,setupArrowPath" status="assign-action-status" oncomplete="reRendercheckmarkSVGIcons();HideStyleSheet();message();">            
                                                                <apex:param id="LayoutSyncValue3" name="AllowLayoutsync" value="" />        
                                                            </apex:actionFunction>
                                                        </apex:outputPanel>
                                                    </td> 
                                                    
                                                </tr>                                                
                                                <tr style="border:none;display:none;" id="showlayoutTRId" >
                                                    <td colspan="3" style="border:none;border-top:0px;" class="slds-text-color_weak">
                                                        <apex:outputPanel id="pageLayoutUpdatePanel" >
                                                            
                                                            <apex:outputPanel rendered="{!AND(isPageLayoutUpdateableSection,NOT(isLayoutUpdated))}">
                                                                
                                                                <div class="slds-box" >
                                                                    <apex:outputPanel rendered="{!!unableToAddRemoteSiteSetting}">
                                                                        <div class="slds-text-body_small slds-m-bottom_small">
                                                                            <apex:pageMessages id="pmsgs1" ></apex:pageMessages>
                                                                            
                                                                            We won't change, move, or remove any of your fields, we'll just add the Breadwinner fields. 
                                                                            You can still edit the page layouts further after we auto-update them, or manually undo or alter any changes.
                                                                        </div>
                                                                        
                                                                        <div class="slds-form-element">
                                                                            <div class="slds-form-element__control">
                                                                                <label class="slds-checkbox">
                                                                                    <apex:inputCheckbox id="UpdateApl" value="{!updateAccountPageLayouts}" /> 
                                                                                    <span class="slds-checkbox_faux"></span>
                                                                                    <span class="slds-form-element__label">
                                                                                        Update my Account Page Layout(s) with Breadwinner's Fields, Charts, and Invoice Related Lists
                                                                                    </span>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-form-element">
                                                                            <div class="slds-form-element__control">
                                                                                <label class="slds-checkbox">
                                                                                    <apex:inputCheckbox id="UpdateOpl" value="{!updateOpportunityPageLayouts}" /> 
                                                                                    <span class="slds-checkbox_faux"></span>
                                                                                    <span class="slds-form-element__label">
                                                                                        Update my Opportunity Page Layout(s) with Breadwinner's Invoice Related Lists
                                                                                    </span>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-m-top_medium" >
                                                                            <apex:commandButton value="Update Automatically" styleClass="slds-button slds-button_brand" action="{!updatePageLayouts}" disabled="{!NOT(isAdministrator)}"  status="assign-action-status" rerender="progressPanel,infoPanel,pagelayoutCheck,pageLayoutUpdatePanel,pageLayoutHeadingPanel,pnl" oncomplete="HideStyleSheet();message();"/>
                                                                            <apex:outputPanel styleClass="slds-text-body_small">
                                                                                Or, alternatively, update them yourself following &nbsp;  
                                                                                <a style="color:gray" href="{!BW_SupportPortalURL}/support/solutions/articles/44001664375" target="_blank">our suggested Page Layout guide</a>.
                                                                            </apex:outputPanel>
                                                                            
                                                                        </div>
                                                                    </apex:outputPanel>
                                                                    
                                                                    <apex:outputpanel id="pnl">
                                                                        <apex:outputPanel rendered="{!OR(foundException, !unableToAddRemoteSiteSetting) }">
                                                                            <br/><apex:outputPanel rendered="{!!unableToAddRemoteSiteSetting}" ><br/></apex:outputPanel>
                                                                            <apex:outputPanel rendered="{!unableToAddRemoteSiteSetting}" >
                                                                                <a  target="_blank" style="color:gray" href="{!BW_SupportPortalURL}/support/solutions/articles/44001664375">
                                                                                    Read Instructions
                                                                                </a>
                                                                                on configuring your Page Layouts
                                                                            </apex:outputPanel>
                                                                            
                                                                            <div class="slds-text-body_small">
                                                                                Please update your page layouts manually by following the Suggested Page Layout Guide. Once you have updated, click the toggle so you don't see this message again.
                                                                            </div>
                                                                            
                                                                            <apex:outputPanel layout="block" styleClass="slds-clearfix slds-m-top_small" rendered="{!OR(foundException,unableToAddRemoteSiteSetting) }">
                                                                                <div class="slds-form-element slds-float_left">
                                                                                    <label class="slds-checkbox_toggle slds-grid">
                                                                                        <span class="slds-form-element__label slds-m-bottom_none">I have updated my page layouts manually</span>
                                                                                        <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="PageLayoutsStatus" onclick='Check_PageLayoutsStatus(this);'/>
                                                                                        <span id="toggle-descd" class="slds-checkbox_faux_container" aria-live="assertive">
                                                                                            <span class="slds-checkbox_faux"></span>
                                                                                            <span class="slds-checkbox_on">Enabled</span>
                                                                                            <span class="slds-checkbox_off">Disabled</span>
                                                                                        </span>
                                                                                    </label>
                                                                                </div>
                                                                            </apex:outputPanel>
                                                                            
                                                                        </apex:outputPanel>
                                                                        <apex:actionFunction name="SaveUpdatePagelayouts" action="{!SaveUpdatePagelayouts}" rerender="progressPanel,infoPanel,pagelayoutCheck,pageLayoutUpdatePanel,pageLayoutHeadingPanel,pgmsgtag" oncomplete="HideStyleSheet();message();">     
                                                                            <apex:param id="LayoutSyncValue2" name="AllowLayoutsync" value="" />
                                                                        </apex:actionFunction>
                                                                    </apex:outputpanel>                   
                                                                </div>
                                                            </apex:outputPanel>
                                                            
                                                        </apex:outputPanel>
                                                        
                                                        
                                                        <apex:outputPanel id="V2pageLayoutUpdatePanel" >
                                                            <apex:outputPanel rendered="{!AND(ShowV2layoutSection ) }">
                                                                
                                                                <div class="slds-box">
                                                                    <apex:outputPanel rendered="{!!unableToAddRemoteSiteSetting}">
                                                                        <div class="slds-text-body_small slds-m-bottom_small">
                                                                            <apex:pageMessages id="pmsgs2" ></apex:pageMessages>
                                                                            
                                                                            We won't change, move, or remove any of your fields, we'll just add the Breadwinner fields. 
                                                                            You can still edit the page layouts further after we auto-update them, or manually undo or alter any changes.
                                                                        </div>
                                                                    </apex:outputPanel>
                                                                    <div class="slds-m-top_medium" >
                                                                        <apex:outputPanel rendered="{!!unableToAddRemoteSiteSetting}">
                                                                            <apex:commandButton value="Update 2.0 Layouts" styleClass="slds-button slds-button_brand" action="{!updateV2PageLayouts}" disabled="{!NOT(isAdministrator)}" reRender="V2pageLayoutUpdatePanel, V2Section, pagelayoutCheck" status="assign-action-status" oncomplete="HideStyleSheet();message();" />
                                                                            
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel rendered="{!OR(foundException, unableToAddRemoteSiteSetting)}">
                                                                            <br/><apex:outputPanel rendered="{!!unableToAddRemoteSiteSetting}" ><br/></apex:outputPanel>
                                                                            <apex:outputPanel rendered="{!unableToAddRemoteSiteSetting}" >
                                                                                <a  target="_blank" style="color:gray" href="{!BW_SupportPortalURL}/support/solutions/articles/44001664375">
                                                                                    Read Instructions
                                                                                </a>
                                                                                on configuring your Page Layouts
                                                                            </apex:outputPanel>
                                                                            <div class="slds-text-body_small">
                                                                                Please update your page layouts manually by following the Suggested Page Layout Guide for Breadwinner 2.0. Once you have updated, click the toggle so you don't see this message again.
                                                                            </div>
                                                                            
                                                                            <!------ adding for manual update ---->
                                                                            
                                                                            <apex:outputPanel layout="block" styleClass="slds-clearfix slds-m-top_small" rendered="{!OR(foundException, unableToAddRemoteSiteSetting)}">
                                                                                <div class="slds-form-element slds-float_left">
                                                                                    <label class="slds-checkbox_toggle slds-grid">
                                                                                        <span class="slds-form-element__label slds-m-bottom_none">I have updated my page layouts manually</span>
                                                                                        <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="PageLayoutsStatus" onclick='Check_PageLayoutsStatus(this);'/>
                                                                                        <span id="toggle-desc" class="slds-checkbox_faux_container" aria-live="assertive">
                                                                                            <span class="slds-checkbox_faux"></span>
                                                                                            <span class="slds-checkbox_on">Enabled</span>
                                                                                            <span class="slds-checkbox_off">Disabled</span>
                                                                                        </span>
                                                                                    </label>
                                                                                </div>
                                                                            </apex:outputPanel>
                                                                            
                                                                        </apex:outputPanel>
                                                                        <apex:actionFunction name="SaveUpdatePagelayouts" action="{!SaveUpdatePagelayouts}" rerender="SynView,V2pageLayoutUpdatePanel, V2Pagelayouts,pageLayoutHeadingPanel,pagelayoutCheck,V2Section,pageLayoutUpdatePanel, progressPanel" oncomplete="HideStyleSheet();message();">     
                                                                            <apex:param id="LayoutSyncValue" name="AllowLayoutsync" value="" />
                                                                        </apex:actionFunction>
                                                                        
                                                                    </div>
                                                                </div>  
                                                                
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td style="width:43%;">
                                                        <div class="slds-text-heading_medium" >
                                                            Assign Breadwinner Permission Sets                                                                  
                                                        </div>
                                                    </td>                                                       
                                                    <td style="width:4%;">
                                                        <apex:outputPanel id="pmStatus" styleclass="textDiv">
                                                            <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/green_check.png')}" rendered="{!AND(noofUsersNotAssigned==0, isConsumerDetailFilled)}" />                              
                                                            <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/red_check.png')}" rendered="{!OR(noofUsersNotAssigned==totalUsersCount,NOT(isConsumerDetailFilled))}"/>
                                                            <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/yellow_check.png')}" rendered="{!AND(noofUsersNotAssigned!=totalUsersCount,noofUsersNotAssigned!=null,noofUsersNotAssigned>0,isConsumerDetailFilled)}"/> 
                                                        </apex:outputPanel>
                                                    </td>
                                                    <td style="font-size:12px;">
                                                        <apex:outputPanel id="noofAssignee" rendered="{!IF(AND(isBreadwinnerAdministrator,isConsumerDetailFilled,noofUsersNotAssigned!=null,noofUsersNotAssigned>0),true,false)}" >
                                                            <div>
                                                                <div>
                                                                    <apex:commandLink action="{!assignPermissionSet}" style="color:grey;" status="assign-action-status">Give all users Standard Permissions to Breadwinner
                                                                        <apex:param name="permissionTypeParam" value="Standard" assignTo="{!permissionSetType}"/> 
                                                                    </apex:commandLink>
                                                                </div>
                                                                <div class="slds-m-top_xxx-small">
                                                                    <apex:commandLink action="{!assignPermissionSet}" style="color:grey;" status="assign-action-status">Give all users Read-Only Permissions to Breadwinner
                                                                        <apex:param name="permissionTypeParam" value="ReadOnly" assignTo="{!permissionSetType}"/> 
                                                                    </apex:commandLink>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>  
                                                        <div class="slds-text-heading_medium">
                                                            <apex:outputPanel >
                                                                Match Xero Contacts to Salesforce Accounts
                                                            </apex:outputPanel>
                                                        </div>
                                                    </td>
                                                    <td> 
                                                        <div>
                                                            <apex:outputPanel id="syncIcons">
                                                                <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/green_check.png')}" rendered="{!AND(isAccountSyncDone, DoneAllContactsSyn)}"/>
                                                                <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/yellow_check.png')}" rendered="{!AND(isAccountSyncDone, !DoneAllContactsSyn)}"/>
                                                                <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/red_check.png')}" rendered="{!!isAccountSyncDone}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </td>
                                                    <td > 
                                                        <div>
                                                            <apex:outputPanel id="MutliOrgAccountSyncView" rendered="{!AND(OR(isBreadwinnerAdministrator, canPerformBreadwinnerOperations),OR(orgStatus != 'expired', isFreePlan))}">   
                                                                <apex:variable var="count" value="{!1}" />  
                                                                <apex:repeat value="{!appConfigMap}" var="appC">    
                                                                    <!-- before completing the account or supper syncs : start -->  
                                                                    <apex:outputPanel layout="block" rendered="{!NOT(appConfigMap[appC].Is_Account_Sync_Completed)}" styleClass="slds-text-body_small" >    
                                                                        <apex:outputLink value="{!($Page.Bread_Winner__BreadwinnerAccountSync)}?xeroOrg={!URLENCODE(appConfigMap[appC].Name)}"  style="color:red;font-size: 15px;">Preview Account Match for Customers    
                                                                            <apex:outputPanel rendered="{!isMultiOrgEnabled}">&nbsp;for {!appConfigMap[appC].Connecting_App_Name}</apex:outputPanel>    
                                                                        </apex:outputLink>  
                                                                    </apex:outputPanel> 
                                                                    
                                                                    <apex:outputPanel layout="block" rendered="{!AND(!isFreePlan, NOT(appConfigMap[appC].Is_Supplier_Sync_Completed), appConfigMap[appC].Sync_Suppliers_Bills, isAccountsPayableEnabled)}" styleClass="slds-text-body_small" >  
                                                                        <apex:outputLink value="{!($Page.Bread_Winner__BreadwinnerAccountSync)}?xeroOrg={!URLENCODE(appConfigMap[appC].Name)}&supplier=true"  style="color:red;font-size: 15px;">Preview Account Match for Suppliers  
                                                                            <apex:outputPanel rendered="{!isMultiOrgEnabled}">&nbsp;for {!appConfigMap[appC].Connecting_App_Name}</apex:outputPanel>    
                                                                        </apex:outputLink>  
                                                                    </apex:outputPanel> 
                                                                    
                                                                    <apex:outputPanel layout="block" rendered="{!AND(!isFreePlan, NOT(appConfigMap[appC].Is_PO_Contact_Sync_Completed), appConfigMap[appC].Sync_POs, isAccountsPayableEnabled)}" styleClass="slds-text-body_small" >    
                                                                        <apex:outputLink value="{!($Page.Bread_Winner__BreadwinnerAccountSync)}?xeroOrg={!URLENCODE(appConfigMap[appC].Name)}&&purchaseorder=true"  style="color:red;font-size: 15px;">Preview Account Match for Xero Contacts with Purchase Orders   
                                                                            <apex:outputPanel rendered="{!isMultiOrgEnabled}">&nbsp;for {!appConfigMap[appC].Connecting_App_Name}</apex:outputPanel>    
                                                                        </apex:outputLink>  
                                                                    </apex:outputPanel> 
                                                                    <!-- before completing the account or supper syncs : end -->    
                                                                    
                                                                    <!-- After completing the Account Sync : start -->  
                                                                    <apex:outputPanel layout="block" rendered="{!AND(appConfigMap[appC].Is_Account_Sync_Completed, xeroOrgIdtoXeroCustomersSyncStatus[appConfigMap[appC].Name])}" styleClass="slds-text-body_small">    
                                                                        <apex:outputLink value="{!($Page.Bread_Winner__BreadwinnerAccountSync)}?xeroOrg={!URLENCODE(appConfigMap[appC].Name)}"  style="color:red;"> There are a few unmatched Xero Customers  
                                                                            <apex:outputPanel rendered="{!isMultiOrgEnabled}">&nbsp;for {!appConfigMap[appC].Connecting_App_Name}</apex:outputPanel>    
                                                                        </apex:outputLink>  
                                                                    </apex:outputPanel> 
                                                                    
                                                                    <apex:outputPanel layout="block" rendered="{!AND(!isFreePlan, OR(AND(appConfigMap[appC].Is_Supplier_Sync_Completed, appConfigMap[appC].Sync_Suppliers_Bills)), xeroOrgIdtoXeroSuppliersSyncStatus[appConfigMap[appC].Name], isAccountsPayableEnabled)}" styleClass="slds-text-body_small" > 
                                                                        <apex:outputLink value="{!($Page.Bread_Winner__BreadwinnerAccountSync)}?xeroOrg={!URLENCODE(appConfigMap[appC].Name)}&supplier=true"  style="color:red;">There are a few unmatched Xero Suppliers 
                                                                            <apex:outputPanel rendered="{!isMultiOrgEnabled}">&nbsp;for {!appConfigMap[appC].Connecting_App_Name}</apex:outputPanel>    
                                                                        </apex:outputLink>  
                                                                    </apex:outputPanel> 
                                                                    <apex:outputPanel layout="block" rendered="{!AND(!isFreePlan, OR(AND(appConfigMap[appC].Is_PO_Contact_Sync_Completed, appConfigMap[appC].Sync_POs)), xeroOrgIdtoXeroPOContactsSyncStatus[appConfigMap[appC].Name], isAccountsPayableEnabled)}" styleClass="slds-text-body_small" >  
                                                                        <apex:outputLink value="{!($Page.Bread_Winner__BreadwinnerAccountSync)}?xeroOrg={!URLENCODE(appConfigMap[appC].Name)}&PurchaseOrder=true"  style="color:red;">There are a few unmatched PO Contacts   
                                                                            <apex:outputPanel rendered="{!isMultiOrgEnabled}">&nbsp;for {!appConfigMap[appC].Connecting_App_Name}</apex:outputPanel>
                                                                        </apex:outputLink>
                                                                    </apex:outputPanel>
                                                                    <!-- After completing the Account Sync : end -->
                                                                    
                                                                    <div class="slds-m-top_xx-small"/>
                                                                    <apex:variable var="count" value="{!count+1}" />
                                                                </apex:repeat>
                                                            </apex:outputPanel>
                                                            
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>  
                                                        <div class="slds-text-heading_medium" >
                                                            Subscribe to Breadwinner
                                                        </div>
                                                    </td> 
                                                    <td>
                                                        <div class="textDiv" >
                                                            <apex:outputPanel rendered="{!NOT(OR(isSandbox, isDeveloperEdition))}">
                                                                <apex:image styleClass="crossIcon"   value="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/green_check.png')}" rendered="{!IF(orgStatus =='subscribed', true, false)}"/>
                                                                <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/yellow_check.png')}" rendered="{!IF(orgStatus =='trial', true, false)}"/>                              
                                                                <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/red_check.png')}" rendered="{!IF(orgStatus =='expired', true, false)}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </td>  
                                                    <td></td>     
                                                </tr>
                                                <tr >
                                                    <td style="border:none; margin-top:0px;" class="slds-text-body_small slds-text-color_weak" colspan="3">
                                                        
                                                        <apex:outputPanel rendered="{!IF(orgStatus =='subscribed', true, false)}">
                                                            Your subscription to Breadwinner is Active.
                                                        </apex:outputPanel>
                                                        <apex:outputPanel rendered="{!IF(orgStatus =='trial', true, false)}">
                                                            <apex:outputPanel rendered="{!AND(NOT(isSandbox), NOT(isDeveloperEdition))}">
                                                                To guarantee continued access, subscribe to Breadwinner before <br/>
                                                                your trial expires in {!noOfDaysLeft} days. We will email you with more information.
                                                                <br/>
                                                                Please contact your Account Executive.
                                                            </apex:outputPanel>
                                                            <apex:outputPanel rendered="{!isSandbox}">
                                                                This is running in a Sandbox. Because payment is tied to the instance where Breadwinner is installed, you can only pay for Breadwinner from a production org, not a Sandbox.<br/>
                                                                If this was a Salesforce Production org, you would be given the option to pay here.
                                                                <br/> <br/>
                                                                If you need to extend your free trial, which will expire in {!noOfDaysLeft} days, please click Contact Support to the left and file a case requesting a 2 week extension of your Sandbox trial.
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel rendered="{!isDeveloperEdition}">
                                                            You cannot subscribe on a Developer Org.<br/>
                                                            <apex:outputPanel rendered="{!isFreePlan}">
                                                                However, you are on Breadwinner's Free Plan, which contains a limited set of features.
                                                            </apex:outputPanel>
                                                            <apex:outputPanel rendered="{!!isFreePlan}">
                                                                However, you can request an extension of your free trial{!IF(orgStatus =='expired','',', which expires in '+Text(noOfDaysLeft)+' days,')}&nbsp;by&nbsp;<apex:outputLink onclick="OpenContactSupportTab();loadIframesfun('Contact_SupportPage','{!BW_SupportPortalURL}/support/tickets/new?{!contactSupportPrameters}');" value="javascript:void(0);" style="color:gray;">contacting Breadwinner Support</apex:outputLink>
                                                                <br/>Please mention that your Org ID is {!$Organization.Id}
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel rendered="{!AND(orgStatus =='expired', !isFreePlan)}">
                                                            <apex:outputPanel rendered="{!AND(NOT(isSandbox), NOT(isDeveloperEdition))}">
                                                                You don't have an active subscription to Breadwinner.<br/>
                                                                <br/>
                                                                Please contact your Account Executive.
                                                            </apex:outputPanel>
                                                            <apex:outputPanel rendered="{!isSandbox}">
                                                                This is a Sandbox Salesforce org, and you cannot pay for Breadwinner in a Sandbox, only in a Production Org.
                                                                <br/>
                                                                However, if you need to extend your free trial, please file a case using the Contact Support section on the left, requesting a trial extension, and please quote Org ID <b>{!$Organization.Id}</b>.
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel rendered="{!isFreePlan}">
                                                            <apex:outputPanel rendered="{!AND(NOT(isSandbox), NOT(isDeveloperEdition))}">
                                                                You are on Breadwinner's Free Plan, which contains a limited set of features.<br/>
                                                                <br/>
                                                                Please contact your Account Executive.
                                                            </apex:outputPanel>
                                                            <apex:outputPanel rendered="{!isSandbox}">
                                                                This is a Sandbox Salesforce org, and you cannot pay for Breadwinner in a Sandbox, only in a Production Org.
                                                                <br/>
                                                                However, you are on Breadwinner's Free Plan, which contains a limited set of features.
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </td>
                                                </tr>
                                            </table>
                                            
                                            <div class="slds-m-top_medium">
                                                
                                                <div class="slds-grid slds-wrap">
                                                    <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                        <apex:commandLink action="{!showEditSettingSection}" rendered="{!AND(!isFreePlan, isBreadwinnerAdministrator)}" status="assign-action-status" rerender="SettingSectionPanel" oncomplete="scrolltoBottom();">.
                                                        </apex:commandLink>
                                                        <apex:outputPanel layout="block" id="SettingSectionPanel">
                                                            <apex:outputPanel layout="block" styleClass="slds-box slds-float_left" rendered="{!isEditSettingSection}">
                                                                <div>
                                                                    <label class="slds-checkbox">
                                                                        <span class="slds-form-element__label">
                                                                            Multi-Org Enabled
                                                                        </span>
                                                                        <apex:inputCheckbox value="{!bwsettingWrapper.Multi_Org_Enabled}"/> 
                                                                        <span class="slds-checkbox_faux"></span>
                                                                    </label>
                                                                </div>
                                                                <div>
                                                                    <label id="MultiTenan1" class="slds-checkbox">
                                                                        <span class="slds-form-element__label">
                                                                            Multi-Tenant Enabled
                                                                        </span>
                                                                        <apex:inputCheckbox value="{!bwsettingWrapper.Multi_Tenant_Enabled}"/>
                                                                        <span class="slds-checkbox_faux"></span>
                                                                    </label>
                                                                </div>
                                                                <div class="slds-m-top_small">
                                                                    <apex:commandButton value="Save" styleClass="slds-button slds-button_brand" action="{!saveSettingSection}" status="assign-action-status" />
                                                                    
                                                                    <apex:commandButton value="Cancel" styleClass="slds-button slds-button_neutral" action="{!cancelSettingSection}"  status="assign-action-status"/>
                                                                </div>
                                                            </apex:outputPanel>
                                                            
                                                        </apex:outputPanel>
                                                        
                                                        <apex:commandLink action="{!showOldOrgSettingSection}" rendered="{!isBreadwinnerAdministrator}" status="assign-action-status" rerender="oldOrgSettingPanel" style="text-decoration: none;color: lightgray;">.
                                                        </apex:commandLink>
                                                        
                                                        <apex:outputPanel layout="block" id="oldOrgSettingPanel"> 
                                                            <apex:outputPanel layout="block" styleClass="slds-box slds-float_left" rendered="{!ShowoldOrgSettingPanel}" >
                                                                <div>
                                                                    <label class="slds-checkbox">
                                                                        <span class="slds-form-element__label">
                                                                            BW installed on before 08/11/2016?
                                                                        </span>
                                                                        <apex:inputcheckbox id="Oldone" value="{!OldOrg}" /> 
                                                                        <span class="slds-checkbox_faux"></span>
                                                                    </label>
                                                                </div>
                                                                <div class="slds-m-top_small">
                                                                    <apex:commandButton value="Save" styleClass="slds-button slds-button_brand" action="{!makeOldOrgAsTrue}" status="assign-action-status"/>
                                                                    
                                                                    <apex:commandButton value="Cancel" styleClass="slds-button slds-button_neutral" action="{!cancelSettingSection}"  status="assign-action-status"/>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </apex:outputPanel> 
                                                    </div>
                                                    <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12" align="right">
                                                        <apex:commandLink value="Connection to Xero Options" rendered="{!NOT(isConsumerDetailFilled)}" action="{!showPopup}" style="font-size:12px;color:grey;" status="assign-action-status" reRender="tstpopup"/>
                                                        &nbsp;
                                                        <apex:commandLink action="{!showEndpointUrlEditor}" rendered="{!NOT(isConsumerDetailFilled)}" style="color:gray" status="assign-action-status" rerender="SettingURL">.
                                                        </apex:commandLink>
                                                        
                                                        <apex:outputPanel id="SettingURL">
                                                            <apex:outputPanel layout="block" styleClass="slds-box slds-float_right" rendered="{!showEndpointURLSetting}">
                                                                <div class="slds-form-element">
                                                                    <label class="slds-form-element__label" >Endpoint URL Override</label>
                                                                    <div class="slds-form-element__control">
                                                                        <div class="slds-select_container">
                                                                            <apex:selectList value="{!bwsettingWrapper.Endpoint_URL_Override}" size="1" styleClass="slds-select">
                                                                                <apex:selectOptions value="{!AvailableEndpointURLs}">
                                                                                </apex:selectOptions>
                                                                            </apex:selectList>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="slds-m-top_small">
                                                                    <apex:commandButton value="Save & Create Remotesite" styleClass="slds-button slds-button_brand" action="{!saveAndCreateRemoteSite}" status="assign-action-status" rendered="{!unableToAddRemoteSiteSetting}"/>
                                                                    <apex:commandButton value="Save" styleClass="slds-button slds-button_brand" action="{!updateEndpointUrlOverride}" status="assign-action-status"/>
                                                                    <apex:commandButton value="Cancel" styleClass="slds-button slds-button_neutral" action="{!hideEndpointUrlEditor}" reRender="SettingURL" status="assign-action-status"/>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>
                                                
                                            </div>
                                        </div>
                                    </div>
                                    <div id="SetupAndConfig-TAB2" class="slds-hide" aria-labelledby="InvoiceContent">                                        
                                        <div class="slds-page-header slds-m-bottom_medium" role="banner">
                                            <div class="slds-media slds-media_center">
                                                <div class="slds-media__figure">
                                                    <svg aria-hidden="true" class="slds-icon slds-icon-standard-opportunity">
                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/standard-sprite/svg/symbols.svg#custom')}"></use>
                                                    </svg>
                                                </div>
                                                <div class="slds-media__body">
                                                    <p class="slds-page-header__title slds-truncate slds-align-middle" title="Invoice Configuration">Invoice Configuration</p>
                                                    <p class="slds-text-body_small slds-line-height_reset">Breadwinner  Xero </p>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- ------------------------------------ Header Ends ----------------------------------- -->
                                        <!-- ----------------------------------- fields level help ----------------------------------- -->
                                        <div id="InvoiceConfighelp" class="slds-popover slds-popover_tooltip slds-nubbin_bottom-left" role="tooltip" aria-live="polite" style="display:none;position:absolute;top:0px;left:0px;">
                                            <div class="slds-popover__body slds-text-longform">
                                                <p>Help text will come here dynamically</p>
                                            </div>
                                        </div>
                                        <!-- ----------------------------------- fields level help End ------------------------------- -->
                                       <apex:actionFunction name="update_additional_custom_buttons" action="{!updateAdditionalButtons}" reRender="CustomButtonsSection,CustomButtonsSection1" oncomplete="select2Init();"/>
                                        
                                        <apex:outputPanel layout="block" id="InvoiceConfigSection">
                                            <!-- -------------------------------------Tabs section Start----------------------------------- -->   
                                            <apex:outputPanel rendered="{!AND(isMultiOrgEnabled,showInvoiceConfigSection,isBasicOrHigher,NOT(isFreePlan)) }">
                                                <div class="slds-tabs_default slds-m-bottom_medium">
                                                    <ul class="slds-tabs_default__nav" role="tablist">
                                                        <li class="slds-tabs_default__item slds-text-title_caps slds-is-active slds-truncate" title="Breadwinner Wide Settings" role="presentation">
                                                            <a class="slds-tabs_default__link"  role="tab" onclick="InvoiceConfigSelectTab(this,'');" tabindex="0" aria-selected="true" aria-controls="tab-default-1" id="tab-default-1__item">
                                                                Breadwinner Wide Settings
                                                            </a>
                                                        </li>
                                                        
                                                        <apex:repeat value="{!appConfigMap}" var="appC">
                                                            <li class="slds-tabs_default__item slds-text-title_caps slds-truncate" title="{!appConfigMap[appC].Connecting_App_Name}" role="presentation">
                                                                <a class="slds-tabs_default__link" href="javascript:void(0);" role="tab" onclick="InvoiceConfigSelectTab(this,'{!appConfigMap[appC].Xero_Org_ID}');" tabindex="0" aria-selected="true" aria-controls="{!appConfigMap[appC].Xero_Org_ID}" id="{!appConfigMap[appC].Xero_Org_ID}__item">
                                                                    {!appConfigMap[appC].Connecting_App_Name}
                                                                </a>
                                                            </li>
                                                        </apex:repeat>
                                                        
                                                    </ul>
                                                </div>
                                            </apex:outputPanel>
                                            
                                            <apex:outputPanel rendered="{!AND(isMultiOrgEnabled,showInvoiceConfigSection,!isBasicOrHigher,isMultiorgsConnected) }">
                                                <div class="slds-tabs_default slds-m-bottom_medium">
                                                    <ul class="slds-tabs_default__nav" role="tablist">
                                                        <apex:variable var="Index" value="{!1}">
                                                            <apex:repeat value="{!appConfigMap}" var="appC">
                                                                <li class="slds-tabs_default__item slds-text-title_caps slds-truncate {!IF(Index==1,'slds-is-active','')}" title="{!appConfigMap[appC].Connecting_App_Name}" role="presentation">
                                                                    <a class="slds-tabs_default__link" href="javascript:void(0);" role="tab" onclick="InvoiceConfigSelectTab(this,'{!appConfigMap[appC].Xero_Org_ID}');" tabindex="0" aria-selected="true" aria-controls="{!appConfigMap[appC].Xero_Org_ID}" id="{!appConfigMap[appC].Xero_Org_ID}__item">
                                                                        {!appConfigMap[appC].Connecting_App_Name}
                                                                    </a>
                                                                </li>
                                                                <apex:variable var="Index" value="{!Index+1}"/>
                                                            </apex:repeat>
                                                        </apex:variable>
                                                    </ul>
                                                </div>
                                            </apex:outputPanel>
                                            
                                            <apex:outputPanel layout="block" styleClass="slds-m-horizontal_small">
                                                <apex:pagemessages id="pgmsg"/>
                                            </apex:outputPanel>

                                            <apex:actionFunction name="passXeroOrgId" action="{!refreshXeroOrgInfo}" status="assign-action-status"  reRender="pgmsg,InvoiceConfigContent" oncomplete="HideStyleSheet();message();select2Init();reRenderRightSVGIcon();addLinkDynamically();" >
                                                <apex:param name="PassXeroOrgIdParam" value="" assignTo="{!xeroOrgId}"/>
                                            </apex:actionFunction>
                                        
                                        
                                            <!-- -------------------------------------Tabs section End------------------------------------- -->
                                        
                                            <apex:outputPanel layout="block" id="InvoiceConfigContent">
                                                <apex:outputPanel layout="block" styleClass="slds-m-horizontal_small" rendered="{!AND(isFreePlan,showInvoiceConfigSection)}">
                                                    <div class="slds-section-title_divider slds-m-top_medium">Allow Invoices to be created as Draft/Approved</div>
                                                    <div class="slds-m-left_small">
                                                        <div class="slds-text-body_small slds-m-top_x-small">
                                                            <p>At least one or more of the two checkboxes must be checked. This will allow Breadwinner users to create Invoices as Draft or Authorized</p>
                                                        </div>
                                                        
                                                        <div class="slds-form-element__control slds-m-top_x-small">
                                                            <span class="slds-checkbox">
                                                                <label class="slds-checkbox__label" >
                                                                    <apex:inputCheckbox value="{!apC.Create_Button_Draft}" id="createDraftInvoice_freemium"/>
                                                                    <span class="slds-checkbox_faux"></span>
                                                                    <span class="slds-form-element__label slds-m-left_small">Show "Create Draft Invoice in Xero" Button</span>
                                                                </label>
                                                            </span>
                                                            <span class="slds-checkbox">
                                                                <label class="slds-checkbox__label" >
                                                                    <apex:inputCheckbox value="{!apC.Create_Button_Authorised}" id="createAuthorisedInvoice_freemium"/>
                                                                    <span class="slds-checkbox_faux"></span>
                                                                    <span class="slds-form-element__label slds-m-left_small">Show "Create Approved Invoice in Xero" Button</span>
                                                                </label>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" rendered="{!AND(NOT(isFreePlan),showInvoiceConfigSection)}">
                                                    <!-- -----------------------------Xero Org wide Settings Start -------------------------------------- -->
                                                    <apex:outputPanel layout="block"  styleClass="slds-m-around_small" rendered="{!OR(AND(isMultiOrgEnabled,xeroOrgId!=null),AND(NOT(isMultiOrgEnabled),xeroOrgId!=null))}" >
                                                        <apex:outputPanel layout="block" rendered="{!NOT(isMultiOrgEnabled)}">
                                                            <!-- ----------------- LDS Video Section ----------------- -->
                                                            <div class="slds-trial-header slds-grid slds-wrap slds-m-bottom_medium" style="align-items:inherit;border-radius: 5px;">
                                                                <div class="slds-grid slds-grid_vertical-align-center">
                                                                    <span class="wistia_embed wistia_async_yto9j319gw popover=true popoverContent=link" style="display:inline;">
                                                                        <a href="#" style="font-size: large; text-decoration:none;" class="rightSVGIcon">
                                                                            <svg class="slds-icon slds-float_left" style="float:left" aria-hidden="true">
                                                                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#right')}"/>
                                                                            </svg>
                                                                            Watch a video walk through, showing how to configure this page.
                                                                        </a>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                            <!-- ---------------- LDS Video Section End --------------- -->
                                                        </apex:outputPanel>
                                                        <apex:outputPanel layout="block" rendered="{!isMultiOrgEnabled }">
                                                            <h3 class="slds-section-title_divider slds-m-top_medium">{!apC.Connecting_App_Name} Settings</h3>
                                                            
                                                            <legend class="slds-text-heading_small slds-m-top_small slds-m-left_small">Display Common Name instead of Legal Name (Optional)</legend>
                                                            <div class="slds-m-left_small">
                                                                <div class="slds-text-body_small slds-m-top_x-small">
                                                                    <p>You might have used your company's legal name in Xero, but want it displayed to your staff as a different name.</p>
                                                                    <p>Perhaps as the Trading Name, or perhaps without Ltd, or Pty, etc.</p>
                                                                </div>
                                                                <div class="slds-form-element slds-m-top_x-small">
                                                                    <label class="slds-form-element__label" >Display Name for Xero Org</label>
                                                                    <div class="slds-form-element__control">
                                                                        <apex:inputText value="{!apC.Display_Name}" styleClass="slds-input slds-size_1-of-1 slds-medium-size_2-of-6 slds-large-size_3-of-12"  id="displayName"></apex:inputText>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            
                                                            <legend class="slds-text-heading_small slds-m-top_medium slds-m-left_small">Logo or Image associated with Xero Org (Optional)</legend>
                                                            <div class="slds-m-left_small">
                                                                <div class="slds-text-body_small slds-m-top_x-small">
                                                                    <p>To minimize staff confusion, you can show an image or logo next to the Xero Org Name. You must host this image yourself (perhaps on your website), and it will be resized to 40 pixels high (for the sharpest image and fastest load times, resize it yourself to 40 px high). You can use jpg, png or gif files.</p>
                                                                    <p>Please use the format https://mywebsite.com/myimage.jpg or similar. We recommend https, though http works fine.</p> 
                                                                </div>
                                                                <div class="slds-form-element slds-m-top_x-small">
                                                                    <label class="slds-form-element__label" >URL of Image</label>
                                                                    <div class="slds-form-element__control">
                                                                        <apex:inputText value="{!apC.Logo_URL}" styleClass="slds-input slds-size_1-of-1 slds-medium-size_2-of-6 slds-large-size_3-of-12" id="logoURL"></apex:inputText>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>                          
                                                        <div class="slds-section-title_divider slds-m-top_medium">Allow Invoices to be created as Draft/Approved</div>
                                                        <div class="slds-m-left_small">
                                                            <div class="slds-text-body_small slds-m-top_x-small">
                                                                <p>At least one or more of the two checkboxes must be checked. This will allow Breadwinner users to create Invoices as Draft or Authorized</p>
                                                            </div>
                                                            
                                                            <div class="slds-form-element__control slds-m-top_x-small">
                                                                <span class="slds-checkbox">
                                                                    <label class="slds-checkbox__label" >
                                                                        <apex:inputCheckbox value="{!apC.Create_Button_Draft}" id="createDraftInvoice"/>
                                                                        <span class="slds-checkbox_faux"></span>
                                                                        <span class="slds-form-element__label slds-m-left_small">Show "Create Draft Invoice in Xero" Button</span>
                                                                    </label>
                                                                </span>
                                                                <span class="slds-checkbox">
                                                                    <label class="slds-checkbox__label" >
                                                                        <apex:inputCheckbox value="{!apC.Create_Button_Authorised}" id="createAuthorisedInvoice"/>
                                                                        <span class="slds-checkbox_faux"></span>
                                                                        <span class="slds-form-element__label slds-m-left_small">Show "Create Approved Invoice in Xero" Button</span>
                                                                    </label>
                                                                </span>
                                                            </div>
                                                        </div>                                                        
                                                        <div class="slds-section-title_divider slds-m-top_medium">Default Due Date and Accounting Code</div>
                                                        <div class="slds-m-left_small slds-m-top_small">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" >Invoice Default Due Date
                                                                    <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                        <a href="javascript:void(0);">
                                                                            <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Default Due Date will only apply for Contacts which do not have a Default Due Date specified on their contact record in Xero. If a Contact has its Default Due Date for Sales Invoices specified in Xero, then that value will override the value below.','117','18')" onmouseout="mouseoutclose();" />
                                                                            <span class="slds-assistive-text">Help</span>
                                                                        </a>
                                                                    </apex:outputPanel>
                                                                </label>
                                                                <div class="slds-form-element__control slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                    <div class="slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_7-of-12 slds-grid">
                                                                        <apex:inputText id="defaultDueDays" value="{!defaultDueDateDays}" styleClass="slds-input slds-size_1-of-6" style=" padding-left: 0.3rem; padding-right: 0.1rem; " />
                                                                        <div class="slds-select_container slds-size_5-of-6" style="padding-right: 12px;">
                                                                            <apex:selectList size="1" value="{!apC.Default_Due_Date_Days_Option}" styleClass="slds-m-left_small slds-select" id="defaultDueDaysOptions">
                                                                                <apex:selectOptions value="{!defaultDueDaysOptions}"/>
                                                                            </apex:selectList>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            
                                                            <apex:outputPanel layout="block" styleclass="slds-form-element slds-m-top_medium slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12" rendered="{!if(isBasicOrHigher, true, false)}">
                                                                <label class="slds-form-element__label" >Default Xero Accounting Tax Type</label>
                                                                <div class="slds-form-element__control">
                                                                    <div class="slds-select_container slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_8-of-16">
                                                                        <apex:selectList size="1" value="{!apC.Default_Xero_Tax_Type}" styleClass="slds-select" id="defaultXeroTaxOptions1">
                                                                            <apex:selectOptions value="{!defaultXeroTaxOptions}"/>
                                                                        </apex:selectList>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                            
                                                            <div class="slds-form-element slds-m-top_medium">
                                                                <label class="slds-form-element__label" >Default Xero Accounting Code (Revenue Code)
                                                                    <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                        <a href="javascript:void(0);">
                                                                            <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Default Tax Rate is set in Xero for each Accounting Code in Chart of Accounts','62','18')" onmouseout="mouseoutclose();" />
                                                                            <span class="slds-assistive-text">Help</span>
                                                                        </a>
                                                                    </apex:outputPanel>
                                                                </label>
                                                                <div class="slds-form-element__control slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                    <div class="slds-select_container slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                        <apex:selectList size="1" value="{!apC.Default_Xero_Accounting_Code}" styleClass="slds-select" id="InvoiceAccountCodes">
                                                                            <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                            <apex:selectOptions value="{!defaultXeroAccountingAROptions}"/>
                                                                        </apex:selectList>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            
                                                            <!-- ------------------------ SF Accounts Record Type Section ------------------------------- -->
                                                            <apex:outputPanel layout="block" styleClass="slds-form-element slds-m-top_medium" rendered="{!areRecordTypesEnabled}">
                                                                <label class="slds-form-element__label" >Breadwinner should create Salesforce Accounts as Record Type:
                                                                    <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                        <a href="javascript:void(0);">
                                                                            <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'If Breadwinner discovers a new Xero Contact and thus creates a new Salesforce Account based on this Xero Contact, we can create that new Salesforce Account as any one of your record types. Select a record type here, otherwise we will use the Primary Record Type when creating a new Salesforce Account.','135','20')" onmouseout="mouseoutclose();" />
                                                                            <span class="slds-assistive-text">Help</span>
                                                                        </a>
                                                                    </apex:outputPanel>
                                                                </label>
                                                                <div class="slds-form-element__control slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                    <div class="slds-select_container slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                        <apex:selectList id="recordTypesAvailable" size="1" value="{!apC.Default_Account_RecordType}" styleClass="slds-select">
                                                                            <apex:selectOption itemLabel="--Use Primary Record Type--" itemValue=""></apex:selectOption> 
                                                                            <apex:selectOptions value="{!recordTypesAvailable}"/>
                                                                        </apex:selectList>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                            <!-- ------------------------ SF Accounts Record Type Section Ends -------------------------- -->
                                                        </div>
                                                        
                                                        <!-- -------------------------------- Advanced Settings ----------------------------------------- -->
                                                        <div class="slds-section" id="DeleteRecDivId" >
                                                            <h3 class="slds-section-title_divider slds-m-top_medium" style="padding: 0.19rem;">
                                                                <button class="slds-button slds-section__title-action"  type="button" onclick="showHideSectionConent('DeleteRecDivId','DeleteRecDivIdImage');" style="letter-spacing: .0625rem;text-transform: initial;">
                                                                    <img id="DeleteRecDivIdImage" src="{!URLFOR($Resource.Breadwinner_Xero, 'Breadwinner_Xero/Images/SectionClose.png')}" style="margin-bottom: 3px;margin-right: 4px;" />
                                                                    <span style="text-transform: uppercase;">Advanced Settings</span>
                                                                </button>
                                                            </h3>
                                                            <div class="slds-section__content slds-m-left_small">
                                                                <div class="slds-section__title">Liabilities</div>
                                                                <div class="slds-form-element slds-m-left_small slds-m-top_small ">
                                                                    <span class="slds-checkbox">
                                                                        <label class="slds-checkbox__label" >
                                                                            <apex:inputCheckbox value="{!apC.Display_Liabilities}" id="displayLiabilities"/>
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span class="slds-form-element__label slds-m-right_small">Display Liabilities on New Invoice creation Page as well as Revenue Accounts</span>
                                                                        </label>
                                                                    </span>
                                                                </div>
                                                                <div class="slds-section__title slds-m-top_medium">Assets</div>
                                                                <div class="slds-form-element slds-m-left_small slds-m-top_small ">
                                                                    <span class="slds-checkbox">
                                                                        <label class="slds-checkbox__label" >
                                                                            <apex:inputCheckbox value="{!apC.Display_Asset_Accounts_AR}" id="displayAssets"/>
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span class="slds-form-element__label slds-m-right_small">Display Assets on New Invoice creation Page as well as Revenue Accounts</span>
                                                                        </label>
                                                                    </span>
                                                                </div>
                                                                <apex:outputPanel rendered="{!isBusinessOrHigher}">
                                                                    <div class="slds-section__title slds-m-top_medium">Expenses</div>
                                                                    <div class="slds-form-element slds-m-left_small slds-m-top_small ">
                                                                        <span class="slds-checkbox">
                                                                            <label class="slds-checkbox__label" >
                                                                                <apex:inputCheckbox value="{!apC.Display_Expense_Accounts_AR}" id="displayExpenses"/>
                                                                                <span class="slds-checkbox_faux"></span>
                                                                                <span class="slds-form-element__label slds-m-right_small">Display Expenses on New Invoice creation Page as well as Revenue Accounts</span>
                                                                            </label>
                                                                        </span>
                                                                    </div>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" rendered="{!isProfessionalOrHigher}">
                                                                    <div class="slds-section__title slds-m-top_medium">Invoice Auto-Matching to Opportunity</div>
                                                                    <div class="slds-m-left_small slds-m-top_small">
                                                                        
                                                                        <div class="slds-form-element">
                                                                            <span class="slds-checkbox">
                                                                                <label class="slds-checkbox__label" >
                                                                                    <apex:inputCheckbox value="{!apC.Invoice_Opportunity_Auto_Match}" id="singleOppAutoMatch"/>
                                                                                    <span class="slds-checkbox_faux"></span>
                                                                                    <span class="slds-form-element__label slds-m-right_small">Auto Match newly discovered Invoices to an Opportunity if a Salesforce Account only has one Opportunity on it</span>
                                                                                </label>
                                                                            </span>
                                                                        </div>
                                                                        
                                                                        <div class="slds-form-element slds-m-top_medium">
                                                                            <label class="slds-form-element__label" >Whenever a new Invoice, Bill, or Purchase Order is discovered in Xero, Breadwinner will auto-match it to any Opportunity, as long as the Xero Invoice/Bill/PO Reference field matches the Salesforce custom field specified here. When we attempt to match, we will first try to find a match on Opportunities related to the Salesforce Account associated with the Xero Contact, and then we will look for a match on all Opportunities, even under different Salesforce Accounts.
                                                                                <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                                    <a href="javascript:void(0);">
                                                                                        <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'If Invoice Reference and the below field contain identical values (case sensitive), then we will match the Invoice to that Opportunity.','80','18')" onmouseout="mouseoutclose();" />
                                                                                        <span class="slds-assistive-text">Help</span>
                                                                                    </a>
                                                                                </apex:outputPanel>
                                                                            </label>
                                                                            <div class="slds-form-element__control slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                                <div class="slds-select_container slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                                    <apex:selectList id="oppFieldsForInvoiceMapping" size="1" value="{!apC.Invoice_Mapping_Opportunity_Field_Name}" styleClass="slds-select">
                                                                                        <apex:selectOption itemValue="" itemLabel="--None--" /> 
                                                                                        <apex:selectOptions value="{!InvMappingOptyFields}"/>
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-form-element slds-m-top_medium">
                                                                            <label class="slds-form-element__label" >Consider the text before the first occurrence of this delimiter in the Reference field during Auto Match to an Invoice:</label>
                                                                            <div class="slds-form-element__control slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                                <div class="slds-select_container slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                                    <apex:selectList id="specialCharacters" size="1" value="{!apC.Special_Character_to_Auto_Match_Invoice}" styleClass="slds-select">
                                                                                        <apex:selectOption itemValue="" itemLabel="--None--" /> 
                                                                                        <apex:selectOptions value="{!defaultSpecialCharacterOptions}"/>
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                    </div>
                                                                </apex:outputPanel>

                                                                <apex:outputPanel layout="block" rendered="{!AND(isBusinessOrHigher, isOrderEnabled, HasOrderLookup)}" id="invoiceAutoMappingToOrderSection">
                                                                    <div class="slds-section__title slds-m-top_medium">Invoice Auto-Matching to Order</div>
                                                                    <div class="slds-m-left_small slds-m-top_small">
                                                                        
                                                                        <div class="slds-form-element">
                                                                            <span class="slds-checkbox">
                                                                                <label class="slds-checkbox__label" >
                                                                                    <apex:inputCheckbox value="{!apC.Invoice_Order_Auto_Match}" id="singleOrderAutoMatch"/>
                                                                                    <span class="slds-checkbox_faux"></span>
                                                                                    <span class="slds-form-element__label slds-m-right_small">Auto Match newly discovered Invoices to an Order if a Salesforce Account only has one Order on it</span>
                                                                                </label>
                                                                            </span>
                                                                        </div>
                                                                        
                                                                        <div class="slds-form-element slds-m-top_medium">
                                                                            <label class="slds-form-element__label" >Whenever a new Invoice, Bill, or Purchase Order is discovered in Xero, Breadwinner will auto-match it to any Order, as long as the Xero Invoice/Bill/PO Reference field matches the Salesforce custom field specified here. When we attempt to match, we will first try to find a match on Orders related to the Salesforce Account associated with the Xero Contact, and then we will look for a match on all Orders, even under different Salesforce Accounts.
                                                                                <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                                    <a href="javascript:void(0);">
                                                                                        <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'If Invoice Reference and the below field contain identical values (case sensitive), then we will match the Invoice to that Order.','80','18')" onmouseout="mouseoutclose();" />
                                                                                        <span class="slds-assistive-text">Help</span>
                                                                                    </a>
                                                                                </apex:outputPanel>
                                                                            </label>
                                                                            <div class="slds-form-element__control slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                                <div class="slds-select_container slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                                    <apex:selectList id="orderFieldsForInvoiceMapping" size="1" value="{!apC.Invoice_Mapping_Order_Field_Name}" styleClass="slds-select">
                                                                                        <apex:selectOption itemValue="" itemLabel="--None--" /> 
                                                                                        <apex:selectOptions value="{!InvMappingOrderFields}"/>
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-form-element slds-m-top_medium">
                                                                            <label class="slds-form-element__label" >Consider the text before the first occurrence of this delimiter in the Reference field during Auto Match to an Invoice:</label>
                                                                            <div class="slds-form-element__control slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                                <div class="slds-select_container slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                                    <apex:selectList id="specialCharactersForOrder" size="1" value="{!apC.Special_Character_to_Auto_Match_to_Order}" styleClass="slds-select">
                                                                                        <apex:selectOption itemValue="" itemLabel="--None--" /> 
                                                                                        <apex:selectOptions value="{!defaultSpecialCharacterOptions}"/>
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                    </div>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" rendered="{!AND(isBasicOrHigher,NOT(isMultiOrgEnabled))}">
                                                                    <div class="slds-section__title slds-m-top_medium">Account and Opportunity Rollups calculation
                                                                        <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                            <a href="javascript:void(0);">
                                                                                <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover='identifyfield(this,"Breadwinner calculates various totals and displays them as \"Total Invoiced\", \"Total Paid\", etc. It can calculate these totals as either Net (based on the Invoice SubTotal amount, which excludes tax) or Gross (based on the Invoice Total amount, which includes tax).","135","18")' onmouseout="mouseoutclose();" />
                                                                                <span class="slds-assistive-text">Help</span>
                                                                            </a>
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                    <div class="slds-form-element slds-m-left_small slds-m-top_small" >
                                                                        <label class="slds-form-element__label" >Breadwinner rollups on the Account and Opportunity will be calculated either Gross (including any tax) or Net (excluding any tax).</label>
                                                                        <div class="slds-form-element__control slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                            <div class="slds-select_container slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                                <apex:selectList id="rollupAmountsOptions" size="1" value="{!selectedFieldForOpportunityRollup}" styleClass="slds-select">
                                                                                    <apex:selectOptions value="{!defaultXeroRollupAmountsOptions}"/>
                                                                                </apex:selectList>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" rendered="{!AND(isProfessionalOrHigher, NOT(isMultiOrgEnabled))}">
                                                                    <div class="slds-section__title slds-m-top_medium">Custom Invoice Number from Opportunity
                                                                        <apex:outputPanel styleClass="slds-form-element__icon" rendered="{!TrialOrg}">
                                                                            <a href="javascript:void(0);">
                                                                                <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Normally, Xero will assign an Invoice number to any Invoices created by Breadwinner. However, you can optionally set your own Invoice number based on an Opportunity Custom Field.','100','18')" onmouseout="mouseoutclose();" />
                                                                                <span class="slds-assistive-text">Help</span>
                                                                            </a>
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                    <div class="slds-form-element slds-m-left_small slds-m-top_small">
                                                                        <label class="slds-form-element__label" >Custom Invoice Number</label>
                                                                        <div class="slds-form-element__control slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                            <div class="slds-select_container slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                                <apex:selectList id="customInvoiceNumberFields" value="{!selectedFieldForCustomInvoiceNumber}" size="1" styleClass="slds-select">
                                                                                    <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                    <apex:selectOptions value="{!textFields}"/>    
                                                                                </apex:selectList>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" rendered="{!AND(isOrderEnabled, HasOrderLookup, NOT(isMultiOrgEnabled))}">
                                                                    <div class="slds-section__title slds-m-top_medium">Custom Invoice Number from Order
                                                                        <apex:outputPanel styleClass="slds-form-element__icon" rendered="{!TrialOrg}">
                                                                            <a href="javascript:void(0);">
                                                                                <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Normally, Xero will assign an Invoice number to any Invoices created by Breadwinner. However, you can optionally set your own Invoice number based on an Order Custom Field.','100','18')" onmouseout="mouseoutclose();" />
                                                                                <span class="slds-assistive-text">Help</span>
                                                                            </a>
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                    <div class="slds-form-element slds-m-left_small slds-m-top_small">
                                                                        <label class="slds-form-element__label" >Custom Invoice Number</label>
                                                                        <div class="slds-form-element__control slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                            <div class="slds-select_container slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                                <apex:selectList id="customInvoiceNumberFieldsFromOrder" value="{!selectedFieldForOrderCustomInvoiceNumber}" size="1" styleClass="slds-select">
                                                                                    <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                    <apex:selectOptions value="{!OrderToInvoicetextFields}"/>    
                                                                                </apex:selectList>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" rendered="{!AND(isBusinessOrHigher, NOT(isMultiOrgEnabled))}">
                                                                    <div class="slds-section__title slds-m-top_medium">Sharing Settings </div>
                                                                    <div class="slds-text-body_small  slds-m-horizontal_small"> 
                                                                        <label class="slds-checkbox slds-m-top_small">
                                                                            <apex:inputCheckbox value="{!useAccountOwnerforInvoiceOwner}" id="accountOwnerasInvoiceOwner"/> 
                                                                            <span class="slds-checkbox_faux"></span>
                                                                            <span class="slds-form-element__label slds-m-left_small">
                                                                                Use Account Owner as Invoice Owner
                                                                            </span>
                                                                        </label>
                                                                    </div>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" rendered="{!NOT(isMultiOrgEnabled)}">
                                                                    <div class="slds-section__title slds-m-top_medium">Decimal Places</div>
                                                                    <div class="slds-form-element slds-m-left_small slds-m-top_small">
                                                                        <span class="slds-checkbox">
                                                                            <label class="slds-checkbox__label" >
                                                                                <apex:inputCheckbox value="{!bwsettingWrapper.Additional_Decimal_Places}" id="decimalPlaces"/>
                                                                                <span class="slds-checkbox_faux"></span>
                                                                                <span class="slds-form-element__label slds-m-right_small"> By default, Breadwinner displays Invoice Quantity, Rate/Unit Price, Tax Amount and Line Amount in 2-digit decimal values (example: 3.14). Check this to see them in 4-digit decimal values (example: 3.1415).</span>
                                                                            </label>
                                                                        </span>
                                                                    </div>
                                                                </apex:outputPanel>
                                                                <!-- ------------------ Custom Buttons Configuration Section Starts -------------------- -->
                                                                <apex:outputPanel id="CustomButtonsSectionTop" layout="block" rendered="{!AND(isBasicOrHigher,NOT(isMultiOrgEnabled))}">
                                                                    <apex:outputPanel rendered="{!If(listofCustomButtons.size > 0, true, false)}"> 
                                                                        <div class="slds-section__title slds-m-top_medium">Choose Custom buttons to show on Invoice Detail Page</div>
                                                                        <div class="slds-form-element">
                                                                            <apex:outputPanel id="CustomButtonsSection1">
                                                                                <apex:outputPanel >
                                                                                    <label class="slds-form-element__label slds-m-horizontal_small slds-m-top_small" style="vertical-align: top;">Custom buttons list on Invoice object</label>
                                                                                    <div class="slds-form-element__control slds-m-horizontal_small">
                                                                                        <apex:outputPanel >
                                                                                            <select class="form-control slds-select slds-input CustombuttonsSelect" multiple="multiple" style="width: 35%;" id="buttonsList">
                                                                                                <optgroup label="Buttons">
                                                                                                    <apex:repeat value="{!customButtonsList}" var="c">
                                                                                                        <apex:outputPanel rendered="{!if(c.isSelected,true,false)}">
                                                                                                            <option value="{!c.name}" selected="selected">{!c.Name}</option>
                                                                                                        </apex:outputPanel>
                                                                                                        <apex:outputPanel rendered="{!!if(c.isSelected,true,false)}">
                                                                                                            <option value="{!c.name}">{!c.MasterLabel} ({!c.Name})</option>
                                                                                                        </apex:outputPanel>
                                                                                                    </apex:repeat>
                                                                                                </optgroup>
                                                                                            </select>
                                                                                        </apex:outputPanel>
                                                                                    </div>
                                                                                </apex:outputPanel>
                                                                            </apex:outputPanel>
                                                                            <apex:actionFunction name="updateButtonsConfiguration" action="{!addButtons}" oncomplete="HideStyleSheet();message();">
                                                                                <apex:param name="buttonname" assignTo="{!buttonname}" value=""/>
                                                                                <apex:param name="type" assignTo="{!type}" value=""/>
                                                                            </apex:actionFunction>
                                                                        </div>
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                                <!-- ------------------ Custom Buttons Configuration Section Ends -------------------- -->
                                                            </div>
                                                        </div>
                                                        <!-- -------------------------------- Advanced Settings Ends ------------------------------------ -->
                                                    </apex:outputPanel>
                                                    <!-- ----------------------------------- Xero Org wide Settings Ends -------------------------------- -->
                                                    
                                                    <!-- ------------------------------ Breadwinner Wide Settings Start --------------------------------- -->
                                                    
                                                    <apex:outputPanel layout="block"  styleClass="slds-m-around_small slds-m-bottom_medium" rendered="{!OR(AND(isMultiOrgEnabled,xeroOrgId==null),AND(NOT(isMultiOrgEnabled),xeroOrgId!=null))}">
                                                        <apex:outputPanel layout="block" rendered="{!isMultiOrgEnabled}">
                                                            <!-- -------------- LDS Video Section -------------- -->
                                                            <div class="slds-trial-header slds-grid slds-wrap slds-m-bottom_medium" style="align-items:inherit;border-radius: 5px;">
                                                                <div class="slds-grid slds-grid_vertical-align-center">
                                                                    <span class="wistia_embed wistia_async_yto9j319gw popover=true popoverContent=link" style="display:inline;">
                                                                        <a href="#" style="font-size: large; text-decoration:none;" class="rightSVGIcon">
                                                                            <svg class="slds-icon slds-float_left" style="float:left" aria-hidden="true">
                                                                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#right')}"/>
                                                                            </svg>
                                                                            Watch a video walk through, showing how to configure this page.
                                                                        </a>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                            <!-- -------------- LDS Video Section End -------------- -->
                                                        </apex:outputPanel>
                                                        <!-- ----------------------- Help text start---------------------- -->
                                                        <apex:outputPanel layout="block" styleclass="slds-text-heading_small slds-m-horizontal_xx-small" style="font-style: italic;" rendered="{!AND(isMultiOrgEnabled,OR(isMultiorgsConnected,isBasicOrHigher))}">
                                                            As you are using Breadwinner with Multiple Xero Orgs, we have split the Configuration section into multiple pages. This page is for settings that affect all of Breadwinner regardless of which Xero org. The other pages are for settings that affect just one of your many Xero orgs.
                                                        </apex:outputPanel>
                                                        <!-- ---------------------- Help text END ------------------------- -->
                                                        
                                                        <apex:outputPanel layout="block"  rendered="{!isProfessionalOrHigher}">
                                                            <apex:outputtext rendered="{!(!isProfessionalOrHigher && !TrialOrg)}"> The functionality below is beta functionality and is not generally available. Furthermore, we may limit this functionality to certain plans. </apex:outputtext>
                                                            <h3 class="slds-section-title_divider slds-m-top_medium">
                                                                Invoice Fields from the Opportunity
                                                                <apex:outputPanel styleClass="slds-form-element__icon" rendered="{!TrialOrg}">
                                                                    <a href="javascript:void(0);">
                                                                        <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'This Invoice Fields mapping is only available to customers on the Professional Plan and higher. During your free trial of Breadwinner, you can use this functionality, but if you subscribe to the Basic plan, then this will no longer be available.','117','18')" onmouseout="mouseoutclose();" />
                                                                        <span class="slds-assistive-text">Help</span>
                                                                    </a>
                                                                </apex:outputPanel>
                                                            </h3>
                                                            <div class="slds-text-color_weak slds-m-left_small slds-m-top_medium">
                                                                When creating Invoices from Opportunities and Opportunity Products, we populate data in the Invoice from standard Salesforce fields. However, you might have your own 
                                                                field you'd like to use to prepopulate the Invoice. You can select your own custom fields below. If you'd like to use two or more fields, we suggest you combine them using a formula.
                                                            </div>
                                                            <div class="slds-text-body_small slds-m-top_small slds-m-left_small ">Invoice Fields are populated from the Opportunity object. Please select a field or a formula field below. This only affects Invoices created from Opportunities.</div>
                                                            <div class="slds-m-top_small slds-m-left_small"><i>Please note</i>: <i>All mapped fields must be on the <a id="opptyFieldsLink" href="" target="_blank" style="color:gray;text-decoration: underline;">Opportunity</a></i>. <i>If you wish to map data on an object other than the Opportunity</i>, <i>please create a formula field on the Opportunity to pull in this data</i>.</div>
                                                            <div class="slds-grid slds-wrap slds-m-left_small">
                                                                <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                    <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                        
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label" >Invoice Reference</label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList value="{!selectedFieldForInvoiceReference}" size="1" styleClass="slds-select" id="invoiceReferenceFields">
                                                                                        <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                        <apex:selectOptions value="{!textFields}"/>    
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label" >Invoice Date</label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList value="{!selectedFieldForInvoiceDate}" size="1" styleClass="slds-select" id="invoiceDateFields">
                                                                                        <apex:selectOption itemLabel="--Current Date--" itemValue="" />
                                                                                        <apex:selectOptions value="{!invoice_DateFields}"/>    
                                                                                    </apex:selectList> 
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                
                                                                <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                    <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label" >Invoice Due Date</label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList id="invoiceDueDateFields" value="{!selectedFieldForInvoiceDueDate}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                        <apex:selectOptions value="{!dateFields}"/>    
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label" >Invoice Branding Theme</label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList id="BrandingThemeFields" value="{!selectedFieldForInvoiceBrandingTheme}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                        <apex:selectOptions value="{!BrandingThemeFields}"/>
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>
                                                        
                                                        <!-- -----------Invoice Line Items from Opportunity (LineItem Url) for Bussiness Starts --------- -->
                                                        <apex:outputPanel layout="block" rendered="{!isProfessionalOrHigher}">
                                                            <div class="slds-section" id="DeleteRecDivId2">
                                                                <h3 class="slds-section-title_divider slds-m-top_medium" style="padding: 0.19rem;">
                                                                    <button class="slds-button slds-section__title-action"  type="button" onclick="showHideSectionConent('DeleteRecDivId2','DeleteRecDivIdImage2');" style="letter-spacing: .0625rem;text-transform: initial;">
                                                                        <img id="DeleteRecDivIdImage2" src="{!URLFOR($Resource.Breadwinner_Xero, 'Breadwinner_Xero/Images/SectionClose.png')}" style="margin-bottom: 3px;margin-right: 4px;" />
                                                                        <span style="text-transform: uppercase;">Opportunity to Invoice Line Item</span>
                                                                    </button>
                                                                </h3>
                                                                <div class="slds-section__content slds-m-left_small">
                                                                    <div class="slds-m-top_small slds-m-left_small">
                                                                        <p class="slds-m-top_small"><i>Please note</i>: <i>All mapped fields must be on the <a id="opptyFieldsForLILink" href="" target="_blank" style="color: gray;text-decoration: underline;">Opportunity</a></i>. <i>If you wish to map data on an object other than the Opportunity</i>, <i>please create a formula field on the Opportunity to pull in this data</i>.</p>
                                                                    </div>
                                                                    
                                                                    <div class="slds-grid slds-wrap slds-m-left_small">
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                            <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                                
                                                                                <div class="slds-form-element slds-m-top_small">
                                                                                    <label class="slds-form-element__label">Line Item Inventory Code
                                                                                    </label>
                                                                                    <div class="slds-form-element__control">
                                                                                        <div class="slds-select_container">
                                                                                            <apex:selectList id="liInventoryCodes" value="{!LineItemURL_InventoryCode}" size="1" styleClass="slds-select">
                                                                                                <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                                <apex:selectOptions value="{!textFields}"/>    
                                                                                            </apex:selectList>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="slds-form-element slds-m-top_small">
                                                                                    <label class="slds-form-element__label">Line Item Description <span style="color:red">(Required)</span>
                                                                                    </label>
                                                                                    <div class="slds-form-element__control">
                                                                                        <div class="slds-select_container">
                                                                                            <apex:selectList id="liDescription" value="{!LineItemURL_Description}" size="1" styleClass="slds-select">
                                                                                                <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                                <apex:selectOptions value="{!LineItemURL_TextFields}"/>
                                                                                                <apex:selectOptions value="{!LineItemURL_LongTextAreaFields}"/>
                                                                                            </apex:selectList>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                
                                                                                <div class="slds-form-element slds-m-top_small">
                                                                                    <label class="slds-form-element__label">Line Item Quantity
                                                                                        <apex:outputPanel styleClass="slds-form-element__icon" rendered="false">
                                                                                            <a href="javascript:void(0);">
                                                                                                <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Normally populated by Opportunity Quantity. ','62','18')" onmouseout="mouseoutclose();" />
                                                                                                <span class="slds-assistive-text">Help</span>
                                                                                            </a>
                                                                                        </apex:outputPanel>
                                                                                    </label>
                                                                                    <div class="slds-form-element__control">
                                                                                        <div class="slds-select_container">
                                                                                            <apex:selectList id="liQuantity" value="{!LineItemURL_Quantity}" size="1" styleClass="slds-select">
                                                                                                <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                                <apex:selectOption itemLabel="--Default to 1--" itemValue="1" />
                                                                                                <apex:selectOptions value="{!LineItemURL_NumberFields}"/>    
                                                                                            </apex:selectList>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                
                                                                                <div class="slds-form-element slds-m-top_small">
                                                                                    <label class="slds-form-element__label">Line Item Amount
                                                                                        <apex:outputPanel styleClass="slds-form-element__icon" rendered="false">
                                                                                            <a href="javascript:void(0);">
                                                                                                <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Normally populated by Opportunity Amount. ','62','18')" onmouseout="mouseoutclose();" />
                                                                                                <span class="slds-assistive-text">Help</span>
                                                                                            </a>
                                                                                        </apex:outputPanel>
                                                                                    </label>
                                                                                    <div class="slds-form-element__control">
                                                                                        <div class="slds-select_container">
                                                                                            <apex:selectList id="liAmount" value="{!LineItemURL_Amount}" size="1" styleClass="slds-select">
                                                                                                <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                                <apex:selectOption itemLabel="--Use Standard 'Opportunity Amount' Field--" itemValue="amount" />
                                                                                                <apex:selectOptions value="{!LineItemURL_NumberFields}"/>    
                                                                                            </apex:selectList>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                
                                                                                <div class="slds-form-element slds-m-top_small">
                                                                                    <label class="slds-form-element__label">Line Item Discount</label>
                                                                                    <div class="slds-form-element__control">
                                                                                        <div class="slds-select_container">
                                                                                            <apex:selectList id="liDiscount" value="{!LineItemURL_Discount}" size="1" styleClass="slds-select">
                                                                                                <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                                <apex:selectOptions value="{!LineItemURL_Num_And_PercentFields}" />    
                                                                                            </apex:selectList>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                
                                                                                <div class="slds-form-element slds-m-top_small">
                                                                                    <label class="slds-form-element__label">Do you want this line to be the First or Last line on the Invoice?
                                                                                    </label>
                                                                                    <div class="slds-form-element__control">
                                                                                        <div class="slds-select_container">
                                                                                            <apex:selectList id="liLocation" value="{!LineItemURL_Location}" size="1" styleClass="slds-select">
                                                                                                <apex:selectOptions value="{!LineItemURL_LocationValues}"/>    
                                                                                            </apex:selectList>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2" style="display:{!if(isBusinessOrHigher,'Block','None')}">
                                                                            <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                                
                                                                                <div class="slds-form-element slds-m-top_small">
                                                                                    <label class="slds-form-element__label">Account Revenue
                                                                                        <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                                            <a href="javascript:void(0);">
                                                                                                <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Must be a perfect match with the Xero value. ','45','18')" onmouseout="mouseoutclose();" />
                                                                                                <span class="slds-assistive-text">Help</span>
                                                                                            </a>
                                                                                        </apex:outputPanel>
                                                                                    </label>
                                                                                    <div class="slds-form-element__control">
                                                                                        <div class="slds-select_container">
                                                                                            <apex:selectList id="liAccountRevenues" value="{!LineItemURL_AccountRevenue}" size="1" styleClass="slds-select">
                                                                                                <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                                <apex:selectOptions value="{!LineItemURL_TextFields}"/>    
                                                                                            </apex:selectList>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                
                                                                                <div class="slds-form-element slds-m-top_small">
                                                                                    <label class="slds-form-element__label">Tax Rate
                                                                                        <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                                            <a href="javascript:void(0);">
                                                                                                <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Must be a perfect match with the Xero value. ','45','18')" onmouseout="mouseoutclose();" />
                                                                                                <span class="slds-assistive-text">Help</span>
                                                                                            </a>
                                                                                        </apex:outputPanel>
                                                                                    </label>
                                                                                    <div class="slds-form-element__control">
                                                                                        <div class="slds-select_container">
                                                                                            <apex:selectList id="liTaxRate" value="{!LineItemURL_TaxRate}" size="1" styleClass="slds-select">
                                                                                                <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                                <apex:selectOptions value="{!LineItemURL_TextFields}"/>
                                                                                            </apex:selectList>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                
                                                                                <div class="slds-form-element slds-m-top_small">
                                                                                    <label class="slds-form-element__label">Tracking Category 1
                                                                                        <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                                            <a href="javascript:void(0);">
                                                                                                <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Tracking Categories are optional fields which must be enabled first in Xero. It\'s possible these fields aren\'t used in your instance of Xero. These field\'s values must be a perfect match with the values in Xero. ','98','17')" onmouseout="mouseoutclose();" />
                                                                                                <span class="slds-assistive-text">Help</span>
                                                                                            </a>
                                                                                        </apex:outputPanel>
                                                                                    </label>
                                                                                    <div class="slds-form-element__control">
                                                                                        <div class="slds-select_container">
                                                                                            <apex:selectList id="liTrackingCategory1" value="{!LineItemURL_TrackingCategory1}" size="1" styleClass="slds-select">
                                                                                                <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                                <apex:selectOptions value="{!LineItemURL_TextFields}"/>    
                                                                                            </apex:selectList>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                
                                                                                <div class="slds-form-element slds-m-top_small">
                                                                                    <label class="slds-form-element__label">Tracking Category 2
                                                                                        <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                                            <a href="javascript:void(0);">
                                                                                                <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Tracking Categories are optional fields which must be enabled first in Xero. It\'s possible these fields aren\'t used in your instance of Xero. These field\'s values must be a perfect match with the values in Xero. ','98','17')" onmouseout="mouseoutclose();" />
                                                                                                <span class="slds-assistive-text">Help</span>
                                                                                            </a>
                                                                                        </apex:outputPanel>
                                                                                    </label>
                                                                                    <div class="slds-form-element__control">
                                                                                        <div class="slds-select_container">
                                                                                            <apex:selectList id="liTrackingCategory2" value="{!LineItemURL_TrackingCategory2}" size="1" styleClass="slds-select">
                                                                                                <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                                <apex:selectOptions value="{!LineItemURL_TextFields}"/>
                                                                                            </apex:selectList>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                
                                                                                <div class="slds-form-element slds-m-top_small">
                                                                                    <label class="slds-form-element__label">For Batch Invoice Creation, Should Breadwinner use both Opportunity Products and these fields to create the line items
                                                                                    </label>
                                                                                    <div class="slds-form-element__control">
                                                                                        <div class="slds-select_container">
                                                                                            <apex:selectList id="liforBatchInvoice" value="{!LineItemURL_OppLineItem1_Batch_invoice_Consideration}" size="1" styleClass="slds-select">
                                                                                                <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                                <apex:selectOption itemLabel="Use Single Line from here AND Opportunity Products" itemValue="Use Single Line from here AND Opportunity Products" />
                                                                                                <apex:selectOption itemLabel="Use Single Line from here but NOT Opportunity Products" itemValue="Use Single Line from here but NOT Opportunity Products" />
                                                                                            </apex:selectList>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>                                             
                                                            </div> 
                                                        </apex:outputPanel>
                                                        <!-- ------------- Invoice Line Items from Opportunity (LineItem Url) for Bussiness Ends -------- -->
                                                        
                                                        <!-- ----------------- Invoice Line Item Fields from the Opportunity Product Section ------------ -->
                                                        <apex:outputPanel layout="block" rendered="{!isBusinessOrHigher}">
                                                            
                                                            <h3 class="slds-section-title_divider slds-m-top_medium">Invoice Line Item Fields from the Opportunity Product</h3>
                                                            
                                                            <div class="slds-text-color_weak slds-m-top_small slds-m-left_small">
                                                                <p>Invoice Line Items are normally populated from the Opportunity Product fields. We presume you use the standard fields Description, Amount, Discount, and Quantity. However, you may wish to override these fields with your own custom fields. Additionally, you may want to populate the Account Revenue, Tax, and the optional Xero Tracking Category fields.</p>
                                                                <p class="slds-m-top_small">For the Account Revenue, Tax, and Tracking categories, you must provide values that already exist in Xero. For security and data accuracy reasons, if the match is not exact, we will leave that field blank on the Breadwinner New Invoice page, allowing you to manually populate it before committing to Xero. </p>   
                                                            </div>
                                                            <div class="slds-m-top_small slds-m-left_small">
                                                                <p class="slds-m-top_small"><i>Please note</i>: <i>All mapped fields must be on the <a id="opptyProdFieldsLink" href="" target="_blank" style="color: gray;text-decoration: underline;">Opportunity Product</a>. If you wish to map data on an object other than the Opportunity Product</i>, <i>please create a formula field on the Opportunity Product to pull in this data.</i></p><br/>
                                                                <div class="slds-text-align_center">
                                                                    <b><span class="wistia_embed wistia_async_e0d72ntnoj popover=true popoverContent=link" style="display:inline;"><a href="#" style="font-size: 22px; color:#0070d2">Learn how to create Formula fields so you can Populate Line Item Values in Xero</a></span></b>
                                                                </div>
                                                            </div>
                                                            
                                                            <div class="slds-grid slds-wrap slds-m-left_small">
                                                                <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                    <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label">Line Item Inventory Code - Override Field
                                                                                <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                                    <a href="javascript:void(0);">
                                                                                        <img style="margin-left: 5px;margin-bottom: 2px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Normally populated by Opportunity Product Code. You can not select a Long Text Area field here due to Xero Limitations.','80','18')" onmouseout="mouseoutclose();" />
                                                                                        <span class="slds-assistive-text">Help</span>
                                                                                    </a>
                                                                                </apex:outputPanel>
                                                                            </label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList id="opliInventoryCodes" value="{!LineItem_InventoryCode}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--Use Default Standard Field--" itemValue="" />
                                                                                        <apex:selectOptions value="{!OLI_InventorytextFields}"/>    
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label">Line Item Description - Override Field
                                                                                <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                                    <a href="javascript:void(0);">
                                                                                        <img style="margin-left: 5px;margin-bottom: 2px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Normally populated by Opportunity Product Name and Description. You can select a Long Text Area Field but Xero will consider up to 4000 characters only as per the Xero Limitations.','100','18')" onmouseout="mouseoutclose();" />
                                                                                        <span class="slds-assistive-text">Help</span>
                                                                                    </a>
                                                                                </apex:outputPanel>
                                                                            </label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList id="opliDescription" value="{!LineItem_Description}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--Use Default Standard Field--" itemValue="" />
                                                                                        <apex:selectOptions value="{!OLItextFields}"/>
                                                                                        <apex:selectOptions value="{!LongTextAreaFields}"/>  
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label">Line Item Quantity - Override Field
                                                                                <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                                    <a href="javascript:void(0);">
                                                                                        <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Normally populated by Opportunity Product Quantity.','62','18')" onmouseout="mouseoutclose();" />
                                                                                        <span class="slds-assistive-text">Help</span>
                                                                                    </a>
                                                                                </apex:outputPanel>
                                                                            </label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList id="opliQuantity" value="{!LineItem_Quantity}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--Use Default Standard Field--" itemValue="" />
                                                                                        <apex:selectOptions value="{!OLINumberFields}"/>    
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label">Line Item Amount - Override Field
                                                                                <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                                    <a href="javascript:void(0);">
                                                                                        <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Normally populated by Opportunity Product Amount. ','62','18')" onmouseout="mouseoutclose();" />
                                                                                        <span class="slds-assistive-text">Help</span>
                                                                                    </a>
                                                                                </apex:outputPanel>
                                                                            </label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList id="opliAmount" value="{!LineItem_Amount}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--Use Default Standard Field--" itemValue="" />
                                                                                        <apex:selectOptions value="{!OLINumberFields}"/>    
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label">Line Item Discount - Override Field
                                                                                <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                                    <a href="javascript:void(0);">
                                                                                        <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Normally populated by Opportunity Product Discount. ','62','18')" onmouseout="mouseoutclose();" />
                                                                                        <span class="slds-assistive-text">Help</span>
                                                                                    </a>
                                                                                </apex:outputPanel>
                                                                            </label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList id="opliDiscount" value="{!LineItem_Discount}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--Use Default Standard Field--" itemValue="" />
                                                                                        <apex:selectOptions value="{!OLINumPercentFields}" />    
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                    <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label">Account Revenue
                                                                                <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                                    <a href="javascript:void(0);">
                                                                                        <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Must be a perfect match with the Xero value. ','45','18')" onmouseout="mouseoutclose();" />
                                                                                        <span class="slds-assistive-text">Help</span>
                                                                                    </a>
                                                                                </apex:outputPanel>
                                                                            </label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList id="opliAccountRevenue" value="{!LineItem_AccountRevenue}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                        <apex:selectOptions value="{!OLItextFields}"/>    
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label">Tax Rate
                                                                                <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                                    <a href="javascript:void(0);">
                                                                                        <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Must be a perfect match with the Xero value. ','45','18')" onmouseout="mouseoutclose();" />
                                                                                        <span class="slds-assistive-text">Help</span>
                                                                                    </a>
                                                                                </apex:outputPanel>
                                                                            </label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList id="opliTaxRate" value="{!LineItem_TaxRate}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                        <apex:selectOptions value="{!OLItextFields}"/>    
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label">Tracking Category 1
                                                                                <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                                    <a href="javascript:void(0);">
                                                                                        <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Tracking Categories are optional fields which must be enabled first in Xero. It\'s possible these fields aren\'t used in your instance of Xero. These field\'s values must be a perfect match with the values in Xero. ','98','17')" onmouseout="mouseoutclose();" />
                                                                                        <span class="slds-assistive-text">Help</span>
                                                                                    </a>
                                                                                </apex:outputPanel>
                                                                            </label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList id="opliTrackingCategory1" value="{!LineItem_TrackingCategory1}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                        <apex:selectOptions value="{!OLItextFields}"/>    
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label">Tracking Category 2
                                                                                <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                                    <a href="javascript:void(0);">
                                                                                        <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Tracking Categories are optional fields which must be enabled first in Xero. It\'s possible these fields aren\'t used in your instance of Xero. These field\'s values must be a perfect match with the values in Xero. ','98','17')" onmouseout="mouseoutclose();" />
                                                                                        <span class="slds-assistive-text">Help</span>
                                                                                    </a>
                                                                                </apex:outputPanel>
                                                                            </label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList id="opliTrackingCategory2" value="{!LineItem_TrackingCategory2}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                        <apex:selectOptions value="{!OLItextFields}"/>
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>
                                                        <!-- -------------- Invoice Line Item Fields from the Opportunity Product Section Ends ---------- -->
                                                        
                                                        <!-- -------------------------------- Advanced Settings ----------------------------------------- -->
                                                        <apex:outputPanel layout="block" rendered="{!AND(isBasicOrHigher,isMultiOrgEnabled)}">
                                                            <div class="slds-section" id="DeleteRecDivId" >
                                                                <h3 class="slds-section-title_divider slds-m-top_medium" style="padding: 0.19rem;">
                                                                    <button class="slds-button slds-section__title-action"  type="button" onclick="showHideSectionConent('DeleteRecDivId','DeleteRecDivIdImage');" style="letter-spacing: .0625rem;text-transform: initial;">
                                                                        <img id="DeleteRecDivIdImage" src="{!URLFOR($Resource.Breadwinner_Xero, 'Breadwinner_Xero/Images/SectionClose.png')}" style="margin-bottom: 3px;margin-right: 4px;" />
                                                                        <span style="text-transform: uppercase;">Advanced Settings</span>
                                                                    </button>
                                                                </h3>
                                                                <div class="slds-section__content slds-m-left_small">
                                                                    <div class="slds-section__title">Account and Opportunity Rollups calculation
                                                                        <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                            <a href="javascript:void(0);">
                                                                                <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover='identifyfield(this,"Breadwinner calculates various totals and displays them as \"Total Invoiced\", \"Total Paid\", etc. It can calculate these totals as either Net (based on the Invoice SubTotal amount, which excludes tax) or Gross (based on the Invoice Total amount, which includes tax).","135","18")' onmouseout="mouseoutclose();" />
                                                                                <span class="slds-assistive-text">Help</span>
                                                                            </a>
                                                                        </apex:outputPanel>
                                                                    </div>
                                                                    <div class="slds-form-element slds-m-left_small slds-m-top_small" >
                                                                        <label class="slds-form-element__label" >Breadwinner rollups on the Account and Opportunity will be calculated either Gross (including any tax) or Net (excluding any tax). </label>
                                                                        <div class="slds-form-element__control slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                            <div class="slds-select_container slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                                <apex:selectList id="advRollupAmountsOptions" size="1" value="{!selectedFieldForOpportunityRollup}" styleClass="slds-select">
                                                                                    <apex:selectOptions value="{!defaultXeroRollupAmountsOptions}"/>
                                                                                </apex:selectList>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <apex:outputPanel layout="block" rendered="{!isProfessionalOrHigher}">
                                                                    <div class="slds-section__content slds-m-left_small">
                                                                        <div class="slds-section__title">Custom Invoice Number from Opportunity
                                                                            <apex:outputPanel styleClass="slds-form-element__icon" rendered="{!TrialOrg}">
                                                                                <a href="javascript:void(0);">
                                                                                    <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Normally, Xero will assign an Invoice number to any Invoices created by Breadwinner. However, you can optionally set your own Invoice number based on an Opportunity Custom Field.','100','18')" onmouseout="mouseoutclose();" />
                                                                                    <span class="slds-assistive-text">Help</span>
                                                                                </a>
                                                                            </apex:outputPanel>                                                
                                                                        </div>
                                                                        <div class="slds-m-left_small slds-m-top_small" >
                                                                            <label class="slds-form-element__label" >Custom Invoice Number</label>
                                                                            <div class="slds-form-element__control slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                                <div class="slds-select_container slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                                    <apex:selectList id="advCustomInvoiceNumber" value="{!selectedFieldForCustomInvoiceNumber}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                        <apex:selectOptions value="{!textFields}"/>    
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" rendered="{!AND(isOrderEnabled, HasOrderLookup)}">
                                                                    <div class="slds-section__content slds-m-left_small">
                                                                        <div class="slds-section__title">Custom Invoice Number from Order
                                                                            <apex:outputPanel styleClass="slds-form-element__icon" rendered="{!TrialOrg}">
                                                                                <a href="javascript:void(0);">
                                                                                    <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Normally, Xero will assign an Invoice number to any Invoices created by Breadwinner. However, you can optionally set your own Invoice number based on an Order Custom Field.','100','18')" onmouseout="mouseoutclose();" />
                                                                                    <span class="slds-assistive-text">Help</span>
                                                                                </a>
                                                                            </apex:outputPanel>                                                
                                                                        </div>
                                                                        <div class="slds-m-left_small slds-m-top_small" >
                                                                            <label class="slds-form-element__label" >Custom Invoice Number</label>
                                                                            <div class="slds-form-element__control slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                                <div class="slds-select_container slds-size_1-of-1 slds-medium-size_3-of-6 slds-large-size_6-of-12">
                                                                                    <apex:selectList id="advCustomInvoiceNumberFromOrder" value="{!selectedFieldForOrderCustomInvoiceNumber}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                        <apex:selectOptions value="{!OrderToInvoicetextFields}"/>    
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" rendered="{!isBusinessOrHigher}">
                                                                    <div class="slds-section__content slds-m-left_small">
                                                                        <div class="slds-section__title">Sharing Settings </div>
                                                                        <div class="slds-text-body_small  slds-m-horizontal_small"> 
                                                                            <label class="slds-checkbox slds-m-top_small">
                                                                                <apex:inputCheckbox id="advAccountOwnerforInvoiceOwner" value="{!useAccountOwnerforInvoiceOwner}"  /> 
                                                                                <span class="slds-checkbox_faux"></span>
                                                                                <span class="slds-form-element__label slds-m-left_small">
                                                                                    Use Account Owner as Invoice Owner
                                                                                </span>                                            
                                                                            </label>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel layout="block" rendered="{!OR(orgStatus != 'expired', isFreePlan)}">
                                                                    <div class="slds-section__content slds-m-left_small">
                                                                        <div class="slds-section__title">Decimal Places</div>
                                                                        <div class="slds-text-body_small  slds-m-horizontal_small"> 
                                                                            <label class="slds-checkbox slds-m-top_small">
                                                                                <apex:inputCheckbox id="additionalDecimalPlaces" value="{!bwsettingWrapper.Additional_Decimal_Places}"  /> 
                                                                                <span class="slds-checkbox_faux"></span>
                                                                                <span class="slds-form-element__label slds-m-left_small" style="display:inline;">
                                                                                    By default, Breadwinner displays Invoice Quantity, Rate/Unit Price, Tax Amount and Line Amount in 2-digit decimal values (example: 3.14). Check this to see them in 4-digit decimal values (example: 3.1415).
                                                                                </span>                                            
                                                                            </label>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputPanel>
                                                                <!-- ------------------ Custom Buttons Configuration Section Starts -------------------- -->
                                                                <apex:outputPanel layout="block" rendered="{!If(listofCustomButtons.size > 0, true, false)}">     
                                                                    <div class="slds-section__content slds-m-left_small">
                                                                        <div class="slds-section__title">Choose Custom buttons to show on Invoice Detail Page</div>
                                                                        <div class="slds-form-element">
                                                                            <apex:outputPanel id="CustomButtonsSection">
                                                                                <apex:outputPanel >
                                                                                    <label class="slds-form-element__label slds-m-horizontal_small slds-m-top_small" style="vertical-align: top;">Custom buttons list on Invoice object</label>
                                                                                    <div class="slds-form-element__control slds-m-horizontal_small">
                                                                                        <apex:outputPanel >
                                                                                            <select class="form-control slds-select slds-input CustombuttonsSelect" multiple="multiple" style="width: 35%;" id="buttonsList">
                                                                                                <optgroup label="Buttons">
                                                                                                    <apex:repeat value="{!customButtonsList}" var="c">
                                                                                                        <apex:outputPanel rendered="{!if(c.isSelected,true,false)}">
                                                                                                            <option value="{!c.name}" selected="selected">{!c.Name}</option>
                                                                                                        </apex:outputPanel>
                                                                                                        <apex:outputPanel rendered="{!!if(c.isSelected,true,false)}">
                                                                                                            <option value="{!c.name}">{!c.MasterLabel} ({!c.Name})</option>
                                                                                                        </apex:outputPanel>
                                                                                                    </apex:repeat>
                                                                                                </optgroup>
                                                                                            </select>
                                                                                        </apex:outputPanel>
                                                                                    </div>
                                                                                </apex:outputPanel>
                                                                            </apex:outputPanel>
                                                                            <apex:actionFunction name="updateButtonsConfiguration" action="{!addButtons}" oncomplete="HideStyleSheet();message();">
                                                                                <apex:param name="buttonname" assignTo="{!buttonname}" value=""/>
                                                                                <apex:param name="type" assignTo="{!type}" value=""/>
                                                                            </apex:actionFunction>
                                                                        </div>
                                                                    </div>
                                                                </apex:outputPanel>
                                                                <!-- ------------------ Custom Buttons Configuration Section Ends -------------------- -->
                                                            </div>
                                                        </apex:outputPanel>
                                                        <!-- -------------------------------- Advanced Settings Ends ------------------------------------ -->
                                                        
                                                        <!-- --------------------------- INVOICE FIELDS FROM THE ORDER SECTION -------------------------- -->
                                                        <apex:outputPanel layout="block" rendered="{!AND(isProfessionalOrHigher,isOrderEnabled,HasOrderLookup)}">
                                                            <apex:outputtext rendered="{!(!isProfessionalOrHigher && !TrialOrg)}"> The functionality below is beta functionality and is not generally available. Furthermore, we may limit this functionality to certain plans. </apex:outputtext>
                                                            
                                                            <h3 class="slds-section-title_divider slds-m-top_medium">
                                                                Invoice Fields from the Order
                                                                <apex:outputPanel styleClass="slds-form-element__icon" rendered="{!TrialOrg}">
                                                                    <a href="javascript:void(0);">
                                                                        <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'This Invoice Fields mapping is only available to customers on the Professional Plan and higher. During your free trial of Breadwinner, you can use this functionality, but if you subscribe to the Basic plan, then this will no longer be available.','117','18')" onmouseout="mouseoutclose();" />
                                                                        <span class="slds-assistive-text">Help</span>
                                                                    </a>
                                                                </apex:outputPanel>
                                                            </h3>
                                                            <div class="slds-text-color_weak slds-m-left_small slds-m-top_medium">
                                                                When creating Invoices from Orders and Order Products, we populate data in the Invoice from standard Salesforce fields. However, you might have your own 
                                                                field you'd like to use to prepopulate the Invoice. You can select your own custom fields below. If you'd like to use two or more fields, we suggest you combine them using a formula.
                                                            </div>
                                                            <div class="slds-text-body_small slds-m-top_small slds-m-left_small ">Invoice Fields are populated from the Order object. Please select a field or a formula field below. This only affects Invoices created from Orders.</div>
                                                            <div class="slds-m-top_small slds-m-left_small"><i>Please note</i>: <i>All mapped fields must be on the <a id="orderFieldsLink" href="" target="_blank" style="color: gray;text-decoration: underline;">Order</a></i>. <i>If you wish to map data on an object other than the Order</i>, <i>please create a formula field on the Order to pull in this data</i>.</div>
                                                            
                                                            <div class="slds-grid slds-wrap slds-m-left_small">
                                                                <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                    <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label" >Invoice Reference</label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList id="orderInvoiceReference" value="{!selectedFieldForOrderInvoiceReference}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                        <apex:selectOptions value="{!OrderToInvoicetextFields}"/>    
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label" >Invoice Date</label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList id="orderInvoiceDate" value="{!selectedFieldForOrderInvoiceDate}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                        <apex:selectOptions value="{!Orderinvoice_DateFields}"/>    
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                
                                                                <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                    <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label" >Invoice Due Date</label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList id="orderInvoiceDueDate" value="{!selectedFieldForOrderInvoiceDueDate}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                        <apex:selectOptions value="{!OrderToInvoicedateFields}"/>    
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label" >Invoice Branding Theme</label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList id="orderInvoiceBrandingTheme" value="{!selectedFieldForOrderInvoiceBrandingTheme}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                        <apex:selectOptions value="{!OrderToInvoiceBrandingThemeFields}"/>
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>
                                                        <!-- ------------------------ INVOICE FIELDS FROM THE ORDER SECTION END ------------------------- -->
                                                        
                                                        <!-- ------------------ INVOICE LINE ITEM FIELDS FROM THE ORDER PRODUCT SECTION ----------------- -->
                                                        <apex:outputPanel layout="block" rendered="{!AND(isBusinessOrHigher,isOrderEnabled,HasOrderLookup)}">
                                                            <h3 class="slds-section-title_divider slds-m-top_medium">
                                                                Invoice Line Item Fields from the Order Product
                                                            </h3>
                                                            
                                                            <div class="slds-text-color_weak slds-m-top_small slds-m-left_small">
                                                                <p>Invoice Line Items are normally populated from the Order Product fields. We presume you use the standard fields Description, Amount, Discount, and Quantity. However, you may wish to override these fields with your own custom fields. Additionally, you may want to populate the Account Revenue, Tax, and the optional Xero Tracking Category fields.</p>
                                                                <p class="slds-m-top_small">For the Account Revenue, Tax, and Tracking categories, you must provide values that already exist in Xero. For security and data accuracy reasons, if the match is not exact, we will leave that field blank on the Breadwinner New Invoice page, allowing you to manually populate it before committing to Xero. </p>   
                                                            </div>
                                                            <div class="slds-m-top_small slds-m-left_small">
                                                                <p class="slds-m-top_small"><i>Please note</i>: <i>All mapped fields must be on the <a id="orderProductFieldsLink" href="" target="_blank" style="color: gray;text-decoration: underline;">Order Product</a> . If you wish to map data on an object other than the Order Product</i>, <i>please create a formula field on the Order Product to pull in this data.</i></p>
                                                            </div>
                                                            
                                                            <div class="slds-grid slds-wrap slds-m-left_small">
                                                                <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                    <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label">Line Item Description - Override Field
                                                                                <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                                    <a href="javascript:void(0);">
                                                                                        <img style="margin-left: 5px;margin-bottom: 2px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Normally populated by Order Product Name and Description. You can select a Long Text Area Field but Xero will consider up to 4000 characters only as per the Xero Limitations.','100','18')" onmouseout="mouseoutclose();" />
                                                                                        <span class="slds-assistive-text">Help</span>
                                                                                    </a>
                                                                                </apex:outputPanel>
                                                                            </label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList id="oliDescription" value="{!OrderToInvoiceLineItem_Description}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--Use Default Standard Field--" itemValue="" />
                                                                                        <apex:selectOptions value="{!OrderToInvoiceLI_DescriptiontextFields}"/>
                                                                                        <apex:selectOptions value="{!OrderToInvoiceLI_LongTextAreaFields}"/>
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label">Line Item Quantity - Override Field
                                                                                <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                                    <a href="javascript:void(0);">
                                                                                        <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Normally populated by Order Product Quantity.','45','18')" onmouseout="mouseoutclose();" />
                                                                                        <span class="slds-assistive-text">Help</span>
                                                                                    </a>
                                                                                </apex:outputPanel>
                                                                            </label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList id="oliQuantity" value="{!OrderToInvoiceLineItem_Quantity}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--Use Default Standard Field--" itemValue=""></apex:selectOption>
                                                                                        <apex:selectOptions value="{!OrderToInvoiceLINumberFields}"/>    
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label">Line Item Amount - Override Field
                                                                                <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                                    <a href="javascript:void(0);">
                                                                                        <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Normally populated by Order Product Amount. ','45','18')" onmouseout="mouseoutclose();" />
                                                                                        <span class="slds-assistive-text">Help</span>
                                                                                    </a>
                                                                                </apex:outputPanel>
                                                                            </label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList id="oliAmount" value="{!OrderToInvoiceLineItem_Amount}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--Use Default Standard Field--" itemValue=""></apex:selectOption>
                                                                                        <apex:selectOptions value="{!OrderToInvoiceLINumberFields}"/>    
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label">Line Item Discount</label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList id="oliDiscount" value="{!OrderToInvoiceLineItem_Discount}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                        <apex:selectOptions value="{!OrderToInvoiceLINumPercentFields}" />
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                    <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label">Account Revenue
                                                                                <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                                    <a href="javascript:void(0);">
                                                                                        <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Must be a perfect match with the Xero value. ','45','18')" onmouseout="mouseoutclose();" />
                                                                                        <span class="slds-assistive-text">Help</span>
                                                                                    </a>
                                                                                </apex:outputPanel>
                                                                            </label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList id="oliAccountRevenue" value="{!OrderToInvoiceLineItem_AccountRevenue}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                        <apex:selectOptions value="{!OrderToInvoiceLItextFields}"/>
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label">Tax Rate
                                                                                <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                                    <a href="javascript:void(0);">
                                                                                        <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Must be a perfect match with the Xero value. ','45','18')" onmouseout="mouseoutclose();" />
                                                                                        <span class="slds-assistive-text">Help</span>
                                                                                    </a>
                                                                                </apex:outputPanel>
                                                                            </label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList id="oliTaxRate" value="{!OrderToInvoiceLineItem_TaxRate}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                        <apex:selectOptions value="{!OrderToInvoiceLItextFields}"/>    
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label">Tracking Category 1
                                                                                <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                                    <a href="javascript:void(0);">
                                                                                        <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Tracking Categories are optional fields which must be enabled first in Xero. It\'s possible these fields aren\'t used in your instance of Xero. These field\'s values must be a perfect match with the values in Xero. ','98','17')" onmouseout="mouseoutclose();" />
                                                                                        <span class="slds-assistive-text">Help</span>
                                                                                    </a>
                                                                                </apex:outputPanel>
                                                                            </label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList id="oliTrackingCategory1" value="{!OrderToInvoiceLineItem_TrackingCategory1}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                        <apex:selectOptions value="{!OrderToInvoiceLItextFields}"/>    
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-form-element slds-m-top_small">
                                                                            <label class="slds-form-element__label">Tracking Category 2
                                                                                <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                                    <a href="javascript:void(0);">
                                                                                        <img style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="identifyfield(this,'Tracking Categories are optional fields which must be enabled first in Xero. It\'s possible these fields aren\'t used in your instance of Xero. These field\'s values must be a perfect match with the values in Xero. ','98','17')" onmouseout="mouseoutclose();" />
                                                                                        <span class="slds-assistive-text">Help</span>
                                                                                    </a>
                                                                                </apex:outputPanel>
                                                                            </label>
                                                                            <div class="slds-form-element__control">
                                                                                <div class="slds-select_container">
                                                                                    <apex:selectList id="oliTrackingCategory2" value="{!OrderToInvoiceLineItem_TrackingCategory2}" size="1" styleClass="slds-select">
                                                                                        <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                        <apex:selectOptions value="{!OrderToInvoiceLItextFields}"/>    
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>
                                                        <!-- ---------------- INVOICE LINE ITEM FIELDS FROM THE ORDER PRODUCT SECTION END --------------- -->
                                                        
                                                        <!-- -------------------- Partial and Sequential Invoice Creation Section ----------------------- -->
                                                        <apex:outputPanel layout="block"  rendered="{!isBusinessOrHigher}">
                                                            <div class="slds-section" id="PartialInvSec" >
                                                                <h3 class="slds-section-title_divider slds-m-top_medium" style="padding: 0.19rem;">
                                                                    <button class="slds-button slds-section__title-action"  type="button" onclick="showHideSectionConent('PartialInvSec','PartialInvDivIdImage');" style="letter-spacing: .0625rem;text-transform: initial;">
                                                                        <img id="PartialInvDivIdImage" src="{!URLFOR($Resource.Breadwinner_Xero, 'Breadwinner_Xero/Images/SectionClose.png')}" style="margin-bottom: 3px;margin-right: 4px;" />
                                                                        <span style="text-transform: uppercase;">Partial and Sequential Invoice</span>
                                                                    </button>
                                                                </h3>
                                                                <div class="slds-section__content slds-m-left_small">
                                                                    <div class="slds-text-body_small slds-m-top_small slds-m-left_small ">
                                                                        Partial Invoices are created from only some of the Opportunity Products - those that are checked. Create a custom checkbox field (formula or regular checkbox) on the Opportunity Product. Only checked Opportunity Products will be passed to the Invoice
                                                                    </div>
                                                                    <div class="slds-grid slds-wrap slds-m-left_small">
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                            <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                                <div class="slds-form-element slds-m-top_small">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList id="partialInvoices" value="{!LineItem_Partial_Invoices}" size="1" styleClass="slds-select">
                                                                                            <apex:selectOption itemLabel="--None--" itemValue="" />
                                                                                            <apex:selectOptions value="{!OLICheckBoxFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div> 
                                                            </div>
                                                        </apex:outputPanel>
                                                        <!-- ------------------ Partial and Sequential Invoice Creation Section Ends -------------------- -->     
                                                    </apex:outputPanel>
                                                    <!-- ---------------------------------Breadwinner Wide Settings End --------------------------------- -->
                                                </apex:outputPanel>    
                                                <div style="display:{!IF(showInvoiceConfigSection, 'block', 'none')}" align="center" class="slds-m-top_large slds-m-bottom_large">
                                                    <apex:commandButton id="saveButton" value="Save" action="{!SaveChanges}" disabled="{!!isBreadwinnerAdministrator}" reRender="InvoiceConfigContent, InvoiceAccountCodes, pgmsg, CustomButtonsSection,CustomButtonsSection1" status="assign-action-status" styleClass="slds-button slds-button_brand"  oncomplete="HideStyleSheet();message();scrolltoTop();select2Init();reRenderRightSVGIcon();addLinkDynamically();"/>
                                                </div>                        
                                            </apex:outputPanel>
                                        </apex:outputPanel>                                        
                                    </div>
                                    <div id="SetupAndConfig-TAB3" class="slds-hide" aria-labelledby="BillsContent">
                                        
                                        <apex:outputPanel layout="block" rendered="{!AND(isAccountsPayableEnabled, listAppConfig.size>0, OR(isBreadwinnerAdministrator, canPerformBreadwinnerOperations))}">
                                            <div class="slds-page-header slds-m-bottom_medium" role="banner">
                                                <div class="slds-media slds-media_center">
                                                    <div class="slds-media__figure slds-media_center">
                                                        <svg aria-hidden="true" class="slds-icon slds-icon-standard-opportunity">
                                                            <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/standard-sprite/svg/symbols.svg#custom')}"></use>
                                                        </svg>
                                                    </div>
                                                    <div class="slds-media__body">
                                                        <p class="slds-page-header__title slds-truncate" title="Bills Configuration">Bills Configuration</p>
                                                        <p class="slds-text-body_small">Breadwinner  Xero </p>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <apex:actionFunction name="BillPassXeroOrgId" action="{!MultiOrgChanging}" status="assign-action-status"  reRender="BillPgMsg,BillsWholePanel" oncomplete="HideStyleSheet();message();" >
                                                <apex:param name="BillPassXeroOrgIdParam" value="" assignTo="{!SelectedOrg}"/>
                                            </apex:actionFunction>
                                            <apex:outputPanel id="BillsMenuFieldsSectionId" >
                                                <!-- ---------------------- Bills Menu Starts Here ------------------- -->
                                                
                                                <apex:outputPanel layout="block" id="BillMenuId" rendered="{!isMultiOrgEnabled}">
                                                    <ul class="slds-tabs_default__nav slds-m-bottom_large" role="tablist">
                                                        
                                                        <li class="slds-tabs_default__item slds-text-title_caps slds-is-active slds-truncate" title="Breadwinner Wide Settings" role="presentation">
                                                            <a class="slds-tabs_default__link"  role="tab" onclick=" SubTabsSelect(this, '','Bill');" tabindex="0" aria-selected="true" aria-controls="tab-default-1" id="tab-default-1__item">
                                                                Breadwinner Wide Settings
                                                            </a>
                                                        </li>
                                                        
                                                        <apex:repeat value="{!appConfigMap}" var="appC">
                                                            
                                                            <li class="slds-tabs_default__item slds-text-title_caps slds-truncate" title="{!appConfigMap[appC].Connecting_App_Name}" role="presentation">
                                                                <a class="slds-tabs_default__link" href="javascript:void(0);" role="tab" onclick=" SubTabsSelect(this, '{!appConfigMap[appC].Xero_Org_ID}','Bill'); " tabindex="0" aria-selected="true" aria-controls="{!appConfigMap[appC].Xero_Org_ID}" id="{!appConfigMap[appC].Xero_Org_ID}__item">
                                                                    {!appConfigMap[appC].Connecting_App_Name}
                                                                </a>
                                                            </li>
                                                        </apex:repeat>
                                                        
                                                    </ul>
                                                    
                                                </apex:outputPanel>
                                                <!-- ---------------------- Bills Menu ends Here ------------------- -->
                                                <apex:outputPanel layout="block" styleClass="slds-m-horizontal_small">
                                                    <apex:pageMessages id="BillPgMsg"></apex:pageMessages>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" id="BillsWholePanel" rendered="{!BillsORPo=='Bill'}">
                                                    
                                                    <apex:outputPanel layout="block" styleclass=" slds-m-horizontal_small" rendered="{!OR(AND(isMultiOrgEnabled,SelectedOrg!=null),NOT(isMultiOrgEnabled))}">
                                                        <div class="slds-clearfix">
                                                            <div class="slds-form-element slds-float_left">
                                                                <label class="slds-checkbox_toggle slds-grid">
                                                                    <span class="slds-form-element__label slds-m-bottom_none">Enable Bills Sync
                                                                        <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                            <a href="javascript:void(0);">
                                                                                <apex:image style="margin-left: 5px;margin-bottom: 4px;height:15px;width:15px;" url="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="helptextPosition(this,'You might also know Vendors as Suppliers. ','147','27')" onmouseout="mouseouthelp();"/>
                                                                                <span class="slds-assistive-text">Help</span>
                                                                            </a>
                                                                        </apex:outputPanel> 
                                                                        
                                                                    </span>
                                                                    <apex:inputCheckbox id="syncSuppliersBills" value="{!apcBPTab.Sync_Suppliers_Bills}" onclick="BillsOnOffFunctionapexBPTab(this.checked);" disabled="{!NOT(isBreadwinnerAdministrator)}"/>
                                                                    <span class="slds-checkbox_faux_container" aria-live="assertive" title="{!if(isBreadwinnerAdministrator,'','You should have Breadwinner Admin Permission set assigned to enable or disable it.')}">
                                                                        <span class="slds-checkbox_faux"></span>
                                                                        <span class="slds-checkbox_on">Enabled</span>
                                                                        <span class="slds-checkbox_off">Disabled</span>
                                                                    </span>
                                                                </label>
                                                            </div>
                                                        </div>
                                                        <apex:outputPanel layout="block" styleClass="infoM3 slds-m-top_small" style="border-radius:4px;" rendered="{!AND(NOT(apcBPTab.Is_Supplier_Sync_Completed) , apcBPTab.Sync_Suppliers_Bills, isAccountsPayableEnabled)}">
                                                            Please finish Suppliers Match from Setup tab
                                                        </apex:outputPanel>
                                                        
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" rendered="{!isBillsEnabled}">
                                                        <!-- -------------------- Xero Org wide Bills settings starts here --------------------- -->
                                                        <apex:outputPanel layout="block" rendered="{!AND(apcBPTab.Sync_Suppliers_Bills,OR(AND(isMultiOrgEnabled,SelectedOrg!=null),NOT(isMultiOrgEnabled)))}">
                                                            <div class="slds-m-horizontal_small">
                                                                
                                                                <div class="slds-section-title_divider slds-m-top_medium">Allow Bills to be created as Draft/Approved</div>
                                                                <div class="slds-text-body_small slds-m-top_x-small slds-m-left_small">
                                                                    <p>At least one or more of the two checkboxes must be checked. This will allow Breadwinner users to create Bill as Draft or Authorized</p>
                                                                </div>
                                                                <div class="slds-m-left_small slds-form-element">
                                                                    
                                                                    <div class="slds-form-element__control slds-m-top_x-small">
                                                                        <span class="slds-checkbox">
                                                                            <label class="slds-checkbox__label" >
                                                                                <apex:inputCheckbox id="createDraftBill" value="{!apcBPTab.Create_Draft_Bill}"/>
                                                                                <span class="slds-checkbox_faux"></span>
                                                                                <span class="slds-form-element__label slds-m-left_small">Show "Create Draft Bill in Xero" Button</span>
                                                                            </label>
                                                                        </span>
                                                                        <span class="slds-checkbox">
                                                                            <label class="slds-checkbox__label" >
                                                                                <apex:inputCheckbox id="createApprovedBill" value="{!apcBPTab.Create_Approved_Bill}" />
                                                                                <span class="slds-checkbox_faux"></span>
                                                                                <span class="slds-form-element__label slds-m-left_small">Show "Create Approved Bill in Xero" Button</span>
                                                                            </label>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                
                                                                <div class="slds-section-title_divider slds-m-top_medium">Bills Default Accounting Code</div>
                                                                <div class="slds-m-left_small slds-m-top_small">
                                                                    
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label" >Default Xero Accounting Payable Tax Type</label>
                                                                        <div class="slds-form-element__control">
                                                                            <div class="slds-select_container slds-size_1-of-1 slds-medium-size_2-of-6 slds-large-size_3-of-12">
                                                                                <apex:selectList size="1" value="{!apcBPTab.Default_Xero_Payable_Tax_Type}" styleClass="slds-select" id="defaultXeroTaxOptions">
                                                                                    <apex:selectOptions value="{!defaultXeroTaxOptions}"/>
                                                                                </apex:selectList>
                                                                            </div>
                                                                        </div>
                                                                    </div>                                                                
                                                                    
                                                                    <apex:actionFunction name="GetBillAccountCodes" rerender="AccountCodes,AccountCode" action="{!BillsPOsRevenuevisibility}"/>
                                                                    <apex:outputPanel id="AccountCodes" layout="block" styleclass="slds-form-element slds-m-top_medium">
                                                                        <label class="slds-form-element__label" >Default Xero Payable Accounting Code (Revenue Code)</label>
                                                                        <div class="slds-form-element__control">
                                                                            <apex:outputPanel rendered="{!if(defaultXeroAccountingAPOptions.size>1, true, false)}">
                                                                                <div class="slds-select_container  slds-size_1-of-1 slds-medium-size_2-of-6 slds-large-size_3-of-12">
                                                                                    <apex:selectList size="1" value="{!apcBPTab.Default_Xero_Payable_Accounting_Code}" id="AccountCode" styleClass="slds-select" rendered="{!if(defaultXeroAccountingAPOptions.size>1, true, false)}">
                                                                                        <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                        <apex:selectOptions value="{!defaultXeroAccountingAPOptions}"/>
                                                                                    </apex:selectList>
                                                                                </div>
                                                                            </apex:outputPanel>
                                                                            <apex:outputPanel layout="block" styleClass="slds-m-left_small slds-m-top_xx-small" rendered="{!if(defaultXeroAccountingAPOptions.size>1, false, true)}">
                                                                                No Revenue Codes showing? &nbsp;<apex:commandLink id="refreshXeroAccountCodes" action="{!refreshXeroAccountingDetails}" reRender="AccountCodes" status="assign-action-status" oncomplete="HideStyleSheet();message();BillRerenderAccountCodes();">Refresh them from Xero</apex:commandLink>
                                                                            </apex:outputPanel> 
                                                                        </div>
                                                                    </apex:outputPanel>                                                               
                                                                    
                                                                    <apex:outputPanel layout="block" id="BillAccountCodes">
                                                                        <div class="slds-form-element__control slds-m-top_medium">
                                                                            <span class="slds-checkbox">
                                                                                <label class="slds-checkbox__label" >
                                                                                    <apex:inputCheckbox id="fetchBillAccountCodes" value="{!apcBPTab.Display_Revenue_Accounts}" onchange="GetBillAccountCodes();"/>
                                                                                    <span class="slds-checkbox_faux"></span>
                                                                                    <span class="slds-form-element__label slds-m-right_small slds-m-left_small">Display Liabilities and Revenue Accounts on New Bill creation Page</span>
                                                                                </label>
                                                                            </span>
                                                                            <span class="slds-checkbox">
                                                                                <label class="slds-checkbox__label" >
                                                                                    <apex:inputCheckbox id="fetchBillAssetAccountCodes" value="{!apcBPTab.Display_Asset_Accounts_AP}" onchange="GetBillAccountCodes();"/>
                                                                                    <span class="slds-checkbox_faux"></span>
                                                                                    <span class="slds-form-element__label slds-m-right_small slds-m-left_small">Display Assets Accounts on New Bill creation Page</span>
                                                                                </label>
                                                                            </span>
                                                                        </div>
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </div>
                                                            
                                                        </apex:outputPanel>
                                                        <!-- -------------------- Xero Org wide Bills settings ends here ----------------------- -->
                                                        
                                                        <!-- -------------------- Breadwinner wide Bills settings starts here------------------- -->
                                                        <apex:outputPanel rendered="{!OR(AND(isMultiOrgEnabled,SelectedOrg==null),NOT(isMultiOrgEnabled))}" >
                                                            <!-- Multi org help Text -->
                                                            <apex:outputPanel layout="block" styleclass="slds-text-heading_small slds-m-horizontal_small" style="font-style: italic;" rendered="{!isMultiOrgEnabled}">
                                                                As you are using Breadwinner with Multiple Xero Orgs, we have split the Configuration section into multiple pages. This page is for settings that affect all of Breadwinner regardless of which Xero org. The other pages are for settings that affect just one of your many Xero orgs.
                                                            </apex:outputPanel>
                                                            <div class="slds-m-horizontal_small slds-m-top_medium">
                                                                <div class="slds-section-title_divider"> Bill Default Fields</div>
                                                                <div class="slds-grid slds-wrap slds-m-left_small">
                                                                    
                                                                    <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                        
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 ">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" >Bill Reference</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.Bill_Opportunity_Reference}" size="1" styleClass="slds-select" id="billReference">
                                                                                            <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOOppTextFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" >Bill Date</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.Bill_Opportunity_Date}" size="1" styleClass="slds-select" id="billDate">
                                                                                            <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOOppDateFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                    </div>
                                                                    
                                                                    <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                        
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" >Bill Due Date</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.Bill_Opportunity_Due_Date}" size="1" styleClass="slds-select" id="billDueDate">
                                                                                            <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOOppDateFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" >Bill Branding Theme</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.Bill_Opportunity_Branding_Theme}" size="1" styleClass="slds-select" id="billBrandingTheme">
                                                                                            <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOOppTextFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                    </div>
                                                                    
                                                                </div>
                                                            </div>
                                                            
                                                            <div class="slds-m-horizontal_small slds-m-top_medium">
                                                                <div class="slds-section-title_divider"> Bill Default Line Item Fields</div>
                                                                <div class="slds-grid slds-wrap slds-m-left_small">
                                                                    
                                                                    <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                        
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 ">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" >Bill Supplier Account <span style="color:red">(Required)</span></label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.Default_Bill_Supplier_Account}" size="1" styleClass="slds-select" id="billSuppliersList">
                                                                                            <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOSupplierAccountFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" >Bill Line Item Supplier Price <span style="color:red">(Required)</span></label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.Bill_Opportunity_Line_Item_Price}" size="1" styleClass="slds-select" id="billLIPrice">
                                                                                            <apex:selectOption itemLabel="--Use Default Standard Field--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOSupplierPriceFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" >Bill Line Item Quantity</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.Bill_Opportunity_Line_Item_Quantity}" size="1" styleClass="slds-select" id="billLIQuantity">
                                                                                            <apex:selectOption itemLabel="--Use Default Standard Field--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOSupplierPriceFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" >Bill Line Item Inventory Code</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.Bill_Opp_Line_Item_InventoryCode}" size="1" styleClass="slds-select" id="billLIInventoryCode">
                                                                                            <apex:selectOption itemLabel="--Use Default Standard Field--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOStringFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" >Bill Line Item Description
                                                                                    <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                                        <a href="javascript:void(0);">
                                                                                            <img style="margin-left: 5px;margin-bottom: 2px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="helptextPosition(this,'You can select a Long Text Area Field but Xero will consider up to 4000 characters only as per the Xero Limitations.','185','25')" onmouseout="mouseouthelp();" />
                                                                                            <span class="slds-assistive-text">Help</span>
                                                                                        </a>
                                                                                    </apex:outputPanel>
                                                                                </label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.Bill_Opportunity_Line_Item_Description}" size="1" styleClass="slds-select" id="billLIDescription">
                                                                                            <apex:selectOption itemLabel="--Use Default Standard Field--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOStringFields}"/>
                                                                                            <apex:selectOptions value="{!BillPOTextAreaLongFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    
                                                                    <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                        
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" >Bill Line Item Account Revenue</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.Bill_Opp_Line_Item_Account_Revenue}" size="1" styleClass="slds-select" id="billLIAccountRevenue">
                                                                                            <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOStringFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" >Bill Line Item Tax Rate</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.Bill_Opportunity_Line_Item_TaxRate}" size="1" styleClass="slds-select" id="billLITaxRate">
                                                                                            <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOStringFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" >Bill Line Item Tracking Category 1</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.Bill_Opp_Line_Item_Tracking_Category1}" size="1" styleClass="slds-select" id="billLITrackingCategory1">
                                                                                            <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOStringFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" >Bill Line Item Tracking Category 2</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.Bill_Opp_Line_Item_Tracking_Category2}" size="1" styleClass="slds-select" id="billLITrackingCategory2">
                                                                                            <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOStringFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                    </div>
                                                                    
                                                                </div>
                                                            </div>
                                                            <div id="urlgen" class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_x-large">
                                                                <apex:outputPanel layout="block" styleclass="slds-m-horizontal_large" rendered="{!(isBreadwinnerAdministrator && isEnterprise)}">
                                                                    <apex:outputLink id="customBillURLLink" value="{!URLFOR($Page.Bread_Winner__CustomURLGenerator)}"> Click here</apex:outputLink>&nbsp;to go to custom Bill URL generation page.
                                                                </apex:outputPanel>
                                                            </div>
                                                        </apex:outputPanel>
                                                        
                                                        <!-- -------------------- Breadwinner wide Bills settings ends here -------------------- -->
                                                        
                                                        <div class="slds-m-top_medium slds-m-bottom_medium" align="center">
                                                            <!-- <apex:commandLink value="Save and Proceed to Suppliers Sync" action="{!saveBPConfigs}" styleClass="slds-button slds-button--brand" reRender="BillPgMsg,BillsWholePanel" rendered="{!AND(NOT(apcBPTab.Is_Supplier_Sync_Completed__c==false) , apcBPTab.Sync_Suppliers_Bills)}" oncomplete="HideStyleSheet();message();" /> -->
                                                            <apex:commandButton id="billSaveBtn" value="Save" action="{!saveBPConfigs}" status="assign-action-status" styleClass="slds-button slds-button_brand" reRender="BillPgMsg,BillsWholePanel" oncomplete="HideStyleSheet();message();scrolltoTop();" disabled="{!NOT(isBreadwinnerAdministrator)}" rendered="{!AND(OR(AND(isMultiOrgEnabled,SelectedOrg!=null,apcBPTab.Sync_Suppliers_Bills),AND(isMultiOrgEnabled,SelectedOrg==null),NOT(isMultiOrgEnabled)))}"/>
                                                        </div>
                                                    </apex:outputPanel>
                                                    <div class="slds-p-horizontal_small">
                                                        <apex:pagemessage id="infomsg" severity="Info" summary="Please Enable Bills! " rendered="{!AND(isBillsEnabled==false,SelectedOrg==null,isMultiOrgEnabled)}" ></apex:pagemessage>
                                                    </div>
                                                </apex:outputPanel>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                        
                                        <apex:actionFunction name="BillsOnOffFunctionapexBPTab" action="{!allowBillsPOsSync}" status="assign-action-status" rerender="BillsWholePanel,SynView,MutliOrgAccountSyncView,accountSyncPanel,DefaultBillAccCodes1,DefaultBillAccCodes,BillPgMsg,syncIcons,setupArrowPath" oncomplete="reRendercheckmarkSVGIcons();HideStyleSheet();message();BillRerenderAccountCodes();">             
                                            <apex:param id="BillsValue" name="AllowBillssync" value="" />        
                                        </apex:actionFunction>
                                        <apex:actionFunction name="BillRerenderAccountCodesAF"  rerender="AccountCodes" oncomplete="HideStyleSheet();message();" >             
                                        </apex:actionFunction>
                                        <script>
                                        function BillRerenderAccountCodes(){
                                            window.setTimeout(BillRerenderAccountCodesAF,10000)
                                        }
                                        </script>
                                        
                                    </div>
                                    <div id="SetupAndConfig-TAB4" class="slds-hide" aria-labelledby="POsContent">
                                        
                                        <apex:outputPanel layout="block"  rendered="{!AND(isAccountsPayableEnabled, listAppConfig.size>0, OR(isBreadwinnerAdministrator, canPerformBreadwinnerOperations))}">
                                            <div class="slds-page-header slds-m-bottom_medium" role="banner">
                                                <div class="slds-media slds-media_center">
                                                    <div class="slds-media__figure slds-media_center">
                                                        <svg aria-hidden="true" class="slds-icon slds-icon-standard-opportunity">
                                                            <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/standard-sprite/svg/symbols.svg#custom')}"></use>
                                                        </svg>
                                                    </div>
                                                    <div class="slds-media__body">
                                                        <p class="slds-page-header__title slds-truncate" title="Purchase Orders Configuration">Purchase Orders Configuration</p>
                                                        <p class="slds-text-body_small">Breadwinner  Xero </p>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <apex:actionFunction name="PoPassXeroOrgId" action="{!MultiOrgChanging}" status="assign-action-status"  reRender="PoPgMsg,PosWholePanel" oncomplete="HideStyleSheet();message();" >
                                                <apex:param name="POPassXeroOrgIdParam" value="" assignTo="{!SelectedOrg}"/>
                                            </apex:actionFunction>
                                            <apex:outputPanel id="PoMenuFieldsSectionId" >
                                                <!-- ---------------------- Pos Menu Starts Here ------------------- -->
                                                
                                                <apex:outputPanel id="PoMenuId" rendered="{!isMultiOrgEnabled}">
                                                    <ul class="slds-tabs_default__nav slds-m-bottom_large" role="tablist">
                                                        
                                                        <li class="slds-tabs_default__item slds-text-title_caps slds-is-active slds-truncate" title="Breadwinner Wide Settings" role="presentation">
                                                            <a class="slds-tabs_default__link"  role="tab" onclick=" SubTabsSelect(this, '','Po');" tabindex="0" aria-selected="true" aria-controls="tab-default-1" id="tab-default-1__item">
                                                                Breadwinner Wide Settings
                                                            </a>
                                                        </li>
                                                        
                                                        <apex:repeat value="{!appConfigMap}" var="appC">
                                                            
                                                            <li class="slds-tabs_default__item slds-text-title_caps slds-truncate" title="{!appConfigMap[appC].Connecting_App_Name}" role="presentation">
                                                                <a class="slds-tabs_default__link" href="javascript:void(0);" role="tab" onclick=" SubTabsSelect(this, '{!appConfigMap[appC].Xero_Org_ID}','Po'); " tabindex="0" aria-selected="true" aria-controls="{!appConfigMap[appC].Xero_Org_ID}" id="{!appConfigMap[appC].Xero_Org_ID}__item">
                                                                    {!appConfigMap[appC].Connecting_App_Name}
                                                                </a>
                                                            </li>
                                                        </apex:repeat>
                                                        
                                                    </ul>
                                                    
                                                </apex:outputPanel>
                                                <!-- ---------------------- Pos Menu ends Here ------------------- -->
                                                <apex:outputPanel layout="block" styleClass="slds-m-horizontal_small">
                                                    <apex:pageMessages id="PoPgMsg"></apex:pageMessages>
                                                </apex:outputPanel>
                                                <apex:outputPanel id="PosWholePanel" rendered="{!BillsORPo=='PO'}">
                                                    
                                                    <apex:outputPanel layout="block" styleclass="slds-m-horizontal_small slds-m-top_medium" rendered="{!OR(AND(isMultiOrgEnabled,SelectedOrg!=null),NOT(isMultiOrgEnabled))}">
                                                        <div class="slds-clearfix">
                                                            <div class="slds-form-element slds-float_left ">
                                                                <label class="slds-checkbox_toggle slds-grid ">
                                                                    <span class="slds-form-element__label slds-m-bottom_none">Enable Purchase Orders Sync</span>
                                                                    <apex:inputCheckbox id="syncPOs" value="{!apcBPTab.Sync_POs}" onclick="POsOnOffFunctionapexBPTab(this.checked);" disabled="{!NOT(isBreadwinnerAdministrator)}" />
                                                                    <span class="slds-checkbox_faux_container" aria-live="assertive" title="{!if(isBreadwinnerAdministrator,'','You should have Breadwinner Admin Permission set assigned to enable or disable it.')}">
                                                                        <span class="slds-checkbox_faux"></span>
                                                                        <span class="slds-checkbox_on">Enabled</span>
                                                                        <span class="slds-checkbox_off">Disabled</span>
                                                                    </span>
                                                                </label>
                                                            </div>
                                                        </div>
                                                        <apex:outputPanel layout="block" styleClass="infoM3 slds-m-top_small" style="border-radius:4px;" rendered="{!AND(NOT(apcBPTab.Is_PO_Contact_Sync_Completed) , apcBPTab.Sync_POs, isAccountsPayableEnabled)}">
                                                            Please finish Xero Contacts with Purchase Orders Match from Setup tab
                                                        </apex:outputPanel>
                                                        
                                                    </apex:outputPanel>
                                                    <apex:outputPanel rendered="{!isPosEnabled}">
                                                        <!-- -------------------- Xero Org wide Pos settings starts here --------------------- -->
                                                        <apex:outputPanel layout="block" rendered="{!AND(apcBPTab.Sync_POs,OR(AND(isMultiOrgEnabled,SelectedOrg!=null),NOT(isMultiOrgEnabled)))}">
                                                            <div class="slds-m-horizontal_small">
                                                                
                                                                <div class="slds-section-title_divider slds-m-top_medium">Allow Purchase Order to be created as Draft/Approved</div>
                                                                <div class="slds-text-body_small slds-m-top_x-small slds-m-left_small">
                                                                    <p>At least one or more of the two checkboxes must be checked. This will allow Breadwinner users to create Purchase Order as Draft or Authorized</p>
                                                                </div>
                                                                <div class="slds-m-left_small">                                                                
                                                                    <div class="slds-form-element__control slds-m-top_x-small">
                                                                        <span class="slds-checkbox">
                                                                            <label class="slds-checkbox__label" >
                                                                                <apex:inputCheckbox id="createDraftPO" value="{!apcBPTab.Create_Draft_PO}"/>
                                                                                <span class="slds-checkbox_faux"></span>
                                                                                <span class="slds-form-element__label slds-m-left_small">Show "Create Draft Purchase Order in Xero" Button</span>
                                                                            </label>
                                                                        </span>
                                                                        <span class="slds-checkbox">
                                                                            <label class="slds-checkbox__label" >
                                                                                <apex:inputCheckbox id="createSubmittedPO" value="{!apcBPTab.Create_Submitted_PO}" />
                                                                                <span class="slds-checkbox_faux"></span>
                                                                                <span class="slds-form-element__label slds-m-left_small">Show "Create Purchase Order in Xero and Submit for Approval" Button</span>
                                                                            </label>
                                                                        </span>
                                                                        <span class="slds-checkbox">
                                                                            <label class="slds-checkbox__label" >
                                                                                <apex:inputCheckbox id="createApprovedPO" value="{!apcBPTab.Create_Approved_PO}" />
                                                                                <span class="slds-checkbox_faux"></span>
                                                                                <span class="slds-form-element__label slds-m-left_small">Show "Create Approved Purchase Order in Xero" Button</span>
                                                                            </label>
                                                                        </span>                                                                    
                                                                    </div>
                                                                </div>
                                                                
                                                                <div class="slds-section-title_divider slds-m-top_medium">Purchase Order Default Accounting Code</div>
                                                                <div class="slds-m-left_small slds-m-top_small">
                                                                    
                                                                    <div class="slds-form-element">
                                                                        <label class="slds-form-element__label" >Default Xero Purchase Order Tax Type</label>
                                                                        <div class="slds-form-element__control">
                                                                            <div class="slds-select_container slds-size_1-of-1 slds-medium-size_2-of-6 slds-large-size_3-of-12">
                                                                                <apex:selectList size="1" value="{!apcBPTab.Default_Xero_PO_Tax_Type}" styleClass="slds-select" id="defaultPOXeroTaxOptions">
                                                                                    <apex:selectOptions value="{!defaultXeroTaxOptions}"/>
                                                                                </apex:selectList>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    
                                                                    <apex:actionFunction name="GetAccountCodes" rerender="POsAccountCodes,POAccountCodes,POAccountCode"  action="{!BillsPOsRevenuevisibility}"/>
                                                                    <apex:outputPanel id="POsAccountCodes" layout="block" styleclass="slds-form-element slds-m-top_medium">
                                                                        <label class="slds-form-element__label" >Default Xero Purchase Order Accounting Code (Revenue Code)</label>
                                                                        <div class="slds-form-element__control">
                                                                            <div class="slds-select_container slds-size_1-of-1 slds-medium-size_2-of-6 slds-large-size_3-of-12">
                                                                                <apex:selectList size="1" value="{!apcBPTab.Default_Xero_PO_Accounting_Code}" id="POAccountCode" styleClass="slds-select" rendered="{!if(defaultXeroAccountingAPOptions.size>1, true, false)}">
                                                                                    <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                    <apex:selectOptions value="{!defaultXeroAccountingAPOptions}"/>
                                                                                </apex:selectList>
                                                                            </div>
                                                                            <apex:outputPanel layout="block" styleClass="slds-m-left_small slds-m-top_xx-small" rendered="{!if(defaultXeroAccountingAPOptions.size>1, false, true)}">
                                                                                No Revenue Codes showing? &nbsp;<apex:commandLink id="refreshPOXeroAccountingDetails" action="{!refreshXeroAccountingDetails}" reRender="POsAccountCodes" status="assign-action-status" oncomplete="HideStyleSheet();message();RerenderAccountCodes();">Refresh them from Xero</apex:commandLink>
                                                                            </apex:outputPanel>
                                                                        </div>
                                                                    </apex:outputPanel>
                                                                    
                                                                    <apex:outputPanel layout="block" id="POAccountCodes">
                                                                        <div class="slds-form-element__control slds-m-top_medium">
                                                                            <span class="slds-checkbox">
                                                                                <label class="slds-checkbox__label" >
                                                                                    <apex:inputCheckbox id="PORevenueAccounts" value="{!apcBPTab.Display_Revenue_Accounts}" onchange="GetAccountCodes();"/>
                                                                                    <span class="slds-checkbox_faux"></span>
                                                                                    <span class="slds-form-element__label slds-m-right_small slds-m-left_small">Display Liabilities and Revenue Accounts on New PO creation Page</span>
                                                                                </label>
                                                                            </span>
                                                                            <span class="slds-checkbox">
                                                                                <label class="slds-checkbox__label" >
                                                                                    <apex:inputCheckbox id="POAssetsAccounts" value="{!apcBPTab.Display_Asset_Accounts_AP}" onchange="GetAccountCodes();"/>
                                                                                    <span class="slds-checkbox_faux"></span>
                                                                                    <span class="slds-form-element__label slds-m-right_small slds-m-left_small">Display Assets Accounts on New PO creation Page</span>
                                                                                </label>
                                                                            </span>
                                                                        </div>
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </div>
                                                            
                                                        </apex:outputPanel>
                                                        <!-- -------------------- Xero Org wide Pos settings ends here ----------------------- -->
                                                        
                                                        <!-- -------------------- Breadwinner wide Pos settings starts here------------------- -->
                                                        <apex:outputPanel rendered="{!OR(AND(isMultiOrgEnabled,SelectedOrg==null),NOT(isMultiOrgEnabled))}" >
                                                            <!-- Multi org help Text -->
                                                            <apex:outputPanel layout="block" styleclass="slds-text-heading_small slds-m-horizontal_small" style="font-style: italic;" rendered="{!isMultiOrgEnabled}">
                                                                As you are using Breadwinner with Multiple Xero Orgs, we have split the Configuration section into multiple pages. This page is for settings that affect all of Breadwinner regardless of which Xero org. The other pages are for settings that affect just one of your many Xero orgs.
                                                            </apex:outputPanel>
                                                            <div class="slds-m-horizontal_small slds-m-top_medium">
                                                                <div class="slds-section-title_divider"> Purchase Order Default Fields</div>
                                                                <div class="slds-grid slds-wrap slds-m-left_small">
                                                                    
                                                                    <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                        
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 ">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" >Purchase Order Reference</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.PO_Opportunity_Reference}" size="1" styleClass="slds-select" id="POReference">
                                                                                            <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOOppTextFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" >Purchase Order Date</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.PO_Opportunity_Date}" size="1" styleClass="slds-select" id="PODate">
                                                                                            <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOOppDateFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" >Purchase Order Delivery Date</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.PO_Opportunity_Delivery_Date}" size="1" styleClass="slds-select" id="PODeliverydate">
                                                                                            <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOOppDateFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" >Purchase Order Branding Theme</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.PO_Opportunity_Branding_Theme}" size="1" styleClass="slds-select" id="POBrandingTheme">
                                                                                            <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOOppTextFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div> 
                                                                    </div>
                                                                    
                                                                    <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                        
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" >Purchase Order Delivery Address</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.PO_Opportunity_Delivery_Address}" size="1" styleClass="slds-select" id="PODeliveryAddress">
                                                                                            <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOOppTextFields}"/>    
                                                                                            <apex:SelectOptions Value="{!POShippingAddressOptions}"/>
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" >Purchase Order Attention</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.PO_Attention}" size="1" styleClass="slds-select" id="POAttention">
                                                                                            <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOOppTextFields}"/>    
                                                                                            <apex:selectoptions value="{!POAttentionToOptions}"/>
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" >Purchase Order Telephone</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.PO_Telephone}" size="1" styleClass="slds-select" id="POTelephone">
                                                                                            <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOOppTextFields}"/>    
                                                                                            <apex:selectOptions value="{!POTelephoneOptions}"/>  
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" style="white-space: nowrap;">Purchase Order Delivery Instructions</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.PO_Delivery_Instructions}" size="1" styleClass="slds-select" id="PODeliveryInstructions">
                                                                                            <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOOppTextFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                    </div>
                                                                    
                                                                </div>
                                                            </div>
                                                            
                                                            <div class="slds-m-horizontal_small slds-m-top_medium">
                                                                <div class="slds-section-title_divider"> Purchase Order Default Line Item Fields</div>
                                                                <div class="slds-grid slds-wrap slds-m-left_small">
                                                                    
                                                                    <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                        
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 ">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" style="white-space: nowrap;">Purchase Order Supplier Account <span style="color:red">(Required)</span></label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.Default_PO_Supplier_Account}" size="1" styleClass="slds-select" id="POSuppliersList">
                                                                                            <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOSupplierAccountFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" style="white-space: nowrap;">Purchase Order Line Item Supplier Price <span style="color:red">(Required)</span></label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.PO_Opportunity_Line_Item_Price}" size="1" styleClass="slds-select" id="POLISupplierPrice">
                                                                                            <apex:selectOption itemLabel="--Use Default Standard Field--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOSupplierPriceFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" style="white-space: nowrap;">Purchase Order Line Item Quantity</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.PO_Opportunity_Line_Item_Quantity}" size="1" styleClass="slds-select" id="POLIQuantity">
                                                                                            <apex:selectOption itemLabel="--Use Default Standard Field--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOSupplierPriceFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" style="white-space: nowrap;">Purchase Order Line Item Inventory Code</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.PO_Opp_Line_Item_InventoryCode}" size="1" styleClass="slds-select" id="POLIInventoryCode">
                                                                                            <apex:selectOption itemLabel="--Use Default Standard Field--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOStringFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" style="white-space: nowrap;">Purchase Order Line Item Description
                                                                                    <apex:outputPanel styleClass="slds-form-element__icon" >
                                                                                        <a href="javascript:void(0);">
                                                                                            <img style="margin-left: 5px;margin-bottom: 2px;height:15px;width:15px;" src="{!URLFOR($Resource.Bread_Winner__Breadwinner_Xero, 'Breadwinner_Xero/Images/InfoLightning.png')}" onmouseover="helptextPosition(this,'You can select a Long Text Area Field but Xero will consider up to 4000 characters only as per the Xero Limitations.','185','25')" onmouseout="mouseouthelp();" />
                                                                                            <span class="slds-assistive-text">Help</span>
                                                                                        </a>
                                                                                    </apex:outputPanel>
                                                                                </label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.PO_Opportunity_Line_Item_Description}" size="1" styleClass="slds-select" id="POLIDescription">
                                                                                            <apex:selectOption itemLabel="--Use Default Standard Field--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOStringFields}"/>
                                                                                            <apex:selectOptions value="{!BillPOTextAreaLongFields}"/>   
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" style="white-space: nowrap;">Purchase Order Line Item Discount</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.PO_Opportunity_Line_Item_Discount}" size="1" styleClass="slds-select" id="POLIDiscount">
                                                                                            <apex:selectOption itemLabel="--Use Default Standard Field--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOSupplierPricePercentFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    
                                                                    <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                                        
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" style="white-space: nowrap;">Purchase Order Line Item Account Revenue</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.PO_Opp_Line_Item_Account_Revenue}" size="1" styleClass="slds-select" id="POLIAccountRevenue">
                                                                                            <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOStringFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" style="white-space: nowrap;">Purchase Order Line Item Tax Rate</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.PO_Opportunity_Line_Item_TaxRate}" size="1" styleClass="slds-select" id="POLITaxRate">
                                                                                            <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOStringFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                        
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" style="white-space: nowrap;">Purchase Order Line Item Tracking Category 1</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.PO_Opp_Line_Item_Tracking_Category1}" size="1" styleClass="slds-select" id="POLITrackingCategory1">
                                                                                            <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOStringFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_small">
                                                                            <div class="slds-form-element">
                                                                                <label class="slds-form-element__label" style="white-space: nowrap;">Purchase Order Line Item Tracking Category 2</label>
                                                                                <div class="slds-form-element__control">
                                                                                    <div class="slds-select_container">
                                                                                        <apex:selectList value="{!bwsettingWrapper.PO_Opp_Line_Item_Tracking_Category2}" size="1" styleClass="slds-select" id="POLITrackingCategory2">
                                                                                            <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                                            <apex:selectOptions value="{!BillPOStringFields}"/>    
                                                                                        </apex:selectList>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        
                                                                    </div>
                                                                    
                                                                </div>
                                                            </div>
                                                            <div id="urlgen" class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2 slds-m-top_x-large">
                                                                <apex:outputPanel layout="block" styleclass="slds-m-horizontal_large" rendered="{!(isBreadwinnerAdministrator && isEnterprise)}">
                                                                    <apex:outputLink id="customPOURLLink" value="{!URLFOR($Page.Bread_Winner__CustomURLGenerator)}"> Click here</apex:outputLink>&nbsp;to go to custom PO URL generation page.
                                                                </apex:outputPanel>
                                                            </div>
                                                        </apex:outputPanel>
                                                        
                                                        <!-- -------------------- Breadwinner wide Pos settings ends here -------------------- -->
                                                        
                                                        <div class="slds-m-top_medium slds-m-bottom_medium" align="center">
                                                            <!-- apex:commandLink value="Save and Proceed to Suppliers Sync" action="{!saveBPConfigs}" styleClass="slds-button slds-button--brand" reRender="BillPgMsg,BillsWholePanel" rendered="{!AND(NOT(apcBPTab.Is_PO_Contact_Sync_Completed__c) , apcBPTab.Sync_POs__c, isBusinessOrHigher)}" oncomplete="HideStyleSheet();message();" / -->
                                                            <apex:commandButton id="POSaveBtn" value="Save" action="{!saveBPConfigs}" status="assign-action-status" styleClass="slds-button slds-button_brand" reRender="PosWholePanel,PoPgMsg"  oncomplete="HideStyleSheet();message();scrolltoTop();" disabled="{!NOT(isBreadwinnerAdministrator)}" rendered="{!AND(OR(AND(isMultiOrgEnabled,SelectedOrg!=null,apcBPTab.Sync_POs),AND(isMultiOrgEnabled,SelectedOrg==null),NOT(isMultiOrgEnabled)))}" />
                                                        </div>
                                                    </apex:outputPanel>
                                                    <div class="slds-p-horizontal_small">
                                                        <apex:pagemessage id="infoPO" severity="Info" summary="Please Enable POs! " rendered="{!AND(isPosEnabled==false,SelectedOrg==null,isMultiOrgEnabled)}" ></apex:pagemessage>
                                                    </div>
                                                </apex:outputPanel>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                        
                                        <apex:actionFunction name="POsOnOffFunctionapexBPTab"  action="{!allowBillsPOsSync}" status="assign-action-status" rerender="PosWholePanel,SynView,MutliOrgAccountSyncView,accountSyncPanel,DefaultPOAccCodes,DefaultPOAccCodes1,PoPgMsg,syncIcons,setupArrowPath"  oncomplete="reRendercheckmarkSVGIcons();HideStyleSheet();message();RerenderAccountCodes();">           
                                            <apex:param id="PosValue" name="AllowPOssync" value="" />
                                        </apex:actionFunction>
                                        <apex:actionFunction name="RerenderAccountCodesAF"  rerender="POsAccountCodes, DefaultPOAccCodes" oncomplete="HideStyleSheet();message();">             
                                        </apex:actionFunction>
                                        <script>
                                        function RerenderAccountCodes(){
                                            window.setTimeout(RerenderAccountCodesAF,10000)
                                        }                
                                        </script>
                                    </div>
                                    <div id="missionControlConfigTab" class="slds-hide" aria-labelledby="missionControlContent">
                                        <!-- -----------------------------Mission Control Tab header start ---------------------------->
                                        <div class="slds-page-header slds-m-bottom_medium" role="banner">
                                            <div class="slds-media slds-media_center">
                                                <div class="slds-media__figure">
                                                    <svg aria-hidden="true" class="slds-icon slds-icon-standard-opportunity">
                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/standard-sprite/svg/symbols.svg#custom')}"></use>
                                                    </svg>
                                                </div>
                                                <div class="slds-media__body">
                                                    <p class="slds-page-header__title slds-truncate" title="Mission Control Configuration">Mission Control Configuration</p>
                                                    <p class="slds-text-body_small">Breadwinner  Xero </p>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- -----------------------------Mission Control Tab header END ---------------------------->
                                        <!-- -------------------- Mission Control settings starts here------------------- -->
                                        <apex:outputPanel id="missionControlBlock">
                                            <div class="slds-m-horizontal_small slds-m-top_medium">
                                                <apex:pagemessages id="saveMissionControlSettings"/>                                                
                                                <div class="slds-section-title_divider slds-m-top_medium"> AUTO-CREATE A MISSION CONTROL PAYMENT</div>
                                                <div class="slds-m-left_small slds-m-top_medium slds-form-element">
                                                    <div class="slds-form-element__control slds-m-top_x-small">
                                                        <span class="slds-checkbox">
                                                            <label class="slds-checkbox__label" >
                                                                <apex:inputCheckbox value="{!bwsettingWrapper.Mission_Control_Payments_Auto_Creation}"/>
                                                                <span class="slds-checkbox_faux"></span>
                                                                <span class="slds-form-element__label">Automatically create the Mission Control Payment record when a Payment is received in Xero</span>
                                                            </label>                                                                    
                                                        </span>
                                                        <label class="slds-form-element__label slds-m-top_small" > Whenever a Payment is received for the Invoice that was created from Billing Event Object, Breadwinner will auto-create a Mission Control Payment record. And every time the Payment record is updated/deleted in Xero, then the respective Mission Control Payment record with the same name will be updated/deleted. </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                        
                                        <!-- -------------------- Mission Control settings ends here------------------- -->
                                        <apex:outputPanel >
                                            <div class="slds-m-top_large" align="center">
                                                <apex:commandButton action="{!saveMissionControlConfig}" styleClass="slds-button slds-button_brand" status="assign-action-status" value="Save" disabled="{!NOT(isBreadwinnerAdministrator)}" reRender="saveMissionControlSettings" oncomplete="HideStyleSheet();message();"/>
                                            </div>
                                        </apex:outputPanel>
                                    </div>
                                    <div id="SetupAndConfig-TAB5" class="slds-hide" aria-labelledby="XeroContactsContent">
                                        <!-- -----------------------------XeroContacts Tab header start ---------------------------->
                                        <div class="slds-page-header slds-m-bottom_medium" role="banner">
                                            <div class="slds-media slds-media_center">
                                                <div class="slds-media__figure">
                                                    <svg aria-hidden="true" class="slds-icon slds-icon-standard-opportunity">
                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/standard-sprite/svg/symbols.svg#custom')}"></use>
                                                    </svg>
                                                </div>
                                                <div class="slds-media__body">
                                                    <p class="slds-page-header__title slds-truncate" title="Xero Contacts Configuration">Xero Contacts Configuration</p>
                                                    <p class="slds-text-body_small">Breadwinner  Xero </p>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- -----------------------------XeroContacts Tab header END ---------------------------->
                                        <!-- -------------------- Breadwinner wide XeroContacts settings starts here------------------- -->
                                        <apex:outputPanel id="xeroContactsBlock">
                                            <div class="slds-m-horizontal_small slds-m-top_medium">
                                                <apex:pagemessages id="saveXeroContactSettings"/>
                                                <apex:outputPanel rendered="{!AND(!isFreePlan, isBusinessOrHigher)}">
                                                    <div class="slds-section-title_divider"> Pre-populate Xero Contact Fields</div>
                                                    <div class="slds-m-left_x-small slds-m-vertical_small slds-text-color_weak">When Breadwinner creates a Xero Contact as part of the Invoice Creation process, populate:</div>
                                                    <div class="slds-form-element slds-m-left_small slds-m-top_small slds-size_3-of-6">
                                                        <label class="slds-form-element__label" >{!if(SFOrgDefaultCurrency == 'AUD','Tax/VAT','Tax/GST')} Number with Salesforce Account custom field</label>
                                                        <div class="slds-form-element__control">
                                                            <div class="slds-select_container">
                                                                <apex:selectList value="{!bwsettingWrapper.Default_Xero_Contact_Tax_Number}" size="1" styleClass="slds-select">
                                                                    <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                    <apex:selectOptions value="{!XeroContactTaxNumberOptions}"/>    
                                                                </apex:selectList>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel rendered="{!AND(isMultiOrgEnabled, ConnectedXeroOrgIds.size>1)}">
                                                    <div class="slds-section-title_divider slds-m-top_medium"> DEFAULT XERO ORG SELECTION</div>
                                                    <div class="slds-m-left_x-small slds-m-vertical_small slds-text-color_weak">By default, you can pre-populate a Xero Org while creating a Xero Contact.</div>
                                                    <div class="slds-form-element slds-m-left_small slds-m-top_small slds-size_3-of-6">
                                                        <label class="slds-form-element__label" >Default Xero Org</label>
                                                        <div class="slds-form-element__control">
                                                            <div class="slds-select_container">
                                                                <apex:selectList id="defaultXeroOrg" value="{!bwsettingWrapper.Default_Xero_Org}" styleClass="slds-select" size="1">
                                                                    <apex:selectOption itemLabel="--Select Default Xero Org--" itemValue=""></apex:selectOption>
                                                                    <apex:selectOptions value="{!ConnectedXeroOrgIds}"/>
                                                                </apex:selectList>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel >
                                                    <div class="slds-section-title_divider slds-m-top_medium"> XERO CONTACTS AND ITS RELATED INVOICES SYNC SETTINGS</div>
                                                    <div class="slds-m-left_x-small slds-m-vertical_small slds-text-color_weak">If a Xero Contact is not created via Breadwinner, then when Breadwinner discovers that Contact in Xero as part of Breadwinner's regular sync, then by default:</div>
                                                    <fieldset class="slds-form-element slds-m-left_medium">
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-radio">
                                                                <input type="radio" id="AutoMatch" value="{!bwsettingWrapper.Xero_Contact_Sync_Setting}" name="xerocontact" onclick="xeroContactSyncSetting('AutoMatch');" />
                                                                <label class="slds-radio__label" for="AutoMatch">
                                                                    <span class="slds-radio_faux"></span>
                                                                    <span class="slds-form-element__label">Import that Xero Contact and auto-match to, or auto-create if not matched, a Salesforce Account.</span>
                                                                </label>                                                                    
                                                            </span>
                                                        </div>
                                                        <div class="slds-form-element__control slds-m-top_x-small">
                                                            <span class="slds-radio">
                                                                <input type="radio" id="ManualMatch" value="{!bwsettingWrapper.Xero_Contact_Sync_Setting}" name="xerocontact" onclick="xeroContactSyncSetting('ManualMatch');" />
                                                                <label class="slds-radio__label" for="ManualMatch">
                                                                    <span class="slds-radio_faux"></span>
                                                                    <span class="slds-form-element__label">Import that Xero Contact and show it as available for later manual matching.</span>
                                                                </label>
                                                            </span>
                                                        </div>
                                                        <div class="slds-form-element__control slds-m-top_x-small">
                                                            <span class="slds-radio">
                                                                <input type="radio" id="DoNotMatch" value="{!bwsettingWrapper.Xero_Contact_Sync_Setting}" name="xerocontact" onclick="xeroContactSyncSetting('DoNotMatch');" />
                                                                <label class="slds-radio__label" for="DoNotMatch">
                                                                    <span class="slds-radio_faux"></span>
                                                                    <span class="slds-form-element__label">Import that Xero Contact and set it to not match/no associated Salesforce Account.</span>
                                                                </label>
                                                            </span>
                                                        </div>
                                                    </fieldset>
                                                    <div class="slds-m-left_x-small slds-m-vertical_small slds-text-color_weak">If a Xero Contact is not created via Breadwinner, then when Breadwinner discovers that Contact in Xero as part of Breadwinner's regular sync, then by default:</div>
                                                    <fieldset class="slds-form-element slds-m-left_medium">
                                                        <div class="slds-form-element__control">
                                                            <span class="slds-radio">
                                                                <input type="radio" id="SyncAll" value="{!bwsettingWrapper.Xero_Invoice_Sync_Setting}" name="invoice" onclick="xeroInvoiceSyncSetting('SyncAll');" />
                                                                <label class="slds-radio__label" for="SyncAll">
                                                                    <span class="slds-radio_faux"></span>
                                                                    <span class="slds-form-element__label">Import all of its Invoices into Salesforce.</span>
                                                                </label>                                                                    
                                                            </span>
                                                        </div>
                                                        <div class="slds-form-element__control slds-m-top_x-small">
                                                            <span class="slds-radio">
                                                                <input type="radio" id="DoNotSyncNew" value="{!bwsettingWrapper.Xero_Invoice_Sync_Setting}" name="invoice" onclick="xeroInvoiceSyncSetting('DoNotSyncNew');" />
                                                                <label class="slds-radio__label" for="DoNotSyncNew">
                                                                    <span class="slds-radio_faux"></span>
                                                                    <span class="slds-form-element__label">Set that Xero Contact to Not Sync Invoices.</span>
                                                                </label>
                                                            </span>
                                                        </div>
                                                    </fieldset>
                                                    <script>
                                                    document.getElementById('{!bwsettingWrapper.Xero_Contact_Sync_Setting}').checked = true;
                                                    function xeroContactSyncSetting(inputvalue){
                                                        document.getElementById('{!JSENCODE($Component.theForm.Xero_Contact_Sync_Setting)}').value = inputvalue;
                                                    }
                                                    document.getElementById('{!bwsettingWrapper.Xero_Invoice_Sync_Setting}').checked = true;
                                                    function xeroInvoiceSyncSetting(inputvalue){
                                                        document.getElementById('{!JSENCODE($Component.theForm.Xero_Invoice_Sync_Setting)}').value = inputvalue;
                                                    }
                                                    </script>
                                                    <apex:inputHidden id="Xero_Contact_Sync_Setting" value="{!bwsettingWrapper.Xero_Contact_Sync_Setting}" />
                                                    <apex:inputHidden id="Xero_Invoice_Sync_Setting" value="{!bwsettingWrapper.Xero_Invoice_Sync_Setting}" />
                                                </apex:outputPanel>
                                            </div>
                                        </apex:outputPanel>
                                        
                                        <!-- -------------------- Breadwinner wide XeroContacts settings ends here------------------- -->
                                        <apex:outputPanel >
                                            <div class="slds-m-top_large" align="center">
                                                <apex:commandButton action="{!saveXeroContactConfig}" styleClass="slds-button slds-button_brand" status="assign-action-status" value="Save" disabled="{!NOT(isBreadwinnerAdministrator)}" reRender="saveXeroContactSettings" oncomplete="HideStyleSheet();message();"/>
                                            </div>
                                        </apex:outputPanel>
                                    </div>
                                    <div id="SetupAndConfig-TAB6" class="slds-hide" aria-labelledby="EmailsContent">
                                        <!-- -----------------------------Emails Tab header start ---------------------------->
                                        <div class="slds-page-header slds-m-bottom_medium" role="banner">
                                            <div class="slds-media slds-media_center">
                                                <div class="slds-media__figure">
                                                    <svg aria-hidden="true" class="slds-icon slds-icon-standard-opportunity">
                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/standard-sprite/svg/symbols.svg#custom')}"></use>
                                                    </svg>
                                                </div>
                                                <div class="slds-media__body">
                                                    <p class="slds-page-header__title slds-truncate" title="Email Configuration">Email Configuration</p>
                                                    <p class="slds-text-body_small">Breadwinner  Xero </p>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- -----------------------------Emails Tab header END ---------------------------->
                                        <!-- -------------------- Breadwinner wide Email settings starts here------------------- -->
                                        <apex:outputPanel layout="block" StyleClass="slds-m-horizontal_small slds-m-top_medium" id="emailConfigSection">
                                            <apex:pagemessages id="emailConfigpm"/>
                                            <div class="slds-section-title_divider slds-m-bottom_small"> Send Emails from</div>
                                            <apex:pageMessage id="OrgEmailmsg" rendered="{!Not(OrgWideEmailAddresses.size > 0)}" severity="info" summary="Note:" >
                                                You do not have any Organization Wide Email Addresses setup. Please read <a target="_blank" href="https://help.salesforce.com/articleView?id=orgwide_email.htm&type=0">Salesforce's Support Article</a> for more information.
                                            </apex:pageMessage>
                                            <div class="slds-grid slds-wrap slds-m-left_small">
                                                <div class="slds-form-element">
                                                    <label class="slds-form-element__label" >When Breadwinner sends the Invoice PDF as an Email, you can have that Email sent from an Organization Wide Email Address. To select an email address as the default Organization Wide Email Address, please select it below.</label>
                                                    <div class="slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                                        <div class="slds-form-element__control">
                                                            <div class="slds-select_container">
                                                                <apex:selectList value="{!bwsettingWrapper.Default_OWEA_for_Send_Email}" size="1" styleClass="slds-select">
                                                                    <apex:selectOption itemLabel="--None--" itemValue=""></apex:selectOption>
                                                                    <apex:selectOptions value="{!OrgWideEmailAddresses}"/>    
                                                                </apex:selectList>
                                                            </div>
                                                        </div>
                                                    </div>    
                                                </div>
                                            </div>
                                            <div class="slds-section-title_divider slds-m-vertical_small"> Default CC and BCC</div>
                                            <div class="slds-grid slds-wrap slds-m-left_small">
                                                <apex:outputPanel layout="block" id="defaultCCBCCConfigSection" styleClass="slds-form-element">
                                                    <label class="slds-form-element__label">When sending emails through Breadwinner's "Send Email as PDF" functionality, you can have an email address included automatically. For multiple emails, separate them with commas.</label>
                                                    <br/>
                                                    <div class="slds-form-element slds-m-top_x-small">
                                                        <label class="slds-form-element__label" >CC Email Addresses:</label>
                                                        <div class="slds-form-element__control">
                                                            <apex:inputTextarea value="{!bwsettingWrapper.Default_CC_Email_Addresses}" styleClass="slds-input slds-size_1-of-1 slds-medium-size_4-of-6 slds-large-size_6-of-12" id="defaultCC"></apex:inputTextarea>
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-m-top_x-small">
                                                        <label class="slds-form-element__label" >BCC Email Addresses:</label>
                                                        <div class="slds-form-element__control">
                                                            <apex:inputTextarea value="{!bwsettingWrapper.Default_BCC_Email_Addresses}" styleClass="slds-input slds-size_1-of-1 slds-medium-size_4-of-6 slds-large-size_6-of-12" id="defaultBCC"></apex:inputTextarea>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                            </div>
                                        </apex:outputPanel>
                                        
                                        <!-- -------------------- Breadwinner wide Email settings ends here------------------- -->
                                        <apex:outputPanel >
                                            <div class="slds-m-top_large" align="center">
                                                <apex:commandButton action="{!saveEmailConfig}" styleClass="slds-button slds-button_brand" status="assign-action-status" value="Save" disabled="{!NOT(isBreadwinnerAdministrator)}" reRender="defaultCC, defaultBCC, emailConfigpm" oncomplete="HideStyleSheet();message();"/>
                                            </div>
                                        </apex:outputPanel>
                                    </div>
                                    
                                    <!-- ------------------------------------Multi-Tenent page starts here------------------ -->
                                    <div id="SetupAndConfig-TAB7" class="slds-hide" aria-labelledby="MultiTenantSetup">
                                        <div class="slds-page-header slds-m-bottom_medium" role="banner">
                                            <div class="slds-media slds-media_center">
                                                <div class="slds-media__figure">
                                                    <svg aria-hidden="true" class="slds-icon slds-icon-standard-opportunity">
                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/standard-sprite/svg/symbols.svg#custom')}"></use>
                                                    </svg>
                                                </div>
                                                <div class="slds-media__body">
                                                    <p class="slds-page-header__title slds-truncate" title="Multi Tenant Configuration">Multi Tenant Configuration</p>
                                                    <p class="slds-text-body_small">Breadwinner  Xero </p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        
                                        
                                        <apex:outputPanel layout="block" styleclass="slds-text-heading_small slds-m-horizontal_small"  rendered="{!isMultiOrgEnabled}"><!-- style="font-style: italic;"-->
                                            <br/>
                                            <div class="slds-form-element__control slds-m-top_x-small">
                                                <span class="slds-checkbox">
                                                    <label class="slds-checkbox">
                                                        <span class="slds-p-left_x-large slds-form-element__label">
                                                            Multi-Tenant Debugging Mode
                                                        </span>
                                                        <apex:inputCheckbox id="DebuggingMod" value="{!bwsettingWrapper.MultiTenant_Debugging_Mode}" /> 
                                                        <span class="slds-checkbox_faux"></span>
                                                    </label>
                                                </span>
                                            </div><br/>
                                            
                                            All Salesforce Admins, or any user with "Modify All Data" permissions, will be able to see / create Invoices in all Xero Orgs. However, anyone not an Admin or without "Modify All Data" permissions will need a Permission Set on their user. The actual permissions in the permission set don't matter, we are just looking at the name of the permission set. The permission set must be of the format, and similar to
                                            "<i>Breadwinner MultiTenant: (xero-shortcode)</i>"
                                        </apex:outputPanel>
                                        <apex:outputPanel rendered="{!!haveALLMultiTenantPermissionSets}" layout="block" styleclass="slds-text-heading_small slds-m-horizontal_small">        
                                            <br/><br/>The permission sets will need to be created manually. They are
                                            <div class="slds-scrollable_x slds-m-horizontal_xx-large"><br/>
                                                <table class="slds-table slds-table_bordered slds-box mt">
                                                    <thead>
                                                        <tr>
                                                            <th scope="col"> <b>Xero Org Name</b> </th>
                                                            <th scope="col"> <b>Xero Short Code</b> </th>
                                                            <th scope="col"> <b>Permission Set Name</b> </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <apex:repeat value="{!PermissionSetCreatedfor}" var="app">
                                                            <tr>
                                                                <td>{!PermissionSetCreatedfor[app].Connecting_App_Name}</td>
                                                                <td>{!PermissionSetCreatedfor[app].Xero_Org_ID}</td>
                                                                <td>Breadwinner MultiTenant: {!PermissionSetCreatedfor[app].Xero_Org_ID}</td>
                                                            </tr>
                                                        </apex:repeat>
                                                    </tbody>                
                                                </table>      
                                            </div>
                                        </apex:outputPanel>
                                        <apex:outputPanel layout="block" styleclass="slds-text-heading_small slds-m-horizontal_small"  rendered="{!AND(isMultiOrgEnabled, haveMultiTenantPermissionSets)}">
                                            <br/>You have already created the following permission sets, they do not need to be created
                                            <div class="slds-scrollable_x slds-m-horizontal_xx-large" style="display:{!if(haveMultiTenantPermissionSets, 'block', 'none')}"><br/>
                                                <table class="slds-table slds-table_bordered slds-box mt" >
                                                    <thead>
                                                        <tr>
                                                            <th scope="col"> <b>Xero Org Name</b> </th>
                                                            <th scope="col"> <b>Xero Short Code</b> </th>
                                                            <th scope="col"> <b>Permission Set Name</b> </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <apex:repeat value="{!listMultiTenantPermissionsets}" var="app">
                                                            <tr>
                                                                <td>{!listMultiTenantPermissionsets[app].Connecting_App_Name}</td>
                                                                <td>{!listMultiTenantPermissionsets[app].Xero_Org_ID}</td>
                                                                <td>{!app}</td>
                                                            </tr>
                                                        </apex:repeat>
                                                    </tbody>
                                                </table>      
                                            </div>
                                        </apex:outputPanel>
                                        <apex:outputPanel layout="block" styleclass="slds-text-heading_small slds-m-horizontal_small"  rendered="{!isMultiOrgEnabled}">
                                            <br/>Here is a list of all of your Xero Orgs, including ones that might even be temporarily disconnected:
                                            <!-- <div class="slds-section-title--divider"> Connected Xero Orgs</div> -->
                                            <div class="slds-scrollable_x slds-m-horizontal_xx-large"><br/>
                                                <table class="slds-table slds-table_bordered slds-box mt">
                                                    <thead>
                                                        <tr>
                                                            <th scope="col"> <b>Xero Org Name</b> </th>
                                                            <th scope="col"> <b>Xero Short Code</b> </th>
                                                            <th></th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <apex:repeat value="{!appConfigMap}" var="app">
                                                            <tr>
                                                                <td>{!appConfigMap[app].Connecting_App_Name}</td>
                                                                <td>{!appConfigMap[app].Xero_Org_ID}</td>
                                                                <td></td>
                                                            </tr>
                                                        </apex:repeat>
                                                    </tbody>                
                                                </table>      
                                            </div>
                                        </apex:outputPanel>
                                        <div class="slds-m-top_medium slds-m-bottom_medium" align="center">
                                            <apex:commandButton value="Save" action="{!saveBPConfigs}" status="assign-action-status" styleClass="slds-button slds-button_brand" reRender="BillPgMsg,BillsWholePanel" oncomplete="HideStyleSheet();message();scrolltoTop();" disabled="{!NOT(isBreadwinnerAdministrator)}" rendered="{!AND(OR(AND(isMultiOrgEnabled,SelectedOrg!=null,apcBPTab.Sync_Suppliers_Bills),AND(isMultiOrgEnabled,SelectedOrg==null),NOT(isMultiOrgEnabled)))}"/>
                                        </div>
                                        
                                    </div>
                                    <!---------------------- multi tenant page end ---------------------------->
                                    
                                    
                                    <div id="Learn-TAB1" class="slds-hide" aria-labelledby="KnowledgeBase">
                                        <!-- -----------------------------KnowledgeBase Tab header start ---------------------------->
                                        <div class="slds-page-header" role="banner">
                                            <div class="slds-media slds-media_center">
                                                <div class="slds-media__figure">
                                                    <span class="slds-icon_container slds-icon_container_circle slds-icon-action-description" title="Knowledge Base">
                                                        <svg aria-hidden="true" class="slds-icon slds-icon_small">
                                                            <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/action-sprite/svg/symbols.svg#google_news')}"></use>
                                                        </svg>
                                                    </span>
                                                </div>
                                                <div class="slds-media__body">
                                                    <p class="slds-page-header__title slds-truncate" title="Knowledge Base">Knowledge Base</p>
                                                    <p class="slds-text-body_small">Breadwinner  Xero </p>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- -----------------------------KnowledgeBase Tab header END ---------------------------->
                                        <div id="Knowledge_BasePage"></div>
                                    </div>
                                    <div id="Learn-TAB2" class="slds-hide" aria-labelledby="ContactSupport">
                                        <!-- -----------------------------ContactSupport Tab header start ---------------------------->
                                        <div class="slds-page-header" role="banner">
                                            <div class="slds-media slds-media_center">
                                                <div class="slds-media__figure">
                                                    <span class="slds-icon_container slds-icon_container_circle slds-icon-action-description" title="Contact Support">
                                                        <svg aria-hidden="true" class="slds-icon slds-icon_small">
                                                            <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/action-sprite/svg/symbols.svg#email')}"></use>
                                                        </svg>
                                                    </span>
                                                </div>
                                                <div class="slds-media__body">
                                                    <p class="slds-page-header__title slds-truncate" title="Contact Support">Contact Support</p>
                                                    <p class="slds-text-body_small">Breadwinner  Xero </p>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- -----------------------------ContactSupport Tab header END ---------------------------->
                                        <div id="Contact_SupportPage"></div>
                                    </div>
                                    
                                    <div id="ADMIN-1" class="slds-hide" role="tabpanel" aria-labelledby="Billing">
                                        <div class="slds-page-header slds-m-bottom_medium" role="banner">
                                            <div class="slds-media slds-media_center">
                                                <div class="slds-media__figure">
                                                    <span class="slds-icon_container slds-icon_container_circle slds-icon-action-description" title="Billing">
                                                        <svg aria-hidden="true" class="slds-icon slds-icon_small">
                                                            <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/action-sprite/svg/symbols.svg#google_news')}"></use>
                                                        </svg>
                                                    </span>
                                                </div>
                                                <div class="slds-media__body">
                                                    <p class="slds-page-header__title slds-truncate" title="Billing">Billing</p>
                                                    <p class="slds-text-body_small">Breadwinner  Xero </p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="slds-m-top_medium slds-m-horizontal_small" id="BillingDiv" >
                                            <apex:outputPanel rendered="{!isBreadwinnerAdministrator}" layout="block">
                                                <!-- Subscription Details -->
                                                <h3 class="slds-section-title_divider slds-m-top_medium">Your Breadwinner Subscription </h3>   
                                                <apex:outputPanel rendered="{!AND(orgStatus =='expired', !isFreePlan)}" layout="block" styleClass="slds-m-horizontal_small slds-text-longform" style="color: #5876a3;">
                                                    <div class="slds-m-top_medium">Your Data Subscription to Breadwinner has Expired. Please contact sales@breadwinner.com</div>
                                                    <div class="slds-m-top_medium">
                                                        Breadwinner last sync with Xero was {!lastSyncDays} days ago, and the average number of Invoices (as of then) was {!averageInvoiceCount}. You can see how Breadwinner calculated that&nbsp; <apex:outputLink value="{!$Page.Bread_Winner__InvoiceMapping}" style="color:blue;">here</apex:outputLink>. If the last sync was more than a week or two ago, this number might not be reflective of your real average Invoice count.
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel rendered="{!isFreePlan}" layout="block" styleClass="slds-m-horizontal_small slds-text-longform" style="color: #5876a3;">
                                                    <div class="slds-m-top_medium">You are on Breadwinner's Free plan. Need an active Subscription? Please contact sales@breadwinner.com</div>
                                                </apex:outputPanel>
                                                
                                                <apex:outputPanel rendered="{!IF(OR(orgStatus == 'expired', isFreePlan), false, true)}">
                                                    <div Class="slds-m-horizontal_small"  >
                                                        
                                                        <apex:outputPanel layout="block" styleClass="slds-text-longform slds-m-top_medium" rendered="{!NOT(isDisplayHostedLoginToken)}" >
                                                            This tab is used to update your credit card information, and will be active once you subscribe.
                                                        </apex:outputPanel>
                                                        <apex:outputPanel layout="block" rendered="{!isDisplayHostedLoginToken}" >
                                                            <!-- Outputpanel for Chargify Customers -->
                                                            <apex:outputPanel layout="block" styleClass="slds-m-top_medium" rendered="{!AND(isBreadwinnerAdministrator,contains(hostedLoginToken,'/'))}">
                                                                <script>
                                                                function showImages(imgId)
                                                                {   
                                                                    j$('.imgCls').hide();
                                                                    j$('#DivImgs').show();
                                                                    j$('#'+imgId).show();
                                                                    
                                                                }
                                                                j$('#BillingDiv').click (function (e) {
                                                                    if(!(j$(e.target).is('.clickBtnCls') )){
                                                                        if( j$('#DivImgs').css('display') != 'none' )
                                                                            j$('#DivImgs').hide();
                                                                    }
                                                                });
                                                                
                                                                </script>
                                                                
                                                                <button class="slds-button slds-button_brand slds-m-top_x-small clickBtnCls " onclick="showImages('CCEditImg')"  type="button">Edit my Credit Card Details </button>
                                                                <button class="slds-button slds-button_brand slds-m-top_x-small clickBtnCls " onclick="showImages('EditContactInfoImg')"  type="button"> Edit Email Address for Billing </button>                                              
                                                                <button class="slds-button slds-button_brand slds-m-top_x-small clickBtnCls " onclick="showImages('DownloadInvoicesImg')"  type="button"> Download my PDF Invoices/Statements </button>
                                                                <button class="slds-button slds-button_brand slds-m-top_x-small clickBtnCls " onclick="showImages('CancelImg')"  type="button"> Cancel my Breadwinner Subscription</button>
                                                                
                                                                <div id="DivImgs" style="display:none;">
                                                                    <div aria-hidden="false" aria-labelledby="prompt-heading-id" aria-describedby="prompt-message-wrapper" role="alertdialog" class="slds-modal slds-modal_prompt slds-fade-in-open">
                                                                        <div class="slds-modal__container " role="document" id="prompt-message-wrapper" tabindex="0" style="max-width:43rem;">
                                                                            <a href="https://www.billingportal.com/manage/{!hostedLoginToken}" target="_blank">  
                                                                                <img src="{!URLFOR($Resource.Breadwinner_Xero, 'Breadwinner_Xero/Images/Update_payment.png')}"  id="CCEditImg"   style="display:none"  class="imgCls"/>
                                                                                <img src="{!URLFOR($Resource.Breadwinner_Xero, 'Breadwinner_Xero/Images/Cancel_Subscription.png')}"  id="CancelImg"   style="display:none"  class="imgCls"/>
                                                                                <img src="{!URLFOR($Resource.Breadwinner_Xero, 'Breadwinner_Xero/Images/Download_statements.png')}"  id="DownloadInvoicesImg"   style="display:none"  class="imgCls"/>
                                                                                <img src="{!URLFOR($Resource.Breadwinner_Xero, 'Breadwinner_Xero/Images/Edit_ContactInfo.png')}"  id="EditContactInfoImg"   style="display:none"  class="imgCls"/>
                                                                            </a>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                
                                                            </apex:outputPanel>
                                                            
                                                            <!-- Outputpanel for Recurly Customers -->
                                                            <apex:outputPanel layout="block" styleClass="slds-text-body_small" rendered="{!AND(isBreadwinnerAdministrator,NOT(contains(hostedLoginToken,'/')))}" >
                                                                <div >
                                                                    <div class="slds-text-longform slds-m-top_medium">
                                                                        <p>
                                                                            Breadwinner is using a new billing engine. Your Credit Card details are in our old billing engine.
                                                                        </p>
                                                                        <p>
                                                                            Over the next few months, we will be gradually moving people onto the new billing engine, which may require you to re-enter your Credit Card details. 
                                                                        </p>
                                                                        <p>
                                                                            If you wish to manually update, or cancel, your Credit Card details, please go to Contact Support section on the left and file a support case.
                                                                        </p>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </div >
                                                </apex:outputPanel><br/><br/>
                                                
                                                <!-- Invoice Count and Report -->
                                                <apex:outputPanel layout="block" rendered="{!IF(OR(orgStatus == 'expired', isFreePlan), false, true)}">
                                                    <h3 class="slds-section-title_divider slds-m-top_medium">Average Monthly Invoice Count </h3>
                                                    <div class="slds-m-horizontal_small">
                                                        <div class="slds-text-longform slds-m-top_medium">
                                                            <p>
                                                                Breadwinner is charged based on your monthly Invoice Volume, averaged over the last 3 months. 
                                                                We count Invoices created with Breadwinner, and Invoices created directly in your accounting system. 
                                                                We ignore Draft, Voided, and Deleted Invoices.
                                                            </p>
                                                            <p>
                                                                We calculate the number of Invoices with an Invoice Date in the last 90 days, and divide by 3, to determine your average monthly volume.
                                                                Taking your average Invoice count is beneficial to you the customer, as seasonal spikes or a particularly busy month are smoothed out.
                                                                If you consistently go over your limit, we will continue syncing your Invoices, however we will contact you to begin the process of upgrading you to the next level.
                                                            </p>
                                                            <p>
                                                                You have {!invoiceCountForLast90Days} Invoices with an Invoice status of Authorized or Paid,
                                                                with an Invoice Date in the last 90 days, which averages to {!averageInvoiceCount} Invoices per month.
                                                                <br/><apex:outputLink value="{!$Page.Bread_Winner__InvoiceMapping}" style="color:blue;"> Click here</apex:outputLink> for a detailed report of how this number is calculated.
                                                                
                                                            </p>
                                                        </div>    
                                                    </div>
                                                </apex:outputPanel>
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!NOT(isBreadwinnerAdministrator)}">
                                                You must be a Administrator to access billing information.
                                            </apex:outputPanel>
                                        </div>
                                    </div>
                                    <div id="ADMIN-3" class="slds-hide" role="tabpanel" aria-labelledby="Permissions">
                                        <!-- -------------------------- Permissions Tab header start -------------------------- -->
                                        <div class="slds-page-header slds-m-bottom_medium" role="banner">
                                            <div class="slds-media slds-media_center">
                                                <div class="slds-media__figure">
                                                    <span class="slds-icon_container slds-icon_container_circle slds-icon-standard-user" title="Breadwinner Permissions">
                                                        <svg aria-hidden="true" class="slds-icon slds-icon_small">
                                                            <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/action-sprite/svg/symbols.svg#user')}"></use>
                                                        </svg>
                                                    </span>
                                                </div>
                                                <div class="slds-media__body">
                                                    <p class="slds-page-header__title slds-truncate" title="Breadwinner Permissions">Breadwinner Permissions</p>
                                                    <p class="slds-text-body_small">Breadwinner  Xero </p>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- -------------------------- Permissions Tab header start -------------------------- -->
                                        
                                        <div class="slds-tabs_default">
                                            <ul class="slds-tabs_default__nav" role="tablist">
                                                <li class="slds-tabs_default__item slds-is-active" title="Overview" role="presentation">
                                                    <a class="slds-tabs_default__link" onclick="siblingSelectTab(this);queryPSAssignedUsers('Overview','Name','ASC');" href="javascript:void(0);" role="tab" tabindex="0" aria-selected="true" aria-controls="overview" id="overview__item">Overview</a>
                                                </li>
                                                <li class="slds-tabs_default__item slds-is-active" title="Admin" role="presentation">
                                                    <a class="slds-tabs_default__link" onclick="siblingSelectTab(this);queryPSAssignedUsers('Breadwinner_Admin_User','Name','ASC','Name','ASC');" href="javascript:void(0);" role="tab" tabindex="-1" aria-selected="false" aria-controls="admin" id="admin__item">Admin</a>
                                                </li>
                                                <li class="slds-tabs_default__item" title="Operations" role="presentation">
                                                    <a class="slds-tabs_default__link" onclick="siblingSelectTab(this);queryPSAssignedUsers('Breadwinner_Operations','Name','ASC');" href="javascript:void(0);" role="tab" tabindex="-1" aria-selected="false" aria-controls="operations" id="operations__item">Operations</a>
                                                </li>
                                                <li class="slds-tabs_default__item" title="Full" role="presentation">
                                                    <a class="slds-tabs_default__link" onclick="siblingSelectTab(this);queryPSAssignedUsers('Breadwinner_Full_User','Name','ASC');" href="javascript:void(0);" role="tab" tabindex="-1" aria-selected="false" aria-controls="Full" id="Full__item">Full</a>
                                                </li>
                                                <li class="slds-tabs_default__item" title="Read-Only" role="presentation">
                                                    <a class="slds-tabs_default__link" onclick="siblingSelectTab(this);queryPSAssignedUsers('Breadwinner_Read_Only','Name','ASC');" href="javascript:void(0);" role="tab" tabindex="-1" aria-selected="false" aria-controls="readonly" id="readonly__item">Read-Only</a>
                                                </li>
                                                <li class="slds-tabs_default__item" title="All Permission Sets" role="presentation">
                                                    <a class="slds-tabs_default__link" onclick="siblingSelectTab(this);queryPSAssignedUsers('All_Permission_Sets');" href="javascript:void(0);" role="tab" tabindex="-1" aria-selected="false" aria-controls="all ps" id="all_ps__item">All Permission Sets</a>
                                                </li>
                                            </ul>
                                            <apex:outputPanel id="psWholeBlock" layout="block" styleClass="slds-m-around_medium">
                                                <apex:outputPanel rendered="{!selectedPermissionSet=='Overview'}">
                                                    <p>Breadwinner provides four permission sets, for the four broad use cases your users might need.</p><br/>
                                                    <p>Users with the <b>Breadwinner Read Only Permission Set</b> can only view Breadwinner Data. 
                                                        This will also allow a user to run reports on Breadwinner data, or to see all Xero Customers and Invoices from the various tabs. 
                                                        These users can also file Support cases in the Breadwinner tab, or view Knowledgebase Articles.</p><br/>
                                                    <p>The <b>Breadwinner Full Permission Set</b> can see all data (just like <i>Read Only</i>) and also allows the creation of Invoices and Xero Contacts, 
                                                        and the editing of Xero Contacts (such as updating the address of the Xero Customer).</p><br/>
                                                    <p>The <b>Breadwinner Operations Permission Set</b> is designed for power-users or finance team members. 
                                                        Users with this permission set can do everything included with <i>Full</i>, and can also run Batch Invoices, Match Xero Contacts to Salesforce Accounts, Import Inventory Items as Salesforce Products, and run the Address Sync. 
                                                        Users can also change which Salesforce Account a Xero Contact is associated with, or change whether that Xero Contact syncs Invoices or not.</p><br/>
                                                    <p>Finally, the <b>Breadwinner Admin Permission Set</b> can perform all functions in Breadwinner, including connecting to and disconnecting from Xero entities, and setting the configuration of Breadwinner.</p><br/>
                                                    <p>Please be aware that any Salesforce User with the "Modify All Data" in their Salesforce Profile is treated as if they have the <i>Admin</i> permission set. 
                                                        And, please be aware that if at the time of installation, Breadwinner was set to be available for "All Users" then all users will effectively have the <i>Full</i> permission set unless their Profiles are additionally restricted on an object level.</p><br/>
                                                    <p>You can clone these permission sets to further modify them, but any custom permission sets will not be visible from this page. You will need to access those permission sets from Salesforce Setup.</p>
                                                </apex:outputPanel>
                                                <apex:outputPanel rendered="{!selectedPermissionSet=='Breadwinner_Admin_User'}">
                                                    <p>The following users have the Breadwinner Admin Permission Set. This allows for all activities in Breadwinner. Additionally, users with the Breadwinner Admin Permission Set are the only ones who can</p>
                                                    <svg aria-hidden="true" class="slds-icon">
                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/custom-sprite/svg/symbols.svg#custom17')}"></use>
                                                    </svg>
                                                    <br/>
                                                    <ul class="slds-list_dotted">
                                                        <li>Connect and Disconnect to Xero</li>
                                                        <li>Control the toggle for Read-Only-Mode / Active-Mode</li>
                                                        <li>Edit the Configuration Menu</li>
                                                        <li>Access and use the Troubleshooting Menu</li>
                                                        <li>View the Permissions tab</li>
                                                    </ul><br/>
                                                </apex:outputPanel>
                                                <apex:outputPanel rendered="{!selectedPermissionSet=='Breadwinner_Operations'}">
                                                    <p>The following users have the Breadwinner Operations Permission Set. Users with this permission set (or a higher permission set, such as the Admin Permission Set) can</p>
                                                    <br/>
                                                    <ul class="slds-list_dotted">
                                                        <li>Run the Account Match</li>
                                                        <li>Import Inventory</li>
                                                        <li>Run Address Sync</li>
                                                        <li>Run Batch Invoicing</li>
                                                        <li>Control the Sync Status of a Xero Customer</li>
                                                        <li>View (read-only) the Configuration, Troubleshooting, and Permissions Menu</li>
                                                    </ul><br/>
                                                </apex:outputPanel>
                                                <apex:outputPanel rendered="{!selectedPermissionSet=='Breadwinner_Full_User'}">
                                                    <p>The following users have the Breadwinner Full Permission Set. Users with this permission set (or a higher permission set, such as the Admin or Operations Permission Set) can</p>
                                                    <br/>
                                                    <ul class="slds-list_dotted">
                                                        <li>Create Invoices<span style="display:{!IF(AND(isAccountsPayableEnabled, !isFreePlan), '','None')}">, Bills or Purchase Orders</span></li>
                                                        <li>Create Xero Contacts</li>
                                                        <li>Edit Xero Contacts</li>
                                                        <li>Reparent Xero Contacts</li>
                                                    </ul><br/>
                                                </apex:outputPanel>
                                                <apex:outputPanel rendered="{!selectedPermissionSet=='Breadwinner_Read_Only'}">
                                                    <p>The following users have the Breadwinner Read-Only Permission Set. Users with this permission set (or a higher permission set, such as the Admin, Operations, or Full Permission Set) can</p>
                                                    <br/>
                                                    <ul class="slds-list_dotted">
                                                        <li>View all Xero data in Salesforce (though this can be further restricted through Profiles)</li>
                                                        <li>Access the Breadwinner Tab and use the Learn Menu section for the Knowledge-Base or to file a Support Request</li>
                                                        <li>Download Invoice or Send Invoice PDF as Email</li>
                                                        <li>Use the Invoice Collection tool</li>
                                                    </ul><br/>
                                                </apex:outputPanel>
                                                <apex:dataTable value="{!wrapPermissionUsersList}" var="psUsers" styleclass="slds-table slds-no-row-hover slds-table_bordered slds-border_right slds-border_left slds-table_col-bordered topborder" rendered="{!AND(wrapPermissionUsersList.size>0,selectedPermissionSet!='Overview')}">
                                                    <apex:column value="{!psUsers.fullName}">
                                                        <apex:facet name="header">
                                                            <apex:commandLink styleClass="sortlink" action="{!queryPermissionSetAssignedUsers}" value="Full Name"  status="assign-action-status" reRender="psWholeBlock" oncomplete="reRenderArrowUpSVG('.nameColumnUp');reRenderArrowDownSVG('.nameColumnDown');reRenderArrowUpSVG('.nameColumnUp1');reRenderArrowDownSVG('.nameColumnDown1');reRenderArrowUpSVG('.unameColumnUp1');reRenderArrowDownSVG('.unameColumnDown1');reRenderArrowUpSVG('.profileColumnUp1');reRenderArrowDownSVG('.profileColumnDown1');HideStyleSheet();message();">
                                                                <apex:outputPanel id="nameArrowDown" styleClass="nameColumnDown" rendered="{!AND(sortExpression='Name', sortDirection!='ASC')}">
                                                                    <svg aria-hidden="true" class="slds-button__icon">
                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#arrowdown')}"></use>
                                                                    </svg>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel id="nameArrowUP" styleClass="nameColumnUp" rendered="{!AND(sortExpression='Name', sortDirection='ASC')}">
                                                                    <svg aria-hidden="true" class="slds-button__icon">
                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#arrowup')}"></use>
                                                                    </svg>
                                                                </apex:outputPanel>
                                                                <apex:param value="Name" name="column" assignTo="{!sortExpression}" ></apex:param>
                                                                <apex:param value="{!IF(sortDirection == 'ASC','DESC','ASC')}" name="dir" assignTo="{!sortDirection}"></apex:param>
                                                                <apex:param value="{!selectedPermissionSet}" assignTo="{!selectedPermissionSet}"/>
                                                            </apex:commandLink>
                                                        </apex:facet>
                                                    </apex:column>
                                                    <apex:column value="{!psUsers.userName}">
                                                        <apex:facet name="header">
                                                            <apex:commandLink id="unameColumn" styleClass="sortlink" action="{!queryPermissionSetAssignedUsers}" value="Username"  status="assign-action-status" reRender="psWholeBlock" oncomplete="reRenderArrowUpSVG('.unameColumnUp');reRenderArrowDownSVG('.unameColumnDown');reRenderArrowUpSVG('.nameColumnUp1');reRenderArrowDownSVG('.nameColumnDown1');reRenderArrowUpSVG('.unameColumnUp1');reRenderArrowDownSVG('.unameColumnDown1');reRenderArrowUpSVG('.profileColumnUp1');reRenderArrowDownSVG('.profileColumnDown1');HideStyleSheet();message();">
                                                                <apex:outputPanel id="unameArrowDown" styleClass="unameColumnDown" rendered="{!AND(sortExpression='Username', sortDirection!='ASC')}">
                                                                    <svg aria-hidden="true" class="slds-button__icon">
                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#arrowdown')}"></use>
                                                                    </svg>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel id="unameArrowUP" styleClass="unameColumnUp" rendered="{!AND(sortExpression='Username', sortDirection='ASC')}">
                                                                    <svg aria-hidden="true" class="slds-button__icon">
                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#arrowup')}"></use>
                                                                    </svg>
                                                                </apex:outputPanel>
                                                                <apex:param value="Username" name="column" assignTo="{!sortExpression}" ></apex:param>
                                                                <apex:param value="{!IF(sortDirection == 'ASC','DESC','ASC')}" name="dir" assignTo="{!sortDirection}"></apex:param>
                                                                <apex:param value="{!selectedPermissionSet}" assignTo="{!selectedPermissionSet}"/>
                                                            </apex:commandLink>
                                                        </apex:facet>
                                                    </apex:column>
                                                    <apex:column headerValue="Profile" html-data-label="Profile" value="{!psUsers.profileName}">
                                                        <apex:facet name="header">
                                                            <apex:commandLink id="profileColumn" styleClass="sortlink" action="{!queryPermissionSetAssignedUsers}" value="Profile"  status="assign-action-status" reRender="psWholeBlock" oncomplete="reRenderArrowUpSVG('.profileColumnUp');reRenderArrowDownSVG('.profileColumnDown');reRenderArrowUpSVG('.nameColumnUp1');reRenderArrowDownSVG('.nameColumnDown1');reRenderArrowUpSVG('.unameColumnUp1');reRenderArrowDownSVG('.unameColumnDown1');reRenderArrowUpSVG('.profileColumnUp1');reRenderArrowDownSVG('.profileColumnDown1');HideStyleSheet();message();">
                                                                <apex:outputPanel id="profileArrowDown" styleClass="profileColumnDown" rendered="{!AND(sortExpression='Profile.Name', sortDirection!='ASC')}">
                                                                    <svg aria-hidden="true" class="slds-button__icon">
                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#arrowdown')}"></use>
                                                                    </svg>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel id="profileArrowUP" styleClass="profileColumnUp" rendered="{!AND(sortExpression='Profile.Name', sortDirection='ASC')}">
                                                                    <svg aria-hidden="true" class="slds-button__icon">
                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#arrowup')}"></use>
                                                                    </svg>
                                                                </apex:outputPanel>
                                                                <apex:param value="Profile.Name" name="column" assignTo="{!sortExpression}" ></apex:param>
                                                                <apex:param value="{!IF(sortDirection == 'ASC','DESC','ASC')}" name="dir" assignTo="{!sortDirection}"></apex:param>
                                                                <apex:param value="{!selectedPermissionSet}" assignTo="{!selectedPermissionSet}"/>
                                                            </apex:commandLink>
                                                        </apex:facet>
                                                    </apex:column>
                                                    <apex:column headerValue="Admin" html-data-label="Admin" rendered="{!selectedPermissionSet=='All_Permission_Sets'}">
                                                        <apex:inputCheckbox disabled="true" value="{!psUsers.adminSelected}"/>
                                                    </apex:column>
                                                    <apex:column headerValue="Operations" html-data-label="Operations" rendered="{!selectedPermissionSet=='All_Permission_Sets'}">
                                                        <apex:inputCheckbox disabled="true" value="{!psUsers.operationsSelected}"/>
                                                    </apex:column>
                                                    <apex:column headerValue="Full" html-data-label="Full" rendered="{!selectedPermissionSet=='All_Permission_Sets'}">
                                                        <apex:inputCheckbox disabled="true" value="{!psUsers.standardSelected}"/>
                                                    </apex:column>
                                                    <apex:column headerValue="Read-Only" html-data-label="Read-Only" rendered="{!selectedPermissionSet=='All_Permission_Sets'}">
                                                        <apex:inputCheckbox disabled="true" value="{!psUsers.readOnlySelected}"/>
                                                    </apex:column>
                                                </apex:dataTable>
                                                
                                                <apex:outputPanel layout="block" styleClass="slds-m-top_medium slds-m-horizontal_medium" rendered="{!AND(selectedPermissionSet=='All_Permission_Sets', assignedPermissionSetUsers.size<=0)}">
                                                    <div class="slds-align_absolute-center slds-border_top slds-border_bottom slds-p-top_small slds-p-bottom_small">
                                                        No Users have Breadwinner Permission Sets assigned.
                                                    </div>
                                                </apex:outputPanel>
                                                
                                                <apex:outputPanel rendered="{!AND(selectedPermissionSet!='',BEGINS(selectedPermissionSet,'Breadwinner_'))}">                                                    
                                                    <apex:outputPanel layout="block" rendered="{!assignedPermissionSetUsers.size<=0}" styleClass="slds-m-top_medium slds-m-horizontal_medium">
                                                        <div class="slds-align_absolute-center slds-border_top slds-border_bottom slds-p-top_small slds-p-bottom_small">
                                                            No Users have this permission set assigned.
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel rendered="{!assignedPermissionSetUsers.size == 10}">
                                                        <p style="margin-top:8px;margin-left:3px;color:grey;">
                                                            * Only the first 10 Users are displayed. To see all users, please visit the Salesforce Permission Set for&nbsp;<apex:outputText value="{!SUBSTITUTE(selectedPermissionSet,'_',' ')}"/>.
                                                        </p>
                                                    </apex:outputPanel><br/>
                                                    <apex:outputPanel rendered="{!OR(isAdministrator, canAssignPermissionSets)}">
                                                        You can&nbsp;<apex:outputLink rendered="{!NOT(isLightning)}" value="/005?id={!selectedPermissionSetId}&ispsg=0&isUserEntityOverride=1" target="_blank">Add this Permission Set to a User</apex:outputLink>
                                                        <apex:outputLink rendered="{!isLightning}" value="/lightning/setup/PermSets/page?address=/005?id={!selectedPermissionSetId}&ispsg=0&isUserEntityOverride=1" target="_blank">Add this Permission Set to a User</apex:outputLink><span style="display:{!IF((assignedPermissionSetUsers.size>0), '','None')}">,</span>
                                                        <apex:outputPanel rendered="{!assignedPermissionSetUsers.size>0}">
                                                            or&nbsp;<apex:outputLink rendered="{!NOT(isLightning)}" value="/005?id={!selectedPermissionSetId}&ispsg=0&isUserEntityOverride=1" target="_blank">Remove this Permission Set from a User</apex:outputLink>
                                                            <apex:outputLink rendered="{!isLightning}" value="/lightning/setup/PermSets/page?address=/005?id={!selectedPermissionSetId}&ispsg=0&isUserEntityOverride=1" target="_blank">Remove this Permission Set from a User</apex:outputLink>
                                                        </apex:outputPanel>.
                                                    </apex:outputPanel>
                                                </apex:outputPanel>
                                                
                                                <apex:outputPanel layout="block" styleClass="slds-m-top_medium" rendered="{!AND(usersWithModifyAllDataPermission.size>0, selectedPermissionSet=='Breadwinner_Admin_User')}">
                                                    <div class="slds-panel__section slds-p-around_none">
                                                        <div class="slds-section slds-is-open">
                                                            <h3 class="slds-section__title slds-theme_shade">
                                                                <span class="slds-truncate slds-p-horizontal_xx-small">Salesforce Users with Modify All Permission Settings</span>
                                                            </h3>
                                                            <div class="slds-section__content">
                                                                <p>While these users do not have a Breadwinner Permission Set, they have the permission to do everything, just like someone with a Breadwinner Admin Permission Set.</p>
                                                                <apex:dataTable value="{!usersWithModifyAllDataPermission}" var="psUsers" styleclass="slds-table slds-no-row-hover slds-table_bordered slds-border_right slds-border_left slds-table_col-bordered slds-m-top_small topborder">
                                                                    <apex:column headerValue="Full Name" html-data-label="Full Name" value="{!psUsers.Name}" >
                                                                        <apex:facet name="header">
                                                                            <apex:commandLink styleClass="sortlink" action="{!queryPermissionSetAssignedUsers}" value="Full Name"  status="assign-action-status" reRender="psWholeBlock" oncomplete="reRenderArrowUpSVG('.nameColumnUp1');reRenderArrowDownSVG('.nameColumnDown1');reRenderArrowUpSVG('.nameColumnUp');reRenderArrowDownSVG('.nameColumnDown');reRenderArrowUpSVG('.unameColumnUp');reRenderArrowDownSVG('.unameColumnDown');reRenderArrowUpSVG('.profileColumnUp');reRenderArrowDownSVG('.profileColumnDown');HideStyleSheet();message();">
                                                                                <apex:outputPanel id="nameArrowDown1" styleClass="nameColumnDown1" rendered="{!AND(modifyAllDataSortExpression='Name', modifyAllDataSortDirection!='ASC')}">
                                                                                    <svg aria-hidden="true" class="slds-button__icon">
                                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#arrowdown')}"></use>
                                                                                    </svg>
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel id="nameArrowUP1" styleClass="nameColumnUp1" rendered="{!AND(modifyAllDataSortExpression='Name', modifyAllDataSortDirection='ASC')}">
                                                                                    <svg aria-hidden="true" class="slds-button__icon">
                                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#arrowup')}"></use>
                                                                                    </svg>
                                                                                </apex:outputPanel>
                                                                                <apex:param value="Name" name="column" assignTo="{!modifyAllDataSortExpression}" ></apex:param>
                                                                                <apex:param value="{!IF(modifyAllDataSortDirection == 'ASC','DESC','ASC')}" name="dir" assignTo="{!modifyAllDataSortDirection}"></apex:param>
                                                                                <apex:param value="{!selectedPermissionSet}" assignTo="{!selectedPermissionSet}"/>
                                                                            </apex:commandLink>
                                                                        </apex:facet>
                                                                    </apex:column>
                                                                    <apex:column headerValue="Username" html-data-label="Username" value="{!psUsers.Username}" >
                                                                        <apex:facet name="header">
                                                                            <apex:commandLink id="unameColumn1" styleClass="sortlink" action="{!queryPermissionSetAssignedUsers}" value="Username"  status="assign-action-status" reRender="psWholeBlock" oncomplete="reRenderArrowUpSVG('.unameColumnUp1');reRenderArrowDownSVG('.unameColumnDown1');reRenderArrowUpSVG('.nameColumnUp');reRenderArrowDownSVG('.nameColumnDown');reRenderArrowUpSVG('.unameColumnUp');reRenderArrowDownSVG('.unameColumnDown');reRenderArrowUpSVG('.profileColumnUp');reRenderArrowDownSVG('.profileColumnDown');HideStyleSheet();message();">
                                                                                <apex:outputPanel id="unameArrowDown1" styleClass="unameColumnDown1" rendered="{!AND(modifyAllDataSortExpression='Username', modifyAllDataSortDirection!='ASC')}">
                                                                                    <svg aria-hidden="true" class="slds-button__icon">
                                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#arrowdown')}"></use>
                                                                                    </svg>
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel id="unameArrowUP1" styleClass="unameColumnUp1" rendered="{!AND(modifyAllDataSortExpression='Username', modifyAllDataSortDirection='ASC')}">
                                                                                    <svg aria-hidden="true" class="slds-button__icon">
                                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#arrowup')}"></use>
                                                                                    </svg>
                                                                                </apex:outputPanel>
                                                                                <apex:param value="Username" name="column" assignTo="{!modifyAllDataSortExpression}" ></apex:param>
                                                                                <apex:param value="{!IF(modifyAllDataSortDirection == 'ASC','DESC','ASC')}" name="dir" assignTo="{!modifyAllDataSortDirection}"></apex:param>
                                                                                <apex:param value="{!selectedPermissionSet}" assignTo="{!selectedPermissionSet}"/>
                                                                            </apex:commandLink>
                                                                        </apex:facet>
                                                                    </apex:column>
                                                                    <apex:column headerValue="Profile" html-data-label="Profile" value="{!psUsers.Profile.Name}" >
                                                                        <apex:facet name="header">
                                                                            <apex:commandLink id="profileColumn1" styleClass="sortlink" action="{!queryPermissionSetAssignedUsers}" value="Profile"  status="assign-action-status" reRender="psWholeBlock" oncomplete="reRenderArrowUpSVG('.profileColumnUp1');reRenderArrowDownSVG('.profileColumnDown1');reRenderArrowUpSVG('.nameColumnUp');reRenderArrowDownSVG('.nameColumnDown');reRenderArrowUpSVG('.unameColumnUp');reRenderArrowDownSVG('.unameColumnDown');reRenderArrowUpSVG('.profileColumnUp');reRenderArrowDownSVG('.profileColumnDown');HideStyleSheet();message();">
                                                                                <apex:outputPanel id="profileArrowDown1" styleClass="profileColumnDown1" rendered="{!AND(modifyAllDataSortExpression='Profile.Name', modifyAllDataSortDirection!='ASC')}">
                                                                                    <svg aria-hidden="true" class="slds-button__icon">
                                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#arrowdown')}"></use>
                                                                                    </svg>
                                                                                </apex:outputPanel>
                                                                                <apex:outputPanel id="profileArrowUP1" styleClass="profileColumnUp1" rendered="{!AND(modifyAllDataSortExpression='Profile.Name', modifyAllDataSortDirection='ASC')}">
                                                                                    <svg aria-hidden="true" class="slds-button__icon">
                                                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#arrowup')}"></use>
                                                                                    </svg>
                                                                                </apex:outputPanel>
                                                                                <apex:param value="Profile.Name" name="column" assignTo="{!modifyAllDataSortExpression}" ></apex:param>
                                                                                <apex:param value="{!IF(modifyAllDataSortDirection == 'ASC','DESC','ASC')}" name="dir" assignTo="{!modifyAllDataSortDirection}"></apex:param>
                                                                                <apex:param value="{!selectedPermissionSet}" assignTo="{!selectedPermissionSet}"/>
                                                                            </apex:commandLink>
                                                                        </apex:facet>
                                                                    </apex:column>
                                                                </apex:dataTable>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                            </apex:outputPanel>
                                        </div>                                        
                                    </div>
                                    <!-- Adding Troubleshooting SLDS Modal for popup box -->
                                    <div >
                                        <div id="dyn_popup" class="slds-modal slds-modal_small" aria-hidden="false" role="dialog" >
                                            <div class="slds-modal__container troubleshootModal" style="min-width: 25rem; width: 25%;">
                                                <div class="slds-modal__header">
                                                    <h2 class="slds-text-heading_medium">Troubleshooting</h2>
                                                </div>
                                                <div class="slds-modal__content slds-p-around_medium">
                                                    <p>
                                                        Dynamic popup text goes here.
                                                    </p>
                                                    <div align="right" style="margin-top: 1rem;">
                                                        <apex:outputPanel id="popup_op">
                                                            <apex:commandLink id="okaybtn" styleClass="btns slds-button slds-button_brand slds-m-left_small" value="OK" onclick="troubleshootCancelDisc();" reRender="nothing" rendered="{!NOT(OR(is_delete_invoices,is_delete_bacs))}" />
                                                            
                                                            <apex:commandLink id="del_inv" styleClass="btns slds-button slds-button_destructive slds-m-left_small" value="Delete Invoices" rendered="{!is_delete_invoices}" reRender="deleteSectionId,DeleteDisconnectedRecDivId,deleteDisconnectedSectionId,popup_op" action="{!deleteInvoices}" oncomplete="troubleshootCancelDisc();" status="assign-action-status">
                                                                <apex:param assignTo="{!is_delete_invoices}" value="False" name="assign_del_inv9" />
                                                                <apex:param assignTo="{!is_delete_bacs}" value="False" name="assign_del_bac9" />
                                                            </apex:commandLink>
                                                            
                                                            <apex:commandLink id="del_bac" styleClass="btns slds-button slds-button_destructive slds-m-left_small" value="Delete Xero Contacts" rendered="{!is_delete_bacs}" reRender="deleteSectionId,DeleteDisconnectedRecDivId,deleteDisconnectedSectionId,popup_op" action="{!deleteBACs}" oncomplete="troubleshootCancelDisc();" status="assign-action-status">
                                                                <apex:param assignTo="{!is_delete_invoices}" value="False" name="assign_del_inv10" />
                                                                <apex:param assignTo="{!is_delete_bacs}" value="False" name="assign_del_bac10" />
                                                            </apex:commandLink>
                                                            
                                                            <apex:commandLink id="cancelbtn" styleClass="btns slds-button slds-button_neutral slds-m-left_small" value="Cancel" rendered="{!OR(is_delete_invoices,is_delete_bacs)}" onclick="troubleshootCancelDisc();" reRender="popup_op,nothing"  >
                                                                <apex:param assignTo="{!is_delete_invoices}" value="False" name="assign_del_inv11" />
                                                                <apex:param assignTo="{!is_delete_bacs}" value="False" name="assign_del_bac11" />
                                                            </apex:commandLink>
                                                        </apex:outputPanel>
                                                        <apex:actionFunction name="DeleteConnectionSectionFunction" reRender="DeleteConnectionSectionId" status="assign-action-status">
                                                            <apex:param name="DeleteConnectionSectionParam" value="" assignTo="{!showDeleteSection}"></apex:param>
                                                        </apex:actionFunction>
                                                        <apex:actionFunction name="DeleteDisconnectionSectionFunction" reRender="DeleteDisconnectionSectionId" status="assign-action-status">
                                                            <apex:param name="DeleteDisconnectionSectionParam" value="" assignTo="{!showDeleteDisconnectionSection}"></apex:param>
                                                        </apex:actionFunction>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="slds-backdrop" id="troubleshootBackdrop"></div>
                                    </div>                                    
                                    <!-- End of Modal -->
                                    <div id="ADMIN-21" class="slds-hide" role="tabpanel" aria-labelledby="General-Troubleshoot">
                                        
                                        <!-- -----------------------------General Troubleshoot header start ---------------------------->
                                        <div class="slds-page-header" role="banner">
                                            <div class="slds-media slds-media_center">
                                                <div class="slds-media__figure">
                                                    <span class="slds-icon_container slds-icon-standard-opportunity" title="Troubleshooting">
                                                        <svg class="slds-icon slds-page-header__icon" aria-hidden="true">
                                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/standard-sprite/svg/symbols.svg#custom')}" />
                                                        </svg>
                                                    </span>
                                                </div>
                                                <div class="slds-media__body">
                                                    <p class="slds-page-header__title slds-truncate slds-align-middle" title="Troubleshooting">Troubleshooting</p>
                                                    <p class="slds-text-body_small slds-line-height_reset">Breadwinner  Xero </p>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- -----------------------------General Troubleshoot header END ---------------------------->
                                        
                                        <apex:outputPanel layout="block" styleClass="slds-m-around_small" id="GeneralTroubleshootSection">
                                            <!-- ------------------------------ Breadwinner Wide Settings Start----------------------- -->
                                            <apex:outputPanel layout="block" rendered="{!showGeneralSection}" styleClass="slds-m-bottom_medium" id="breadwinnerInfo">
                                                <h3 class="slds-section-title_divider slds-m-bottom_small"> Breadwinner Info</h3>
                                                <div class="slds-m-horizontal_small">
                                                    <table border="0" cellpadding="0" class="breadwinnerInfo">
                                                        <tr>
                                                            <td style="text-align: right;padding: 5px; width: 165px;">Salesforce Edition:</td> 
                                                            <td style="text-align: left;padding: 5px;"><apex:outputtext value="{!SFOrg.OrganizationType}"> </apex:outputtext></td>
                                                        </tr>
                                                        <tr>
                                                            <td style="text-align: right;padding: 5px; width: 165px;">Salesforce Org Type:</td> 
                                                            <td style="text-align: left;padding: 5px;"><apex:outputtext value="{!if(isSandbox, 'Sandbox', 'Production')}{!if(SFOrg.TrialExpirationDate!= null,' - Trial','')}"></apex:outputtext></td>
                                                        </tr>
                                                        <tr>
                                                            <td style="text-align: right;padding: 5px; width: 165px;">Salesforce Org Id:</td>         
                                                            <td style="text-align: left;padding: 5px;"><apex:outputtext value="{!SFOrg.Id}"></apex:outputtext></td>
                                                        </tr>
                                                        <tr style="display:{!if(isFreePlan,'None','')}">
                                                            <td style="text-align: right;padding: 5px; width: 165px;">Breadwinner Plan Code:</td> 
                                                            <td style="text-align: left;padding: 5px;"><apex:outputtext value="{!PlanCode}"></apex:outputtext></td>
                                                        </tr>
                                                        <tr>
                                                            <td style="text-align: right;padding: 5px; width: 165px;">Breadwinner Plan Name:</td> 
                                                            <td style="text-align: left;padding: 5px;">
                                                                <apex:outputPanel >
                                                                    <apex:outputtext value="{!IF(isFreePlan,'Free',IF(AND(ISBLANK(PlanName),TrialOrg),'You are currently in a Free Trial',PlanName))}"></apex:outputtext>
                                                                </apex:outputPanel> </td>
                                                        </tr>
                                                        <tr>
                                                            <td style="text-align: right;padding: 5px; width: 165px;">Breadwinner Version:</td>      
                                                            <td style="text-align: left;padding: 5px;"><apex:outputtext value="{!BreadwinnerVersion}"></apex:outputtext></td>
                                                        </tr>
                                                    </table>
                                                    
                                                </div>                                
                                                <apex:outputPanel layout="block" rendered="{!isBreadwinnerAdministrator}" id="JobsStatus">
                                                    <h3 class="slds-section-title_divider slds-m-bottom_small slds-m-top_medium">Scheduled Jobs Status</h3>
                                                    <div class="slds-m-horizontal_medium">
                                                        Scheduled jobs are running under an 
                                                        <apex:outputPanel rendered="{!isScheduledJobsRunbyActiveUser}">
                                                            <i>Active User</i>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel rendered="{!!isScheduledJobsRunbyActiveUser}" style="color:red;">
                                                            <i>Inactive User</i>
                                                        </apex:outputPanel>
                                                        
                                                        <apex:outputPanel >
                                                            <apex:commandLink action="{!restartScheduledJobs}" status="assign-action-status" styleClass="slds-m-left_medium slds-button {!IF(isScheduledJobsRunbyActiveUser,'slds-button_brand','slds-button_destructive')}"  reRender="popup_op,JobsStatus" oncomplete="add_popup_text('Succesfully restarted Scheduled Jobs to run under you.');" >Restart Scheduled Jobs under my Admin User
                                                                <apex:param assignTo="{!is_delete_invoices}" value="False" name="assign_del_inv3" />
                                                                <apex:param assignTo="{!is_delete_bacs}" value="False" name="assign_del_bac3" />
                                                            </apex:commandLink>
                                                        </apex:outputPanel>
                                                    </div>
                                                </apex:outputPanel>
                                            </apex:outputPanel>
                                            <!-- ------------------------------ Breadwinner Wide Settings End----------------------- -->
                                            <!-- Deleting Invoice/BAC when there are no Apps Connected- -->
                                            <apex:outputPanel layout="block" rendered="{!AND(isBreadwinnerAdministrator, orgsNotConnected, showGeneralSection)}" id="deleteSection">  
                                                <div class="slds-section" id="GeneralDeleteRecDivId" >
                                                    <h3 class="slds-section-title_divider" style="padding: 0.19rem;">
                                                        <button class="slds-button slds-section__title-action"  type="button" onclick="showHideSectionConent('GeneralDeleteRecDivId','GeneralDeleteRecDivIdImage');" style="letter-spacing: .0625rem;text-transform: initial;">
                                                            <img id="GeneralDeleteRecDivIdImage" src="{!URLFOR($Resource.Breadwinner_Xero, 'Breadwinner_Xero/Images/SectionClose.png')}" style="margin-bottom: 3px;margin-right: 4px;" />
                                                            <span style="color: rgb(62, 62, 60); text-transform: uppercase; font-size: .75rem;padding-left: 3px;">Delete Xero Data in Salesforce</span></button>
                                                        </h3>
                                                        <div class="slds-section__content">
                                                            <apex:includeLightning />
                                                            <apex:outputPanel layout="block" id="deleteDisconnectedSectionId" styleclass="slds-m-horizontal_small">
                                                            <div class="slds-text-title_caps slds-m-top_small" style="color:red;">Don&apos;t use the delete functionality unless specifically asked by Breadwinner Support.</div>
                                                            <div class="slds-text-title slds-m-top_small">Use the below Delete buttons to delete the specific object related Xero records in Salesforce. (no data in Xero will be affected)<br/><br/>Due to Salesforce limitations, Breadwinner may not delete all of your records at once, if you have more than 10000 records, please continue deleting records until all records are deleted.</div>
                                                            <apex:outputPanel id="DeleteDisconnectionSectionId" layout="block" rendered="{!!isFreePlan}">
                                                            <apex:outputPanel rendered="{!showDeleteDisconnectionSection}">
                                                            <div id="DeleteDisconnectedRecordsCmpSection"/>
                                                                <script>
                                                                    try{
                                                                        $Lightning.use("{!JSENCODE(If(cmpNameSpacePrefix != '', cmpNameSpacePrefix, 'c'))}:lightningOutUnstyled", function() {
                                                                            $Lightning.createComponent(
                                                                                "{!JSENCODE(If(cmpNameSpacePrefix != '', cmpNameSpacePrefix, 'c'))}:deleteRecords",
                                                                                {"connectedOrgName":'{!If(orgsNotConnected, "Others", xeroOrgId)}'},
                                                                                "DeleteDisconnectedRecordsCmpSection",
                                                                                function(cmp) {
                                                                                    console.log("Component is created!");
                                                                                    console.log(cmp);
                                                                                });
                                                                            });
                                                                    }
                                                                    catch(e){
                                                                        console.log("exception while loading the component"+e);
                                                                    }
                                                                            
                                                                </script>
                                                                </apex:outputPanel>
                                                                </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </div>
                                                </div>                                    
                                            </apex:outputPanel>
                                            <apex:outputPanel layout="block" rendered="{!AND(NOT(orgsNotConnected),isBreadwinnerAdministrator, showGeneralSection)}" id="restartSyncsSection">
                                                <h3 class="slds-section-title_divider slds-m-bottom_small slds-m-top_medium">Restarting and Updating</h3>
                                                <div class="slds-m-horizontal_medium">
                                                    <apex:outputPanel layout="block">
                                                        <span>
                                                            <apex:commandLink value="Restart Invoice Sync" styleClass="slds-button slds-button_brand slds-m-top_x-small" reRender="popup_op,nothing" rendered="{!!isFreePlan}" action="{!restartHistoricalSync}" oncomplete="add_popup_text('Historical Invoice sync was started successfully.');" status="assign-action-status">
                                                                <apex:param assignTo="{!is_delete_invoices}" value="False" name="assign_del_inv4" />
                                                                <apex:param assignTo="{!is_delete_bacs}" value="False" name="assign_del_bac4" />
                                                            </apex:commandLink>
                                                        </span>
                                                        <span>
                                                            <apex:commandLink value="Restart Xero Contact Sync" styleClass="slds-m-left_small slds-button slds-button_brand slds-m-top_x-small" action="{!restartHistoricalAccountSync}" status="assign-action-status"  reRender="RestartHistoricalBACSyncScriptPanel" onComplete="onCompletionOfRestartHistoricalBACSync();">
                                                                <apex:param assignTo="{!is_delete_invoices}" value="False" name="assign_del_inv5" />
                                                                <apex:param assignTo="{!is_delete_bacs}" value="False" name="assign_del_bac5" />
                                                            </apex:commandLink>
                                                        </span>
                                                        <span>
                                                            <apex:commandLink value="Restart Hourly Sync Schedule" styleClass="slds-m-left_small slds-button slds-button_brand slds-m-top_x-small" action="{!restartHourlySync}" status="assign-action-status" oncomplete="add_popup_text('Hourly sync was scheduled successfully.');" reRender="nothing">
                                                                <apex:param assignTo="{!is_delete_invoices}" value="False" name="assign_del_inv6" />
                                                                <apex:param assignTo="{!is_delete_bacs}" value="False" name="assign_del_bac6" />
                                                            </apex:commandLink>
                                                        </span>
                                                        <span>
                                                            <apex:commandLink value="Update Revenue Accounts, Currencies and Tax Rates" styleClass="slds-m-left_small slds-button slds-button_brand slds-m-top_x-small" reRender="nothing" rendered="{!isFreePlan}"  action="{!refreshXeroAccountingDetails}" status="assign-action-status" oncomplete="add_popup_text('Succesfully restarted Revenue codes, Tax codes and Currencies sync.');">
                                                                <apex:param assignTo="{!is_delete_invoices}" value="False" name="assign_del_inv8" />
                                                                <apex:param assignTo="{!is_delete_bacs}" value="False" name="assign_del_bac8" />
                                                            </apex:commandLink>
                                                        </span>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" rendered="{!!isFreePlan}">
                                                        <span>
                                                            <apex:commandLink value="Update Account and Opportunity RollUps" styleClass="slds-button slds-button_brand slds-m-top_x-small" action="{!updateAccountAndOpportunityRollups}" oncomplete="add_popup_text('Account and Opportunity rollups batch was started succesfully.');" status="assign-action-status" reRender="nothing" >
                                                                <apex:param assignTo="{!is_delete_invoices}" value="False" name="assign_del_inv7" />
                                                                <apex:param assignTo="{!is_delete_bacs}" value="False" name="assign_del_bac7" />
                                                            </apex:commandLink>
                                                        </span> 
                                                        <span>
                                                            <apex:commandLink value="Update Revenue Accounts, Currencies and Tax Rates" styleClass="slds-m-left_small slds-button slds-button_brand slds-m-top_x-small" reRender="nothing"  action="{!refreshXeroAccountingDetails}" status="assign-action-status" oncomplete="add_popup_text('Succesfully restarted Revenue codes, Tax codes and Currencies sync.');">
                                                                <apex:param assignTo="{!is_delete_invoices}" value="False" name="assign_del_inv8" />
                                                                <apex:param assignTo="{!is_delete_bacs}" value="False" name="assign_del_bac8" />
                                                            </apex:commandLink>
                                                        </span>
                                                    </apex:outputPanel>
                                                </div>
                                                <h3 class="slds-section-title_divider slds-m-bottom_small slds-m-top_medium">Mass Create Salesforce Records</h3>
                                                <div class="slds-m-horizontal_medium">
                                                    <div class="slds-text-longform">
                                                        <p>
                                                            Breadwinner has imported {!allXeroContactsCount} Xero Contacts, of which {!matchedXeroContactsCount} have been already matched to Salesforce Accounts and {!notAssociatedSFAccountXeroContactsCount} have been designated as not associated with a Salesforce Account. 
                                                            This leaves {!unmatchedXeroContactsCount} Xero Contacts that still need to be matched to a Salesforce Account. Click the button below to mass create {!unmatchedXeroContactsCount} Salesforce Accounts, one for each unmatched Xero Contacts.
                                                        </p>
                                                    </div>
                                                    <apex:outputPanel layout="block">
                                                        <span>
                                                            <apex:commandButton value="Mass Create Salesforce Accounts from Xero Contacts" styleClass="slds-button slds-button_brand slds-m-top_xxx-small" reRender="nothing" action="{!massAccountMatch}" status="assign-action-status" disabled="{!If(AND(NOT(ISBLANK(unmatchedXeroContactsCount)),unmatchedXeroContactsCount>0),false,true)}" oncomplete="add_popup_text('Your mass create of Xero Contacts as new Salesforce Accounts has started successfully.');">
                                                                <apex:param assignTo="{!is_delete_invoices}" value="False" name="assign_del_inv9" />
                                                                <apex:param assignTo="{!is_delete_bacs}" value="False" name="assign_del_bac9" />
                                                            </apex:commandButton>
                                                        </span>
                                                    </apex:outputPanel>                                
                                                </div>
                                                <div class="slds-m-horizontal_medium">
                                                    <apex:commandLink action="{!showEditDisableRollupSection}" rendered="{!AND(!isFreePlan,isBreadwinnerAdministrator)}" status="assign-action-status" rerender="DisableRollupsSettingSection">.</apex:commandLink>           
                                                    <apex:outputPanel layout="block" id="DisableRollupsSettingSection">     
                                                        <apex:outputPanel rendered="{!isEditDisableRollupSection}">
                                                            
                                                            <div class="slds-box slds-float_left slds-m-top_small" >
                                                                <span class="slds-checkbox slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-1">
                                                                    <label class="slds-checkbox__label" >
                                                                        <apex:inputCheckbox value="{!bwsettingWrapper.Disable_Opportunity_Rollups}"/>
                                                                        <span class="slds-checkbox_faux"></span>
                                                                        <span class="slds-form-element__label slds-m-left_small">Disable Opportunity Rollups</span>
                                                                        
                                                                    </label>
                                                                </span>
                                                                <span class="slds-checkbox slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-1">
                                                                    <label class="slds-checkbox__label" >
                                                                        <apex:inputCheckbox value="{!bwsettingWrapper.Disable_Account_Rollups}"/>
                                                                        <span class="slds-checkbox_faux"></span>
                                                                        <span class="slds-form-element__label slds-m-left_small">Disable Account Rollups</span>
                                                                        
                                                                    </label>
                                                                </span>
                                                                <div class="slds-m-top_small" >
                                                                    <apex:commandButton value="Save" action="{!saveDisableRollupSetting}" styleClass="slds-button slds-button_brand " status="assign-action-status"/>                                     
                                                                    <apex:commandButton value="Cancel" action="{!cancelDisableRollupSettingSection}" styleClass="slds-button slds-button_neutral" status="assign-action-status"/><Br/><Br/>
                                                                    <apex:commandButton value="Delete Duplicate Invoices" action="{!checkingAndDeletingDuplicateInvoices}" styleClass="slds-button slds-button_destructive" status="assign-action-status"/>    
                                                                </div>
                                                            </div>
                                                        </apex:outputPanel>     
                                                    </apex:outputPanel> 
                                                </div>
                                            </apex:outputPanel>
                                            <apex:outputPanel id="RestartHistoricalBACSyncScriptPanel">
                                                <script>
                                                function onCompletionOfRestartHistoricalBACSync()
                                                {
                                                    if({!isRestartHistoricalBACSyncSuccessful} == true)
                                                        add_popup_text('Xero Contact Sync was successfully restarted.');
                                                    else
                                                        add_popup_text('Unable to restart Xero Contact Sync. Please try again later.');                
                                                }
                                                </script>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                        
                                    </div>
                                    <div id="ADMIN-22" class="slds-hide" role="tabpanel" aria-labelledby="Connection-Troubleshoot">
                                        
                                        <!-- -----------------------------Connection Troubleshoot header start ---------------------------->
                                        <div class="slds-page-header" role="banner">
                                            <div class="slds-media slds-media_center">
                                                <div class="slds-media__figure">
                                                    <span class="slds-icon_container slds-icon-standard-opportunity" title="Troubleshooting">
                                                        <svg class="slds-icon slds-page-header__icon" aria-hidden="true">
                                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/standard-sprite/svg/symbols.svg#custom')}" />
                                                        </svg>
                                                    </span>
                                                </div>
                                                <div class="slds-media__body">
                                                    <p class="slds-page-header__title slds-truncate slds-align-middle" title="Troubleshooting">Troubleshooting</p>
                                                    <p class="slds-text-body_small slds-line-height_reset">Breadwinner  Xero </p>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- -----------------------------Connection Troubleshoot header END ---------------------------->
                                        <apex:outputPanel layout="block" styleClass="slds-m-around_small" rendered="{!orgsNotConnected}">
                                            <apex:pageMessage severity="WARNING" summary="Please connect to a Xero Org from the Setup section of Breadwinner tab."/>
                                        </apex:outputPanel>
                                        <apex:outputPanel rendered="{!AND(isMultiOrgEnabled, (xeroOrgId!=NULL))}">
                                            <ul class="slds-tabs_default__nav slds-m-bottom_medium slds-m-top_medium" role="tablist">
                                                <apex:variable var="tabindex" value="{!0}">
                                                    <apex:repeat value="{!appConfigMap}" var="appC">                                                        
                                                        <li class="slds-tabs_default__item slds-text-title_caps slds-truncate" title="{!appConfigMap[appC].Connecting_App_Name}" role="presentation">
                                                            <a class="slds-tabs_default__link" href="javascript:void(0);" role="tab" onclick="TroubleshootselectTab(this,'{!appConfigMap[appC].Xero_Org_ID}');" tabindex="0" aria-selected="true" aria-controls="{!appConfigMap[appC].Xero_Org_ID}" id="{!appConfigMap[appC].Xero_Org_ID}__item">
                                                                {!appConfigMap[appC].Connecting_App_Name}
                                                            </a>
                                                        </li>
                                                        <apex:variable var="tabindex" value="{!tabindex+1}"/>
                                                    </apex:repeat>
                                                </apex:variable>
                                            </ul>
                                        </apex:outputPanel>
                                        <apex:actionFunction name="sendXeroOrgId" action="{!QueryXeroOrgInfo}" status="assign-action-status"  reRender="ConnectionTabSection" oncomplete="HideStyleSheet();message();checkIfConsumerDetailsExist();" >
                                            <apex:param name="PassXeroOrgIdParam" value="" assignTo="{!xeroOrgId}"/>
                                        </apex:actionFunction>
                                        <apex:actionFunction name="checkIfConsumerDetailsExist" action="{!checkIfConsumerDetailsExist}" reRender="ConsumerDetailsExistStatus,ConsumerDetailsExistError,ScheduledjobStatus,scheduledlink"  status="ConsumerDetailsExistStatus" oncomplete="checkConnectionToXero();HideStyleSheet();message();"/>
                                        <apex:actionFunction name="checkConnectionToXero" action="{!checkConnectionToXero}" reRender="ConnectionToXeroStatus,ConnectionToXeroError" status="ConnectionToXeroStatus" oncomplete="checkIfContactPagingApiWorking();"/>
                                        <apex:actionFunction name="checkIfContactPagingApiWorking" action="{!checkIfContactPagingApiWorking}" reRender="ContactPagingApiWorkingStatus,ContactPagingApiWorkingError" status="ContactPagingApiWorkingStatus" oncomplete="checkIfInvoicePagingApiWorking();HideStyleSheet();message();"/>
                                        <apex:actionFunction name="checkIfInvoicePagingApiWorking" action="{!checkIfInvoicePagingApiWorking}" reRender="InvoicePagingApiWorkingStatus,InvoicePagingApiWorkingError" status="InvoicePagingApiWorkingStatus" oncomplete="checkIfInvoiceNonPagingApiWorking();HideStyleSheet();message();"/>
                                        <apex:actionFunction name="checkIfInvoiceNonPagingApiWorking" action="{!checkIfInvoiceNonPagingApiWorking}" reRender="InvoiceNonPagingApiWorkingStatus,InvoiceNonPagingApiWorkingError" status="InvoiceNonPagingApiWorkingStatus" oncomplete="renderschedjob();HideStyleSheet();message();" />
                                        <apex:actionFunction name="renderschedjob" reRender="ScheduledjobStatus,scheduledlink" status="ScheduledjobStatus" oncomplete="HideStyleSheet();message();" />
                                        <apex:outputPanel layout="block" styleClass="slds-m-around_small" id="ConnectionTabSection">    
                                            <!-- ------------------------------ Xero Org Wide Settings Start----------------------- -->
                                            <apex:outputPanel layout="block" rendered="{!AND(NOT(orgsNotConnected), xeroOrgId!=null, xeroOrgId!='')}">
                                                <h3 class="slds-section-title_divider slds-m-bottom_small">Troubleshooting {!IF(AND(NOT(ISBLANK(appConfigMap[xeroOrgId].Connecting_App_Name)),appConfigMap[xeroOrgId].Connecting_App_Name <> 'xero'), appConfigMap[xeroOrgId].Connecting_App_Name, 'Breadwinner')}</h3>
                                                <apex:pageMessage rendered="{!NOT(bwsettingWrapper.New_Interface)}" severity="WARNING" strength="3" summary="Please reconnect to Xero before beginning Troubleshooting. You can do so in Step 2 on the Breadwinner tab." ></apex:pageMessage>
                                                <div class="slds-m-horizontal_small slds-m-bottom_medium">
                                                    <table border="0" width="60%" cellpadding="2" style="font-size:medium;line-height:2;">
                                                        <tr>
                                                            <td style="width:4%">
                                                                1)
                                                            </td>
                                                            <td style="width:55%">
                                                                Checking if Xero is connected
                                                            </td>
                                                            <td align="left" style="width: 10%;">
                                                                <apex:actionStatus id="ConsumerDetailsExistStatus" >
                                                                    <apex:facet name="start" >
                                                                        <div role="alert">
                                                                            <div role="status" class="slds-spinner slds-spinner_small slds-spinner_brand troubleshootspinner">
                                                                                <span class="slds-assistive-text">Loading</span>
                                                                                <div class="slds-spinner__dot-a"></div>
                                                                                <div class="slds-spinner__dot-b"></div>
                                                                            </div>
                                                                        </div>                   
                                                                    </apex:facet>
                                                                    <apex:facet name="stop">
                                                                        <apex:image value="{!IF(showConsumerDetailsExist, IF(areConsumerDetailsExist , 'https://cdn.daddyanalytics.com/breadwinner/images/green_check.png' , 'https://cdn.daddyanalytics.com/breadwinner/images/red_check.png' ), '/img/prev_cal_arrow.gif')}" style="{!IF(NOT(showConsumerDetailsExist), 'opacity: 0;','')}"  height="30" width="30"/>
                                                                    </apex:facet>
                                                                </apex:actionStatus>
                                                            </td>
                                                        </tr>
                                                        
                                                        <tr>
                                                            <td>
                                                            </td>
                                                            <td colspan ="2">
                                                                <apex:outputPanel layout="block" id="ConsumerDetailsExistError" >
                                                                    <apex:pagemessage rendered="{!AND(showConsumerDetailsExist,NOT(areConsumerDetailsExist),NOT(ISBLANK(errorConsumerDetailsExist)))}"  severity="ERROR" Summary="{!errorConsumerDetailsExist}" strength="3" ></apex:pagemessage>
                                                                </apex:outputPanel>
                                                            </td>
                                                        </tr>
                                                        
                                                        <tr>
                                                            <td>
                                                                2)
                                                            </td>
                                                            <td>
                                                                Checking if connection is valid
                                                            </td>
                                                            <td>
                                                                <apex:outputPanel id="ConnectionToXeroStatuss">
                                                                    <apex:actionStatus id="ConnectionToXeroStatus" >
                                                                        <apex:facet name="start" >
                                                                            <div role="alert">
                                                                                <div role="status" class="slds-spinner slds-spinner_small slds-spinner_brand troubleshootspinner">
                                                                                    <span class="slds-assistive-text">Loading</span>
                                                                                    <div class="slds-spinner__dot-a"></div>
                                                                                    <div class="slds-spinner__dot-b"></div>
                                                                                </div>
                                                                            </div>               
                                                                        </apex:facet>
                                                                        <apex:facet name="stop">
                                                                            <apex:image value="{!IF(showConnectingToXero, IF(isConnectingToXero, 'https://cdn.daddyanalytics.com/breadwinner/images/green_check.png' , 'https://cdn.daddyanalytics.com/breadwinner/images/red_check.png' ), '/img/prev_cal_arrow.gif')}" style="{!IF(NOT(showConnectingToXero), 'opacity: 0;','')}" height="30" width="30"/>
                                                                        </apex:facet>
                                                                    </apex:actionStatus>
                                                                </apex:outputPanel>
                                                            </td>
                                                        </tr>
                                                        
                                                        <tr>
                                                            <td>
                                                            </td>
                                                            <td colspan ="2">
                                                                <apex:outputPanel layout="block" id="ConnectionToXeroError">
                                                                    <apex:pagemessage rendered="{!AND(showConnectingToXero,NOT(isConnectingToXero),NOT(ISBLANK(errorConnectingToXero)))}" severity="ERROR" Summary="{!errorConnectingToXero}" strength="3" ></apex:pagemessage>
                                                                </apex:outputPanel>
                                                            </td>
                                                        </tr>
                                                        
                                                        <tr>
                                                            <td>
                                                                3)
                                                            </td>
                                                            <td>
                                                                Checking for paging API of Xero Contacts
                                                            </td>
                                                            <td>
                                                                <apex:actionStatus id="ContactPagingApiWorkingStatus" >
                                                                    <apex:facet name="start" >
                                                                        <div role="alert">
                                                                            <div role="status" class="slds-spinner slds-spinner_small slds-spinner_brand troubleshootspinner">
                                                                                <span class="slds-assistive-text">Loading</span>
                                                                                <div class="slds-spinner__dot-a"></div>
                                                                                <div class="slds-spinner__dot-b"></div>
                                                                            </div>
                                                                        </div>               
                                                                    </apex:facet>
                                                                    <apex:facet name="stop">
                                                                        <apex:image value="{!IF(showContactPagingApiWorking, IF(isContactPagingApiWorking, 'https://cdn.daddyanalytics.com/breadwinner/images/green_check.png' , 'https://cdn.daddyanalytics.com/breadwinner/images/red_check.png' ), '/img/prev_cal_arrow.gif')}" style="{!IF(NOT(showContactPagingApiWorking   ), 'opacity: 0;','')}" height="30" width="30"/>
                                                                    </apex:facet>
                                                                </apex:actionStatus>
                                                            </td>
                                                        </tr>
                                                        
                                                        <tr>
                                                            <td>
                                                            </td>
                                                            <td colspan ="2">
                                                                <apex:outputPanel layout="block" id="ContactPagingApiWorkingError" >
                                                                    <apex:pagemessage rendered="{!AND(showContactPagingApiWorking,NOT(isContactPagingApiWorking),NOT(ISBLANK(errorContactPagingApiWorking)))}" severity="ERROR" Summary="{!errorContactPagingApiWorking}" strength="3" ></apex:pagemessage>
                                                                </apex:outputPanel>
                                                            </td>
                                                        </tr>
                                                        
                                                        <tr style="display:{!if(isFreePlan,'None','')}">
                                                            <td>
                                                                4)
                                                            </td>
                                                            <td>
                                                                Checking for paging API of Xero Invoices
                                                            </td>
                                                            <td>
                                                                <apex:actionStatus id="InvoicePagingApiWorkingStatus" >
                                                                    <apex:facet name="start" >
                                                                        <div role="alert">
                                                                            <div role="status" class="slds-spinner slds-spinner_small slds-spinner_brand troubleshootspinner">
                                                                                <span class="slds-assistive-text">Loading</span>
                                                                                <div class="slds-spinner__dot-a"></div>
                                                                                <div class="slds-spinner__dot-b"></div>
                                                                            </div>
                                                                        </div>                   
                                                                    </apex:facet>
                                                                    <apex:facet name="stop">
                                                                        <apex:image value="{!IF(showInvoicePagingApiWorking   , IF(isInvoicePagingApiWorking   , 'https://cdn.daddyanalytics.com/breadwinner/images/green_check.png' , 'https://cdn.daddyanalytics.com/breadwinner/images/red_check.png' ), '/img/prev_cal_arrow.gif')}" style="{!IF(NOT(showInvoicePagingApiWorking   ), 'opacity: 0;','')}" height="30" width="30"/>
                                                                    </apex:facet>
                                                                </apex:actionStatus>
                                                            </td>
                                                        </tr>
                                                        
                                                        <tr style="display:{!if(isFreePlan,'None','')}">
                                                            <td>
                                                            </td>
                                                            <td colspan ="2">
                                                                <apex:outputPanel layout="block" id="InvoicePagingApiWorkingError" >
                                                                    <apex:pagemessage rendered="{!AND(showInvoicePagingApiWorking   ,NOT(isInvoicePagingApiWorking   ),NOT(ISBLANK(errorInvoicePagingApiWorking)))}" severity="ERROR" Summary="{!errorInvoicePagingApiWorking}" strength="3" ></apex:pagemessage>
                                                                </apex:outputPanel>
                                                            </td>
                                                        </tr>
                                                        
                                                        <tr style="display:{!if(isFreePlan,'None','')}">
                                                            <td>
                                                                5)
                                                            </td>
                                                            <td>
                                                                Checking non-paging API of Xero Invoices
                                                            </td>
                                                            <td>
                                                                <apex:actionStatus id="InvoiceNonPagingApiWorkingStatus" >
                                                                    <apex:facet name="start" >
                                                                        <div role="alert">
                                                                            <div role="status" class="slds-spinner slds-spinner_small slds-spinner_brand troubleshootspinner">
                                                                                <span class="slds-assistive-text">Loading</span>
                                                                                <div class="slds-spinner__dot-a"></div>
                                                                                <div class="slds-spinner__dot-b"></div>
                                                                            </div>
                                                                        </div>                   
                                                                    </apex:facet>
                                                                    <apex:facet name="stop">
                                                                        <apex:image value="{!IF(showInvoiceNonPagingApiWorking, IF(isInvoiceNonPagingApiWorking, 'https://cdn.daddyanalytics.com/breadwinner/images/green_check.png' , 'https://cdn.daddyanalytics.com/breadwinner/images/red_check.png' ), '/img/prev_cal_arrow.gif')}" style="{!IF(NOT(showInvoiceNonPagingApiWorking), 'opacity: 0;','')}" height="30" width="30"/>
                                                                        
                                                                    </apex:facet>
                                                                </apex:actionStatus>
                                                            </td>
                                                        </tr>
                                                        
                                                        <tr style="display:{!if(isFreePlan,'None','')}">
                                                            <td>
                                                            </td>
                                                            <td colspan ="2">
                                                                <apex:outputPanel layout="block" id="InvoiceNonPagingApiWorkingError" >
                                                                    <apex:pagemessage rendered="{!AND(showInvoiceNonPagingApiWorking,NOT(isInvoiceNonPagingApiWorking),NOT(ISBLANK(errorInvoiceNonPagingApiWorking)))}" severity="ERROR" Summary="{!errorInvoiceNonPagingApiWorking}" strength="3" ></apex:pagemessage>
                                                                </apex:outputPanel>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                    
                                                </div>
                                                
                                                <apex:outputPanel layout="block" rendered="{!isBreadwinnerAdministrator}">
                                                    <div class="slds-section" id="ConnectionDeleteRecDivId" >
                                                        <h3 class="slds-section-title_divider" style="padding: 0.19rem;">
                                                            <button class="slds-button slds-section__title-action"  type="button" onclick="showHideSectionConent('ConnectionDeleteRecDivId','ConnectionDeleteRecDivIdImage');" style="letter-spacing: .0625rem;text-transform: initial;">
                                                                <img id="ConnectionDeleteRecDivIdImage" src="{!URLFOR($Resource.Breadwinner_Xero, 'Breadwinner_Xero/Images/SectionClose.png')}" style="margin-bottom: 3px;margin-right: 4px;" />
                                                                <span style="color: rgb(62, 62, 60); text-transform: uppercase; font-size: .75rem;padding-left: 3px;">Delete Xero Data in Salesforce</span></button>
                                                        </h3>
                                                        <div class="slds-section__content">
                                                            <apex:outputPanel layout="block" id="deleteSectionId" styleclass="slds-m-horizontal_small">
                                                                <div class="slds-text-title_caps slds-m-top_small" style="color:red;">Don&apos;t use the delete functionality unless specifically asked by Breadwinner Support.</div>
                                                                <div class="slds-text-title slds-m-top_small">Use the below Delete buttons to delete the specific object related Xero records in Salesforce. (no data in Xero will be affected)<br/><br/>Due to Salesforce limitations, Breadwinner may not delete all of your records at once, if you have more than 10000 records, please continue deleting records until all records are deleted.</div>
                                                                <br/>
                                                                <apex:outputPanel id="DeleteConnectionSectionId" layout="block" rendered="{!!isFreePlan}">
                                                                <apex:outputPanel rendered="{!showDeleteSection}">
                                                                <div id="DeleteConnectedRecordsCmpSection"/>
                                                                <script>
                                                                    try{
                                                                        $Lightning.use("{!JSENCODE(If(cmpNameSpacePrefix != '', cmpNameSpacePrefix, 'c'))}:lightningOutUnstyled", function() {
                                                                            $Lightning.createComponent(
                                                                                "{!JSENCODE(If(cmpNameSpacePrefix != '', cmpNameSpacePrefix, 'c'))}:deleteRecords",
                                                                                {"connectedOrgName":'{!If(orgsNotConnected, "Others", xeroOrgId)}'},
                                                                                "DeleteConnectedRecordsCmpSection",
                                                                                function(cmp) {
                                                                                    console.log("Component is created!");
                                                                                    console.log(cmp);
                                                                                });
                                                                            });
                                                                    }
                                                                    catch(e){
                                                                        console.log("exception while loading the component"+e);
                                                                    }
                                                                            
                                                                </script>
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </div>
                                                    
                                                </apex:outputPanel> 
                                                
                                            </apex:outputPanel>
                                            <!-- ------------------------------ Xero Org Wide Settings End----------------------- -->                                            
                                        </apex:outputPanel>
                                        
                                    </div>
                                    <div id="ADMIN-23" class="slds-hide" role="tabpanel" aria-labelledby="StatusLogs">
                                        
                                        <div class="slds-page-header slds-m-bottom_medium" role="banner">
                                            <div class="slds-media slds-media_center">
                                                <div class="slds-media__figure">
                                                    <svg aria-hidden="true" class="slds-icon slds-icon-standard-opportunity">
                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/standard-sprite/svg/symbols.svg#custom')}"></use>
                                                    </svg>
                                                </div>
                                                <div class="slds-media__body">
                                                    <p class="slds-page-header__title slds-truncate" title="Status Logs">Status Logs</p>
                                                    <p class="slds-text-body_small">Breadwinner  Xero </p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="slds-m-horizontal_small">
                                            <div class="slds-text-color_weak">
                                                This page shows error messages and exceptions. To check logs please click on the button below.
                                            </div>
                                            <apex:commandButton styleClass="slds-m-top_medium slds-button slds-button_brand" value="Check Log for Recent Errors" onclick="drawTable();" reRender="nothingRenders" />
                                            
                                            <div id="StatusLogSpinner" style="display:none;">
                                                <div class="slds-spinner_container">
                                                    <div class="slds-spinner_brand slds-spinner slds-spinner_medium" role="alert">
                                                        <span class="slds-assistive-text">Loading</span>
                                                        <div class="slds-spinner__dot-a"></div>
                                                        <div class="slds-spinner__dot-b"></div>
                                                    </div>
                                                </div>
                                            </div>                                        
                                            
                                            <div  class="slds-m-top_medium" id="table_div"></div>
                                            <div id="message" class="slds-m-top_medium" ></div>
                                        </div>
                                        
                                    </div>
                                    <!-- Batch Invoice Section Start here -->
                                    <div id="TOOLS-1" class="slds-hide" role="tabpanel" aria-labelledby="BatchInvoice">                                        
                                        <!-- Adding SLDS Modal for popup box -->
                                        <div >
                                            <div class="slds-modal slds-modal_small" aria-hidden="false" role="dialog" id="alert_popup">
                                                <div class="slds-modal__container" style="min-width: 25rem; width: 25%;">
                                                    <div class="slds-modal__content slds-p-around_medium">
                                                        <div>
                                                            <p>Dynamic Popup Text will come here</p>
                                                        </div>
                                                        <div align="right" style="margin-top: 1rem;">
                                                            <apex:commandLink id="okayAlert" styleClass="btns slds-button slds-button_brand" value="OK" onclick="cancelDiscBatchInv();" reRender="nothing"/>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="slds-backdrop" id="backdrop"></div>
                                        </div>                                                
                                        <!-- End of Modal -->
                                        <div class="slds-page-header slds-m-bottom_x-small" role="banner">
                                            
                                            <div class="slds-media slds-media_center">
                                                <div class="slds-media__figure">
                                                    <svg aria-hidden="true" class="slds-icon slds-icon-standard-user">
                                                        <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/utility-sprite/svg/symbols.svg#moneybag')}"></use>
                                                    </svg>
                                                </div>
                                                <div class="slds-media__body">
                                                    <p class="slds-page-header__title slds-truncate" title="Batch Invoicing from Multiple Opportunities"> Batch Invoicing from Multiple Opportunities </p>
                                                    <p class="slds-text-body_small">Breadwinner  Xero </p>
                                                </div>
                                            </div>
                                        </div>                                    
                                        <apex:outputPanel layout="block" id="BatchInvoiceSection">                                            
                                            <div class="slds-p-horizontal_small slds-m-bottom_large">                                                
                                                <apex:pageMessage severity="info" rendered="{!AND(showBatchInvoiceSection, isReadOnly)}" summary="You are using Breadwinner in Xero Read Only Mode. While Breadwinner reads data from Xero, no changes will be made to Xero. Xero is in Read-Only mode and will not be altered in any way."></apex:pageMessage>
                                                <apex:pageMessages id="tt" escape="false" ></apex:pageMessages>                        
                                                <apex:outputPanel rendered="{!AND(showSearch,showBatchInvoiceSection,isMultiOrgEnabled)}" layout="block" id="selectingXeroOrgName">
                                                    <div class="slds-text-heading_small slds-p-horizontal_small slds-m-top_medium" style="font-style:italic">
                                                        As you are using Breadwinner with Multiple Xero Orgs, please select the Xero Org in which you want to perform the Batch Invoicing.
                                                    </div>
                                                    <div class="slds-grid slds-grid_wrap">                            
                                                        <div class="slds-float_left slds-large-size_2-of-6 slds-p-horizontal_small slds-m-bottom_x-large">                                
                                                            <div class="slds-form-element "> 
                                                                <label class="slds-form-element__label slds-m-top_medium" >Xero Org Name</label>
                                                                <div class="slds-select_container">
                                                                    <apex:selectList label="Xero Org Name" size="1" value="{!appName}" styleClass="slds-select" style="width: 100%;" onchange="setXeroOrgName()" >
                                                                        <apex:selectOption itemLabel="--Please select the Xero Org--" itemValue="" />
                                                                        <apex:selectOptions value="{!appConfigNames}"></apex:selectOptions>
                                                                        <apex:actionFunction name="setXeroOrgName" action="{!setXeroConnectingAppName}" reRender="selectingXeroOrgName" oncomplete="message();"/>
                                                                    </apex:selectList>
                                                                </div>
                                                            </div>
                                                        </div>                               
                                                    </div>                           
                                                </apex:outputPanel>
                                                
                                                <apex:outputPanel rendered="{!AND(showSearch,showBatchInvoiceSection)}" layout="block">
                                                    <h3 class="slds-section-title_divider">Opportunity Criteria</h3>
                                                    <div align="right">
                                                        <span style="color: gray;font-size: 12px;">
                                                            Need more filters?<br/> Contact Breadwinner Support.
                                                        </span>
                                                    </div> 
                                                    <div class="slds-grid slds-grid_wrap">
                                                        <div class="slds-float_left slds-large-size_2-of-6 slds-p-horizontal_small">
                                                            <div class="slds-form-element "> 
                                                                <label class="slds-form-element__label slds-m-top_medium" >Opportunity Stage Name</label>
                                                                <div class="slds-select_container">
                                                                    <apex:selectList label="Opportunity Stage Name" size="1" value="{!oppStage}" styleClass="slds-select" style="width: 100%;">
                                                                        <apex:selectOption itemLabel="--Any Stage--" itemValue="" />
                                                                        <apex:selectOptions value="{!OppStageNames}"></apex:selectOptions>
                                                                    </apex:selectList>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="slds-float_left slds-large-size_2-of-6 slds-m-top_xx-large">
                                                            <span class="slds-checkbox">
                                                                <apex:inputcheckbox id="Exclude" value="{!ExcludeOppWithInvoicesCreated}"/> 
                                                                <apex:outputLabel styleclass="slds-checkbox__label" for="Exclude">
                                                                    <span class="slds-checkbox_faux"></span>
                                                                    Exclude Opportunities with an Invoice Created in the last 24 hours. 
                                                                </apex:outputLabel>
                                                            </span>
                                                        </div>
                                                        
                                                        <div class="slds-float_left slds-large-size_2-of-6 slds-p-horizontal_small">
                                                            <div class="slds-form-element" style="margin-right: 35px;">
                                                                <span>
                                                                    <label class="slds-form-element__label slds-m-top_medium" >Close Date Range</label>
                                                                    <div class="slds-select_container">
                                                                        <apex:selectList label="Close Date Range" size="1" value="{!RangeSelected}" styleClass="slds-select" style="width: 100%;" onchange="setFRomToDateValues();" >
                                                                            <apex:selectOption itemLabel="Custom" itemValue="Custom"  />
                                                                            <apex:selectOption itemLabel="All Time" itemValue="All Time"  />
                                                                            <apex:selectOption itemLabel="Last Month" itemValue="Last Month" />
                                                                            <apex:selectOption itemLabel="This Month" itemValue="This Month" />
                                                                            <apex:selectOption itemLabel="Next Month" itemValue="Next Month" />
                                                                            <apex:actionFunction action="{!settingDatevaluesbasedOnRangeSelected}" name="setFRomToDateValues" reRender="Fromdate,Todate,tt" oncomplete="message();" status="assign-action-status" /> 
                                                                        </apex:selectList>
                                                                    </div>
                                                                </span>
                                                            </div>
                                                            <div class="slds-grid slds-form-element slds-grid_wrap"  style="margin-right: 47px;">
                                                                <div class="slds-form-element__control slds-large-size_1-of-2 slds-m-right_small">
                                                                    <label class="slds-form-element__label slds-m-top_medium" >From</label>
                                                                    <!-- <apex:input type="date" id="Fromdate" value="{!FromDate}" styleClass="slds-input"  html-autofocus="false" /> -->
                                                                    <apex:inputField value="{!InvForFromDate.Bread_Winner__Invoice_Date__c}" id="Fromdate" styleclass="slds-input"/>
                                                                </div>
                                                                <div class="slds-form-element__control slds-large-size_1-of-2">
                                                                    <label class="slds-form-element__label slds-m-top_medium" >To</label>
                                                                    <!-- <apex:input type="date" id="Todate" value="{!ToDate}" styleClass="slds-input"  html-autofocus="false" /> -->
                                                                    <apex:inputField value="{!InvForToDate.Bread_Winner__Invoice_Date__c}" id="Todate" styleclass="slds-input"/>
                                                                </div>
                                                            </div>
                                                            
                                                        </div>
                                                    </div>
                                                    <br/>
                                                    <center>  <apex:commandButton action="{!searchForOpportunities}" value="Search" reRender="BatchInvoiceSection" status="assign-action-status" styleclass="slds-button slds-button_brand" onclick="resetSelectedCountMap();" oncomplete="message();"/>
                                                    </center><br/>
                                                </apex:outputPanel>
                                                <apex:outputPanel id="oppListSection" rendered="{!AND(showOpportunities==TRUE,showWrapper== FALSE,IF(isMultiOrgEnabled, appName!= NULL, TRUE)) }">
                                                    <h3 class="slds-section-title_divider" style="display: block;">Opportunites</h3><br/>
                                                    
                                                    
                                                    <div class="slds-m-horizontal_small">
                                                        
                                                        <apex:outputPanel rendered="{!OppWrapperList.size > 0}">
                                                            <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                                                                <thead>
                                                                    <tr class="slds-text-title_caps">
                                                                        <th scope="col" style="padding-left: 8px;">
                                                                            <div class="slds-truncate" title="Select"> 
                                                                                <span class="slds-checkbox">
                                                                                    <input type="checkbox" id="Checkall" onchange="massCheckUncheck(this,{!offset});" /> 
                                                                                    <label class="slds-checkbox__label" for="Checkall">
                                                                                        <span class="slds-checkbox_faux"></span>
                                                                                    </label>
                                                                                </span>
                                                                            </div>
                                                                        </th>
                                                                        <th scope="col">
                                                                            <div class="slds-truncate" title="Account Name"> Account Name</div>
                                                                        </th>
                                                                        
                                                                        <th scope="col">
                                                                            <div class="slds-truncate" title="Opportunity Name">
                                                                                <apex:outputPanel >
                                                                                    &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; 
                                                                                </apex:outputPanel> 
                                                                                Opportunity Name
                                                                            </div>
                                                                        </th>
                                                                        <th scope="col">
                                                                            <div class="slds-truncate" title="Stage">Stage</div>
                                                                        </th>
                                                                        <th scope="col">
                                                                            <div class="slds-truncate" title="Close Date">Close Date</div>
                                                                        </th>
                                                                        <th scope="col">
                                                                            <div class="slds-truncate" title="Amount">Amount</div>
                                                                        </th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    
                                                                    <apex:repeat value="{!OppWrapperList}" var="opty" first="{!offset}" rows="50">
                                                                        <tr>
                                                                            <td scope="row" data-label="Opportunity Name">
                                                                                
                                                                                <span class="slds-checkbox">
                                                                                    <apex:inputcheckbox id="oppCheck" value="{!opty.isSelected}" onclick="checkCount(this,{!offset});" onchange="massCheckUncheck(this);" /> 
                                                                                    <apex:outputLabel styleclass="slds-checkbox__label" for="oppCheck">
                                                                                        <span class="slds-checkbox_faux"></span>
                                                                                    </apex:outputLabel>
                                                                                </span> 
                                                                                
                                                                            </td>
                                                                            <th scope="row" data-label="Account Name">
                                                                                <div class="slds-truncate" title="Account Name">{!opty.opp.Account.Name}</div>
                                                                            </th>
                                                                            <th scope="row" data-label="Opportunity Name">
                                                                                
                                                                                <div class="slds-truncate" title="Opportunity Name">
                                                                                    <apex:outputPanel rendered="{!opty.isInvoiceCreatedToday}">
                                                                                        <div class="slds-form-element__icon" style="padding-top:0px">
                                                                                            <a href="javascript:void(0);">
                                                                                                <img style="margin-left: 5px;margin-bottom: 2px;height:20px;width:20px;" src="{!URLFOR($Resource.Breadwinner_Xero, 'Breadwinner_Xero/Images/Info_icon_yellow.png')}" onmouseover="helptextPosition(this,' An Invoice is already created Today on this Opportunity.','165','25')" onmouseout="mouseouthelp();" />
                                                                                                <span class="slds-assistive-text">Help</span>
                                                                                            </a>
                                                                                        </div>
                                                                                    </apex:outputPanel>
                                                                                    <apex:outputPanel rendered="{!NOT(opty.isInvoiceCreatedToday)}">
                                                                                        &nbsp;&nbsp;&nbsp;&nbsp; &nbsp; 
                                                                                    </apex:outputPanel>    
                                                                                    &nbsp; {!opty.opp.Name}
                                                                                    
                                                                                </div>
                                                                                
                                                                            </th>
                                                                            
                                                                            <th scope="row" data-label="Stage">
                                                                                <div class="slds-truncate" title="Stage Name">{!opty.opp.StageName}</div>
                                                                            </th>
                                                                            <th scope="row" data-label="Stage">
                                                                                <div class="slds-truncate" title="Close Date">
                                                                                    <apex:outputText value="{0, date,  MM'/'d'/'yy}">
                                                                                        <apex:param value="{!opty.opp.Closedate}" /> 
                                                                                    </apex:outputText>
                                                                                </div>
                                                                            </th>
                                                                            <th scope="row" data-label="Stage">
                                                                                <div class="slds-truncate" title="Amount">{!opty.opp.Amount}</div>
                                                                            </th>
                                                                        </tr>
                                                                    </apex:repeat>
                                                                </tbody>
                                                            </table>
                                                        </apex:outputPanel>
                                                        
                                                    </div>
                                                    
                                                    <div align="Center" >
                                                        <apex:commandButton action="{!batchInvoicePrev}" value="Previous" status="assign-action-status" styleclass="slds-button slds-button_brand slds-m-top_medium slds-m-bottom_medium" disabled="{!Not(batchInvoiceHasPrev)}" reRender="oppListSection"/>
                                                        <apex:commandButton action="{!batchInvoiceNext}" value="Next" status="assign-action-status" styleclass="slds-button slds-button_brand slds-m-top_medium slds-m-bottom_medium" disabled="{!Not(batchInvoiceHasNext)}" reRender="oppListSection"/>
                                                    </div>
                                                    
                                                    <div align="right" >
                                                        <apex:commandButton action="{!invoiceGeneration}" value="Proceed" disabled="{!isReadOnly}" status="assign-action-status" reRender="BatchInvoiceSection,wrapSection" styleclass="slds-button slds-button_brand slds-m-top_medium slds-m-bottom_medium"  oncomplete="message();"/><br/>
                                                    </div>
                                                    <div align="center">
                                                        <apex:outputLabel style="font-style:italic;font-weight:bold;font-size:16px" rendered="{!isReadOnly}">You are using Breadwinner in Xero Read Only Mode. While Breadwinner reads data from Xero, no changes will be made to Xero. Xero is in Read-Only mode and will not be altered in any way.</apex:outputLabel>
                                                    </div>
                                                </apex:outputPanel>
                                                
                                                <apex:outputPanel id="wrapSection">
                                                    <apex:outputPanel rendered="{!AND(showOpportunities==FALSE,showWrapper== TRUE,is401Request == FALSE)}">
                                                        <h3 class="slds-section-title_divider" style="display: block;">Opportunities with Invoices and Xero Contacts</h3><br/>
                                                        <div class=" slds-m-horizontal_small ">
                                                            <apex:pageMessage severity="ERROR" rendered="{!if(MultipleXeroContactsSelectedCount == oiwrapper.size, TRUE, FALSE)}" summary=" Invoices can not be created against these Opportunities automatically, as the related Salesforce Account(s) are mapped with more than one Xero Contact." />
                                                            <table class="slds-table">
                                                                
                                                                
                                                                <apex:repeat value="{!OIWrapperMapWithAccount}" var="oiw">
                                                                    <tr>
                                                                        <td style="padding: 0px !important;">
                                                                            <div class="slds-box slds-box_x-small slds-grid" style="margin-top:1rem; background-color:{!if(OIWrapperMapWithAccount[oiw][0].xeroContactDisplaytext == 'Warning - Multiple','rgba(255, 0, 0, 0.19)',if(OIWrapperMapWithAccount[oiw][0].xeroContactDisplaytext == 'New','rgba(255, 228, 128, 0.33)',' rgb(216, 242, 231)'))}">
                                                                                <div class="slds-size_1-of-2 slds-m-right">
                                                                                    <apex:outputPanel rendered="{!if(OIWrapperMapWithAccount[oiw][0].xeroContactDisplaytext == 'Warning - Multiple',TRUE,FALSE)}"> 
                                                                                        <span style="font-weight: bold;" class="slds-text-body_small">
                                                                                            <apex:outputText value="Invoices under this will not be created as there are multiple Xero Contacts."></apex:outputText>
                                                                                        </span><br/>
                                                                                    </apex:outputPanel>
                                                                                    <span class="slds-text-title_caps">Account Name: </span><a class="BatchInvoiceLinks" href="/{!oiw.Id}" target="_blank">{!oiw.Name}</a>
                                                                                </div>
                                                                                <div class="slds-size_1-of-2 slds-m-left slds-text-align_right">
                                                                                    <span class="slds-text-title slds-truncate">
                                                                                        <apex:outputText value="{!if(OIWrapperMapWithAccount[oiw][0].xeroContactDisplaytext == 'New','A new Xero Contact will be created along with the Invoice.','')}"></apex:outputText>
                                                                                    </span>
                                                                                </div> 
                                                                                
                                                                            </div>
                                                                            
                                                                        </td>
                                                                        
                                                                    </tr>
                                                                    
                                                                    <apex:repeat value="{!OIWrapperMapWithAccount[oiw][0].bacList}" var="oiwXero">
                                                                        <tr>
                                                                            
                                                                            <td style="padding: 0px !important;">
                                                                                <div class="slds-m-left_xx-large slds-box slds-box_x-small" style="border-top-color: white;background-color:{!if(OIWrapperMapWithAccount[oiw][0].xeroContactDisplaytext == 'New','rgba(255, 228, 128, 0.33)','')}">
                                                                                    <span class="slds-text-title_caps">Xero Contact: </span>
                                                                                    <apex:outputLink styleClass="BatchInvoiceLinks" value="/{!oiwXero.Id}" rendered="{!if(oiwXero.Id == NULL, False, True)}" target="__blank"> {!oiwXero.CompanyName__c}</apex:outputLink>
                                                                                    <!-- <a href="/{!oiwXero.Id}" target="_blank">{!oiwXero.CompanyName__c}</a> -->
                                                                                    <apex:outputText rendered="{!if(oiwXero.Id == NULL, TRUE, FALSE)}" > {!oiwXero.CompanyName__c}</apex:outputText>
                                                                                </div>
                                                                            </td>
                                                                            
                                                                        </tr>   
                                                                    </apex:repeat>
                                                                    <apex:repeat value="{!OIWrapperMapWithAccount[oiw]}" var="oiwOpp">
                                                                        <tr>
                                                                            
                                                                            <td style="padding: 0px !important;">
                                                                                <div class="slds-m-left_xx-large ">
                                                                                    <div class="slds-m-left_xx-large slds-box slds-box_x-small slds-grid">
                                                                                        <div class="slds-size_1-of-3">
                                                                                            <span class="slds-text-title_caps">Opportunity: </span><a class="BatchInvoiceLinks" href="/{!oiwOpp.opty.Id}" target="_blank">{!oiwOpp.opty.Name} </a>
                                                                                        </div>
                                                                                        <div class="slds-size_1-of-3">
                                                                                            <span class="slds-text-title">Amount: </span>{!oiwOpp.opty.Amount}
                                                                                        </div>
                                                                                        <div class="slds-size_1-of-3">
                                                                                            <span class="slds-text-title">Stage Name: </span>{!oiwOpp.opty.stagename}
                                                                                        </div>
                                                                                        
                                                                                    </div>
                                                                                </div>
                                                                            </td>
                                                                            
                                                                        </tr>
                                                                        <tr>
                                                                            
                                                                            <td style="padding: 0px !important;">
                                                                                <div class="slds-m-left_xx-large">
                                                                                    <div class="slds-m-left_xx-large">
                                                                                        <div class="slds-m-left_xx-large slds-box slds-box_x-small slds-grid" style="border-top-color: white;background-color:{!if(OIWrapperMapWithAccount[oiw][0].xeroContactDisplaytext == 'Warning - Multiple','rgba(255, 0, 0, 0.19)',' rgb(216, 242, 231)')}">
                                                                                            <div class="slds-size_1-of-3" >
                                                                                                <span class="slds-text-title_caps">Invoice: </span>
                                                                                            </div>
                                                                                            <div class="slds-size_1-of-3">
                                                                                                <span class="slds-text-title">Total: </span>{!oiwOpp.inv_total}
                                                                                            </div>
                                                                                            <div class="slds-size_1-of-3 ">
                                                                                                <span class="slds-text-title">&nbsp;Invoice Date: </span>
                                                                                                <apex:outputText value="{0, date,  MM'/'dd'/'yy}">
                                                                                                    <apex:param value="{!oiwOpp.inv.Invoice_Date__c}" />
                                                                                                </apex:outputText>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </td>
                                                                        </tr>   
                                                                    </apex:repeat>
                                                                    
                                                                </apex:repeat>
                                                                
                                                            </table>
                                                            <div align="right" >
                                                                <apex:commandButton action="{!confirmXeroContacts}" value="{!if(AccountMapWithXeroContactNameSize > 0,'Create Xero Contact(s)','Next')}" disabled="{!if(MultipleXeroContactsSelectedCount == oiwrapper.size, TRUE, FALSE)}" rendered="{!oiwrapper.size > 0}" status="assign-action-status"  reRender="BatchInvoiceSection,wrapSection,confirmationPage" styleclass="slds-button slds-button_brand slds-m-top_medium" oncomplete="message();"/><br/>
                                                            </div>
                                                            
                                                        </div>
                                                        
                                                    </apex:outputPanel>
                                                </apex:outputPanel>
                                                
                                                <apex:outputPanel id="popup">
                                                    <apex:outputPanel rendered="{!showXeroContactWarning}">
                                                        
                                                        
                                                        <h3 class="slds-section-title_divider" style="display: block;">Xero Contact Warning </h3><br/>
                                                        
                                                        <div class="slds-m-horizontal_small">
                                                            <p class="slds-text-heading_small">There exists a few Xero Contacts with similar Salesforce Account Names in Xero, but they were not brought into Salesforce as they were not Customers (not Invoiced). </p>
                                                            <table class="slds-table slds-table_bordered slds-table_cell-buffer slds-m-top_medium">
                                                                <tr>
                                                                    <th><span class="slds-text-title_caps">SF Account</span></th>
                                                                    <th><span class="slds-text-title_caps">Xero Contact Name</span></th>
                                                                    
                                                                </tr>
                                                                <apex:variable var="index" value="{!0}" >
                                                                    <apex:repeat value="{!XeroContactsThatAreNotCustomersMapWithAccountNameDup}" var="xc">
                                                                        <tr>
                                                                            <td>{!XeroContactsThatAreNotCustomersMapWithAccountId[xc].name}</td>
                                                                            <td>
                                                                                
                                                                                <apex:inputHidden value="{!XeroContactsThatAreNotCustomersMapWithAccountNameDup[xc]}" html-class="{!xc}hdn" id="test"  />
                                                                                <span class="slds-radio">
                                                                                    <input type="radio" checked="true" name="XeroContact+{!xc}" id="{!xc+'name'}" value="{!XeroContactsThatAreNotCustomersMapWithAccountName[xc]}" onclick="disablingInput('{!xc+'inputtext'}',this,'{!index}')"  />
                                                                                    <label class="slds-radio__label" for="{!xc+'name'}">
                                                                                        <span class="slds-radio_faux"></span>
                                                                                        <span class="slds-form-element__label"> Use existing Xero Contact "<b><i>{!XeroContactsThatAreNotCustomersMapWithAccountName[xc]}</i></b>", and import it under Salesforce Account "<b><i>{!XeroContactsThatAreNotCustomersMapWithAccountId[xc].name}.</i></b>"</span>
                                                                                    </label>
                                                                                    <br/>
                                                                                </span><br/>
                                                                                <span class="slds-radio slds-m-top_x-small">
                                                                                    <input type="radio" name="XeroContact+{!xc}" id="{!xc+'dup'}" value="{!XeroContactsThatAreNotCustomersMapWithAccountNameDup[xc]}" onclick="enablingInput('{!xc+'inputtext'}',this,'{!index}')" />
                                                                                    <label class="slds-radio__label" for="{!xc+'dup'}">
                                                                                        <span class="slds-radio_faux"></span>
                                                                                        <span class="slds-form-element__label">
                                                                                            Create new Xero Contact <input class="slds-input" style="width: 10rem;" disabled="true" type="text" id="{!xc+'inputtext'}" value="{!XeroContactsThatAreNotCustomersMapWithAccountNameDup[xc]}" onchange="changeTheContact(this,'{!index}');checkingDuplicateInputValues();"/> and import it under Salesforce Account "<b><i>{!XeroContactsThatAreNotCustomersMapWithAccountId[xc].name}.</i></b>", and ignore existing Xero Contact "<b><i>{!XeroContactsThatAreNotCustomersMapWithAccountName[xc]}</i></b>".
                                                                                        </span>
                                                                                    </label>
                                                                                    <br/>
                                                                                </span>
                                                                                <script>
                                                                                document.getElementsByClassName("{!xc}hdn")[0].value = "{!XeroContactsThatAreNotCustomersMapWithAccountName[xc]}";
                                                                                </script>
                                                                                
                                                                                <apex:variable var="index" value="{!index+1}" />
                                                                                
                                                                            </td>
                                                                            
                                                                            
                                                                        </tr>
                                                                    </apex:repeat>
                                                                </apex:variable>
                                                            </table>
                                                            <div align="right" >
                                                                <apex:commandButton id="recheckbutton" styleclass="slds-button slds-button_brand slds-m-top_medium" action="{!reCheckDuplicateXeroContact}" status="assign-action-status" reRender="BatchInvoiceSection" value="Continue" oncomplete="HideStyleSheet(); message();" />
                                                            </div>    
                                                        </div>
                                                    </apex:outputPanel>
                                                </apex:outputPanel>
                                                
                                                <apex:outputPanel id="confirmationPage">
                                                    <apex:outputPanel rendered="{!showContactCreationSuccessPage}">
                                                        <h3 class="slds-section-title_divider" style="display: block;">Confirm to Create Invoices</h3><br/>
                                                        <div class="slds-m-horizontal_small" >
                                                            
                                                            <table class="slds-table">
                                                                <apex:repeat value="{!OIWrapperMapWithAccount}" var="oiw">
                                                                    <apex:outputPanel rendered="{!if(OIWrapperMapWithAccount[oiw][0].xeroContactDisplaytext == 'Warning - Multiple',FALSE,TRUE)}"> 
                                                                        <tr>
                                                                            <td style="padding: 0px;padding-top: 1rem;">
                                                                                <div class="slds-box slds-box_x-small slds-grid" style="background-color:rgb(216, 242, 231);}">
                                                                                    <div class="slds-size_1-of-2 slds-m-right ">
                                                                                        
                                                                                        <span class="slds-text-title_caps">Account Name: </span><a class="BatchInvoiceLinks" href="/{!oiw.Id}" target="_blank">{!oiw.Name}</a>
                                                                                        
                                                                                    </div>
                                                                                </div>
                                                                                
                                                                            </td>
                                                                            
                                                                        </tr>
                                                                        
                                                                        <apex:repeat value="{!OIWrapperMapWithAccount[oiw][0].bacList}" var="oiwXero">
                                                                            <tr>
                                                                                
                                                                                <td style="padding: 0px">
                                                                                    <div class="slds-m-left_xx-large slds-box slds-box_x-small" >
                                                                                        <span class="slds-text-title_caps">Xero Contact: </span>
                                                                                        <apex:outputLink styleClass="BatchInvoiceLinks" value="/{!oiwXero.Id}" target="_blank" rendered="{!if(oiwXero.Id == NULL,False,True)}">{!oiwXero.CompanyName__c}</apex:outputLink>
                                                                                        <!-- <a href="/{!oiwXero.Id}" target="_blank">{!oiwXero.CompanyName__c}</a> -->
                                                                                        <apex:outputLabel rendered="{!if(oiwXero.Id == NULL,True,False)}">{!oiwXero.CompanyName__c}</apex:outputLabel>
                                                                                    </div>
                                                                                </td>
                                                                                
                                                                            </tr>   
                                                                        </apex:repeat>
                                                                        <apex:repeat value="{!OIWrapperMapWithAccount[oiw]}" var="oiwOpp">
                                                                            <tr>
                                                                                
                                                                                <td style="padding: 0px">
                                                                                    <div class="slds-m-left_xx-large ">
                                                                                        <div class="slds-m-left_xx-large slds-box slds-box_x-small slds-grid">
                                                                                            <div class="slds-size_1-of-3">
                                                                                                <span class="slds-text-title_caps">Opportunity: </span><a class="BatchInvoiceLinks" href="/{!oiwOpp.opty.Id}" target="_blank">{!oiwOpp.opty.Name} </a>
                                                                                            </div>
                                                                                            <div class="slds-size_1-of-3">
                                                                                                <span class="slds-text-title">Amount: </span>{!oiwOpp.opty.Amount}
                                                                                            </div>
                                                                                            <div class="slds-size_1-of-3">
                                                                                                <span class="slds-text-title">Stage Name: </span>{!oiwOpp.opty.stagename}
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </td>
                                                                                
                                                                            </tr>
                                                                            <tr>
                                                                                
                                                                                <td style="padding: 0px;">
                                                                                    <div class="slds-m-left_xx-large">
                                                                                        <div class="slds-m-left_xx-large">
                                                                                            <div class="slds-m-left_xx-large slds-box slds-box_x-small slds-grid" style="border-top-color: white;background-color:rgb(216, 242, 231)">
                                                                                                <div class="slds-size_1-of-3" >
                                                                                                    <span class="slds-text-title_caps">Invoice: </span>
                                                                                                </div>
                                                                                                <div class="slds-size_1-of-3">
                                                                                                    <span class="slds-text-title">Total: </span>{!oiwOpp.inv_total}
                                                                                                </div>
                                                                                                <div class="slds-size_1-of-3">
                                                                                                    <span class="slds-text-title">&nbsp;Invoice Date: </span>
                                                                                                    <apex:outputText value="{0, date,  MM'/'dd'/'yy}">
                                                                                                        <apex:param value="{!oiwOpp.inv.Invoice_Date__c}" />
                                                                                                    </apex:outputText>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </td>
                                                                            </tr>   
                                                                        </apex:repeat><br/>
                                                                    </apex:outputPanel>    
                                                                </apex:repeat>
                                                                
                                                            </table>
                                                            
                                                            <div align="right" class="slds-float_right">
                                                                <div class="slds-form-element">
                                                                    <label class="slds-form-element__label slds-m-top_medium" >After successfully creating an Invoice, change the Opportunity Stage to: </label>
                                                                    <div class="slds-select_container">
                                                                        <apex:selectList label="Opportunity Stage Name" size="1" value="{!oppStagetobeModified}" styleClass="slds-select" >
                                                                            <apex:selectOption itemLabel="--Do Not Change Opportunity Stage after creating Invoice--" itemValue="" />
                                                                            <apex:selectOptions value="{!OppStageNames}"></apex:selectOptions>
                                                                        </apex:selectList>
                                                                    </div>
                                                                </div>
                                                                <apex:commandButton id="CreateInvButton" action="{!sendInvoicesToXero}" value="Create Invoice(s)" onclick="disableButton(this.id);" status="assign-action-status"  reRender="BatchInvoiceSection,wrapSection" styleclass="slds-button slds-button_brand slds-m-top_medium slds-m-bottom_medium" oncomplete="message();"/>
                                                            </div>
                                                            
                                                        </div>
                                                    </apex:outputPanel>
                                                    
                                                </apex:outputPanel>
                                                
                                                <apex:outputPanel id="InsertedInvoices" rendered="{!invoicesInserted.size > 0}">
                                                    <h3 class="slds-section-title_divider" style="display: block;">Invoices created </h3><br/>
                                                    <div class="slds-m-horizontal_small">
                                                        <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                                                            <tr>
                                                                <th>Invoice</th>
                                                                <th>Opportunity</th>
                                                                <th>Account</th>
                                                                <th>Xero Contact</th>
                                                                <th>Invoice Amount</th>
                                                            </tr>
                                                            <apex:repeat value="{!invoicesInserted}" var="inv" >
                                                                <tr>   
                                                                    <td><a class="BatchInvoiceLinks" href="/{!inv.Id}" target="_blank"> {!inv.name}  </a> </td>
                                                                    <td><a class="BatchInvoiceLinks" href="/{!inv.Opportunity__r.Id}" target="_blank">{!inv.Opportunity__r.name} </a></td>
                                                                    <td><a class="BatchInvoiceLinks" href="/{!inv.Account__r.id}" target="_blank">{!inv.Account__r.name} </a></td>
                                                                    <td><a class="BatchInvoiceLinks" href="/{!inv.Xero_Contact__r.Id}" target="_blank">{!inv.Xero_Contact__r.name} </a></td>
                                                                    <td>{!inv.Total__c} </td>
                                                                </tr>
                                                                
                                                            </apex:repeat>
                                                        </table>
                                                        
                                                    </div>
                                                    <div align="right" >
                                                        <apex:commandButton styleClass="slds-button slds-button_brand slds-m-top_medium" value="Finish" action="{!BatchInvoiceFinish}" reRender="BatchInvoiceSection" status="assign-action-status" oncomplete="message()"/>
                                                    </div>
                                                </apex:outputPanel>
                                                
                                            </div>                                            
                                        </apex:outputPanel>
                                    </div>
                                    <!-- Address Sync section Start here-->
                                    <div id="TOOLS-2" class="slds-hide" role="tabpanel" aria-labelledby="AddressSync">
                                            <!-- PAGE HEADER -->                                            
                                        <div class="slds-page-header slds-m-bottom_small" role="banner">
                                            <div class="slds-media slds-media_center">
                                                <div class="slds-media__figure">
                                                    <span class="slds-icon_container slds-icon-standard-user" title="Address Sync">
                                                        <svg class="slds-icon slds-page-header__icon" aria-hidden="true">
                                                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/standard-sprite/svg/symbols.svg#product_request')}" />
                                                        </svg>
                                                    </span>
                                                </div>
                                                <div class="slds-media__body">
                                                    <p class="slds-page-header__title slds-truncate slds-align-middle">Breadwinner Address Sync</p>
                                                    <p class="slds-text-body_small slds-line-height_reset">Breadwinner  Xero </p>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- / PAGE HEADER -->
                                        <apex:outputPanel layout="block" id="AddressSyncSection">
                                            <apex:outputPanel rendered="{!showAddressSyncSection}">
                                                <apex:actionFunction name="callPageLoadMethod" action="{!getAllRecords}" rendered="{!showAddressSyncSection}" status="pageload-action-status" reRender="AddressSyncSection" oncomplete="lightningMessageStyle();"/>
                                                <apex:actionStatus id="pageload-action-status" layout="block">
                                                    <apex:facet name="start">
                                                        <div class="slds-spinner_container">
                                                            <div class="slds-spinner_brand slds-spinner slds-spinner_medium" aria-hidden="false" role="alert">
                                                                <div class="slds-spinner__dot-a"></div>
                                                                <div class="slds-spinner__dot-b"></div>
                                                            </div>
                                                            <div class="slds-spinner-displaytext" role="alert">
                                                                <P>
                                                                    We are comparing addresses in Salesforce and Xero. This can take up to 30 seconds or more
                                                                </P>
                                                            </div>
                                                        </div>
                                                    </apex:facet>
                                                </apex:actionStatus>
                                            </apex:outputPanel>
                                            
                                            <apex:actionStatus id="assign-action-status-addresssync" layout="block">
                                                <apex:facet name="start">
                                                    <div class="slds-spinner_container">
                                                        <div class="slds-spinner_brand slds-spinner slds-spinner_medium" aria-hidden="false" role="alert">
                                                            <div class="slds-spinner__dot-a"></div>
                                                            <div class="slds-spinner__dot-b"></div>
                                                        </div>
                                                    </div>
                                                </apex:facet>
                                            </apex:actionStatus>
                                            
                                            <!-- Error Message if org not connected to Xero and PageMessages-->
                                            <apex:outputPanel styleclass="slds-m-horizontal_small" rendered="{!showAddressSyncSection}" layout="block">
                                                <apex:pageMessage severity="info" rendered="{!isReadOnly}" summary="You are using Breadwinner in Xero Read Only Mode. While Breadwinner reads data from Xero, no changes will be made to Xero. Xero is in Read-Only mode and will not be altered in any way."></apex:pageMessage>
                                                <apex:pageMessage severity="WARNING" rendered="{!isAnyFieldsNotAccessible}" summary="{!notAccessibleFields}"></apex:pageMessage>
                                            
                                                <apex:outputPanel id="oauthMessage" layout="block">
                                                    <apex:outputPanel rendered="{!isOAuthIssue}" styleClass="slds-text-align_left slds-text-heading_small" >
                                                        <apex:pageMessage rendered="{!isOAuthIssue}" escape="false" detail="Please reconnect using the link below or contact support. 
                                                                                                                            This only takes two minutes or so, but needs to be done by a Xero Admin.<br/>
                                                                                                                            To reconnect, go to Setup section and click the link 'reconnect to Xero'.
                                                                                                                            Optionally, to read more about why this happens, please see this <a href='{!BW_SupportPortalURL}/support/solutions/articles/44001664785' target='_blank' style='margin:0px'>help document</a>." summary="There was a problem with the connection to Xero." severity="WARNING" strength="3"/>
                                                    </apex:outputPanel>
                                                </apex:outputPanel>
                                                <apex:outputPanel id="messagePanel" layout="block">
                                                    <apex:outputPanel layout="block" rendered="{!AND(isStateAndCountryPicklistsEnabled, isAccountSyncDone)}" >
                                                        <div class="warningM6" style="color:black;border-radius: 4px">
                                                            <p>Salesforce's 'State and Country Picklists' are enabled, so Salesforce will prevent you from updating Accounts with a State or Country that is not in it's list of possible States / Countries. </p>  
                                                        </div>
                                                    </apex:outputPanel>
                                                    <apex:pageMessage id="Statecountryerror" escape="false" summary="Error:" detail="{!PageMessage}" rendered="{!IF(IsBlank(PageMessage),"false","true")}"  severity="ERROR" strength="2" />
                                                </apex:outputPanel>
                                            </apex:outputPanel>
                                            <apex:outputPanel styleclass="slds-m-horizontal_small" layout="block">
                                                <apex:pageMessages id="ErrorMessage" rendered="{!OR(IsBlank(PageMessage), NOT(isAccountSyncDone))}" />
                                            </apex:outputPanel>
                                            <!-- Error Message End -->
                                            
                                            <!-- PAGE BODY -->
                                            <apex:outputPanel rendered="{!showAddressSyncSection}" id="AddressSyncContent">
                                                
                                                <!-- WIDGET AND VIDEO SECTION -->
                                                <apex:outputPanel layout="block">
                                                    <div class="slds-grid slds-wrap slds-m-horizontal_x-large slds-m-bottom_x-large" style="align-items:inherit;">
                                                        <div class="slds-col slds-size_1-of-1 slds-small-size_12-of-12 slds-medium-size_12-of-12 slds-large-size_5-of-12 slds-box" style="flex:auto">
                                                            <table style="width:100%;">
                                                                <tr>
                                                                    <td style="width:4%;vertical-align:top;padding-right: 0.3%;padding-top: 0.3%;">
                                                                        <div class="slds-grid slds-grid_align-end"><div style="width:1.1em;height:1.1em;background-color:rgba(255, 0, 0, 0.19);"></div></div>
                                                                    </td>
                                                                    <td style="width:95%;vertical-align:top;">
                                                                        <div class="slds-p-left_x-small">The color red indicates that the line is different between Salesforce and Xero.</div>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td style="vertical-align:top;padding-right: 0.3%;padding-top: 0.3%;">
                                                                        <div class="slds-grid slds-grid_align-end slds-p-top_small"><div style="width:1.1em;height:1.1em;background-color:rgba(255, 228, 128, 0.33);"></div></div>
                                                                    </td>
                                                                    <td>
                                                                        <div class="slds-p-left_x-small slds-p-top_small">The color yellow indicates that the line is populated in one, but missing in the other.</div>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td style="padding-right: 0.3%;"><div class="slds-grid slds-grid_align-end slds-p-top_small"><span class="arrow">&#10140;</span></div></td>
                                                                    <td><div class="slds-p-left_x-small slds-p-top_small">A Small Arrow will copy just that line.</div></td>
                                                                </tr>    
                                                                <tr>
                                                                    <td><div class="slds-grid slds-grid_align-end"><span class="widget_big_arrow">&#10140;</span></div></td>
                                                                    <td><div class="slds-p-left_x-small">A Large Arrow will copy the entire company name and address.</div></td>
                                                                </tr>
                                                            </table>   
                                                        </div>
                                                        <div class="slds-col slds-size_1-of-1 slds-small-size_12-of-12 slds-medium-size_12-of-12 slds-large-size_1-of-12" style="width:1%; flex:auto">&nbsp;</div>
                                                        <div class="slds-col slds-size_1-of-1 slds-small-size_12-of-12 slds-medium-size_12-of-12 slds-large-size_5-of-12 slds-box slds-grid slds-grid_vertical-align-center" style="flex:auto">                                   
                                                            <table style="width: 100%;">
                                                                <tr>
                                                                    <td style="width: 25%;">
                                                                        <span class="wistia_embed wistia_async_i3bd6m9y6b popover=true popoverAnimateThumbnail=true" style="display:inline-block;height:8em;width:15em"></span>
                                                                    </td>
                                                                    <td style="width: 75%;">
                                                                        <div class="slds-m-horizontal_small slds-text-heading_small" style="font-size: 24px;">Watch a video on how the <br/>Address Sync works</div>
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                        </div>
                                                    </div>              
                                                </apex:outputPanel>
                                                <!-- WIDGET AND VIDEO SECTION END -->
                                                
                                                <!-- PICKLIST SECTION -->
                                                <apex:outputPanel layout="block" rendered="{!if(isSingleContactOrg == true,'false','true')}" styleClass="slds-m-horizontal_x-large">
                                                    <div class="slds-grid">
                                                        <div class="slds-col slds-size_1-of-1 slds-small-size_12-of-12 slds-medium-size_12-of-12 slds-large-size_5-of-12">
                                                            <div style="width: 100%;">
                                                                <div class="slds-form-element centerDiv" style="margin: 0 auto;">
                                                                    <label class="slds-form-element__label">Show:</label>
                                                                    <div class="slds-form-element__control" style="white-space:pre;">
                                                                        <div class="slds-select_container slds-size_1-of-1 slds-small-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-1">
                                                                            <apex:selectList id="selectedRecordsType" value="{!selectedRecords}" multiselect="false" size="1" styleClass="slds-select" style="background-color:white;font-size:1.1em;">
                                                                                <apex:selectOption itemLabel="Records with Differences" itemValue="Different"/>
                                                                                <apex:selectOption itemLabel="Everything" itemValue="Everything"/>
                                                                                <apex:actionSupport event="onchange" status="assign-action-status-addresssync" action="{!selectedRecordType}" reRender="AddressSyncContent,noRecords,SingleContactSection,MoreContactsSection,messagePanel,pagination" oncomplete="lightningMessageStyle();"/>
                                                                            </apex:selectList>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="slds-col slds-size_1-of-1 slds-small-size_12-of-12 slds-medium-size_12-of-12 slds-large-size_1-of-12" style="width:1%;height:5px;"></div>
                                                        <div class="slds-col slds-size_1-of-1 slds-small-size_12-of-12 slds-medium-size_12-of-12 slds-large-size_5-of-12">
                                                            <div style="width: 100%;">
                                                                <div class="slds-form-element centerDiv" style="margin: 0 auto;">
                                                                    <label class="slds-form-element__label" style="white-space: nowrap;">Show Salesforce Accounts with:</label>
                                                                    <div class="slds-form-element__control" style="white-space:pre;">
                                                                        <div class="slds-select_container slds-size_1-of-1 slds-small-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-1">
                                                                            <apex:selectList id="selectedContactsType" value="{!selectedContacts}" multiselect="false" size="1" styleClass="slds-select" style="background-color:white;font-size:1.1em">
                                                                                <apex:selectOption itemLabel="1 Xero Contact" itemValue="singleContact"/>
                                                                                <apex:selectOption itemLabel="2 or More Xero Contacts" itemValue="moreContacts"/> 
                                                                                <apex:actionSupport event="onchange" status="assign-action-status-addresssync" action="{!selectedRecordType}" reRender="AddressSyncContent,noRecords,SingleContactSection,MoreContactsSection,messagePanel,pagination" oncomplete="lightningMessageStyle();"/>
                                                                            </apex:selectList>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" rendered="{!if(isSingleContactOrg == true,'true','false')}" styleClass="slds-m-horizontal_x-large">
                                                    <div class="slds-grid slds-grid_align-center">
                                                        <div class="col slds-size_2-of-3 slds-small-size_6-of-12 slds-medium-size_4-of-12 slds-large-size_3-of-12">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label">Show:</label>
                                                                <div class="slds-form-element__control">
                                                                    <div class="slds-select_container">
                                                                        <apex:selectList id="selectedRecordsType2" value="{!selectedRecords}" multiselect="false" size="1" styleClass="slds-select" style="background-color:white;font-size:1.1em">
                                                                            <apex:selectOption itemLabel="Records with Differences" itemValue="Different"/>
                                                                            <apex:selectOption itemLabel="Everything" itemValue="Everything"/>
                                                                            <apex:actionSupport event="onchange" action="{!selectedRecordType}" status="assign-action-status-addresssync" reRender="AddressSyncContent,noRecords,SingleContactSection,MoreContactsSection,messagePanel,pagination" oncomplete="lightningMessageStyle();"/>
                                                                        </apex:selectList>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </apex:outputPanel>
                                                <!-- PICKLIST SECTION END-->
                                                <!-- NO RECORDS SECTION -->
                                                <apex:outputPanel id="noRecords" layout="block" styleClass="slds-m-horizontal_x-large">
                                                    <apex:outputPanel rendered="{!zeroRecords}">
                                                        <apex:outputPanel rendered="{!if(selectedRecords == 'Different',true,false)}">
                                                            <div class="infoM6 slds-m-top_large" style="border-radius: 5px;">There are no Records with differences found</div>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel rendered="{!if(selectedRecords == 'Different',false,true)}">
                                                            <div class="infoM6 slds-m-top_large" style="border-radius: 5px;">There are no Records found</div>
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" rendered="{!!zeroRecords}">
                                                        <apex:outputPanel rendered="{!if(selectedContacts == 'moreContacts',true,false)}">
                                                            <div class="warningM6 slds-m-top_large slds-m-bottom_small" style="color:black;border-radius: 5px;">
                                                                Currently, it is not possible to use this method to edit the address when there are multiple Xero Contacts for an Account. For these Contacts and Accounts, please edit the address manually in either Xero or Salesforce.
                                                            </div>
                                                        </apex:outputPanel>
                                                        <div class="slds-grid slds-text-heading_medium slds-m-top_medium">
                                                            <div class="slds-col slds-size_1-of-1 slds-small-size_5-of-12 slds-medium-size_5-of-12" style="text-align: center;">Company Details in Xero</div>
                                                            <div class="slds-col slds-size_1-of-1 slds-small-size_1-of-12 slds-medium-size_1-of-12"><div style="visibility: hidden;"></div></div>
                                                            <div class="slds-col slds-size_1-of-1 slds-small-size_5-of-12 slds-medium-size_5-of-12" style="text-align: center;">Company Details in Salesforce</div>
                                                        </div> 
                                                    </apex:outputPanel>
                                                </apex:outputPanel> 
                                                <!-- NO RECORDS SECTION END-->
                                                
                                                
                                                <!-- SINGLE XERO CONTACT SECTION -->
                                                <apex:outputPanel id="SingleContactSection" rendered="{!!showSinglePanel}">
                                                    <div class="slds-grid slds-wrap slds-m-top_small slds-m-horizontal_x-large">
                                                        <table style="width:100%;" class="slds-table slds-no-row-hover">
                                                            <apex:repeat value="{!singleContactsDisplayList}" var="r" id="repeatid">
                                                                <tr>
                                                                    <td class="slds-col slds-size_5-of-12 slds-medium-size_5-of-12 slds-box" style="border-bottom:0px;vertical-align: top;">
                                                                        <div class="slds-p-around_x-small slds-m-left_large">
                                                                            <table style="width:100%;" class="slds-table slds-no-row-hover">
                                                                                <tr>
                                                                                    <td>
                                                                                        <div style="width:100%;" class="slds-text-heading_medium slds-text-align_left slds-text-color_default">
                                                                                            <apex:outputText value="{!r.Bread_Winner__CompanyName__c}" style="white-space:normal;"/>
                                                                                            <span style="white-space:normal;visibility:hidden;">{!if(len(r.CompanyName__c) < len(r.Salesforce_Account__r.Name),RIGHT(r.Salesforce_Account__r.Name,len(r.Salesforce_Account__r.Name)-len(r.CompanyName__c)),'')}</span>
                                                                                        </div>
                                                                                    </td> 
                                                                                    <td></td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td style="width:85%;" class="slds-border_top slds-theme_shade">
                                                                                        <div class="slds-text-heading_small slds-p-left_large slds-p-bottom_small slds-p-top_small" style="font-size:14px;">
                                                                                            <apex:outputPanel id="first">
                                                                                                <table style="width:100%;" class="innermost_table">
                                                                                                    <tr>
                                                                                                        <td style="width:90%;background-color:{!if(UPPER(r.CompanyName__c) == UPPER(r.Salesforce_Account__r.Name),'','rgba(255, 0, 0, 0.19)')};">
                                                                                                            <apex:outputText value="{!r.Bread_Winner__CompanyName__c}" style="white-space:normal;"/>
                                                                                                            <span style="white-space:normal;visibility:hidden;">{!if(len(r.Salesforce_Account__r.Name) > len(r.CompanyName__c),RIGHT(r.Salesforce_Account__r.Name,len(r.Salesforce_Account__r.Name)-len(r.CompanyName__c)),'')}</span>
                                                                                                        </td>
                                                                                                        <td style="width:10%;" class="slds-text-align_center">
                                                                                                            <apex:actionStatus id="status1">
                                                                                                                <apex:facet name="start">
                                                                                                                    <div class="slds-spinner_brand slds-spinner slds-spinner_x-small" role="status">
                                                                                                                        <div class="slds-spinner__dot-a"></div>
                                                                                                                        <div class="slds-spinner__dot-b"></div>
                                                                                                                    </div>      
                                                                                                                </apex:facet>
                                                                                                                <apex:facet name="stop">
                                                                                                                    <apex:commandLink id="contactName" styleClass="commandlink" reRender="SingleContactSection,messagePanel" action="{!xeroContactToSfAccountvalueCopy}" status="status1" oncomplete="lightningMessageStyle();" rendered="{!AND(UPPER(r.Bread_Winner__CompanyName__c)!=UPPER(r.Salesforce_Account__r.Name),$ObjectType.Account.fields.Name.Updateable)}">
                                                                                                                        <span title="Copy this line in the address to Salesforce" class="arrow">&#10140;</span>
                                                                                                                        <apex:param name="xid" value="{!r.id}" />
                                                                                                                        <apex:param name="valueType" value="NameAddress" />
                                                                                                                    </apex:commandLink>
                                                                                                                </apex:facet>
                                                                                                            </apex:actionStatus>
                                                                                                            <apex:outputText styleClass="commandlink" rendered="{!AND(UPPER(r.Bread_Winner__CompanyName__c)!=UPPER(r.Salesforce_Account__r.Name),!$ObjectType.Account.fields.Name.Updateable)}">
                                                                                                                <span class="arrow" title="You do not have permission to update Name on Account" style="color:#d9d9d9;" >&#10140;</span>
                                                                                                            </apex:outputText>
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                    <tr style="display:{!IF(OR(AND(ISBLANK(r.StreetAddress__c),ISBLANK(r.Salesforce_Account__r.BillingStreet)),!$ObjectType.Account.fields.Billingstreet.Accessible,!$ObjectType.Breadwinner_Account_Connection__c.fields.StreetAddress__c.Accessible), 'none', 'table-row')};">
                                                                                                        <td style="width:90%;background-color:{!if(ISBLANK(r.StreetAddress__c),if(ISBLANK(r.Salesforce_Account__r.BillingStreet),'','rgba(255, 228, 128, 0.33)'),if(ISBLANK(r.Salesforce_Account__r.BillingStreet),'rgba(255, 228, 128, 0.33)',if(UPPER(r.StreetAddress__c) == UPPER(r.Salesforce_Account__r.BillingStreet),'','rgba(255, 0, 0, 0.19)')))};">
                                                                                                            <apex:outputText value="{!r.Bread_Winner__StreetAddress__c}" style="white-space:normal;" />
                                                                                                            <span style="white-space:normal;visibility:hidden;">{!if(len(r.StreetAddress__c) < len(r.Salesforce_Account__r.BillingStreet),RIGHT(r.Salesforce_Account__r.BillingStreet,len(r.Salesforce_Account__r.BillingStreet)-len(r.StreetAddress__c)),'')}</span>
                                                                                                        </td>
                                                                                                        <td style="width:10%;" class="slds-text-align_center">
                                                                                                            <apex:actionStatus id="status2" >
                                                                                                                <apex:facet name="start" >
                                                                                                                    <div class="slds-spinner_brand slds-spinner slds-spinner_x-small" role="status">
                                                                                                                        <div class="slds-spinner__dot-a"></div>
                                                                                                                        <div class="slds-spinner__dot-b"></div>
                                                                                                                    </div>
                                                                                                                </apex:facet>
                                                                                                                <apex:facet name="stop">
                                                                                                                    <apex:commandLink id="contactStreet" styleClass="commandlink" action="{!xeroContactToSfAccountvalueCopy}" reRender="SingleContactSection,messagePanel" status="status2" oncomplete="lightningMessageStyle();" rendered="{!AND(UPPER(r.Bread_Winner__StreetAddress__c)!=UPPER(r.Salesforce_Account__r.BillingStreet),$ObjectType.Account.fields.BillingStreet.Updateable)}">
                                                                                                                        <span title="Copy this line in the address to Salesforce" class="arrow">&#10140;</span>
                                                                                                                        <apex:param name="xid" value="{!r.id}" />
                                                                                                                        <apex:param name="valueType" value="StreetAddress" />
                                                                                                                    </apex:commandLink>
                                                                                                                </apex:facet>
                                                                                                            </apex:actionStatus>
                                                                                                            <apex:outputText styleClass="commandlink" rendered="{!AND(UPPER(r.Bread_Winner__StreetAddress__c)!=UPPER(r.Salesforce_Account__r.BillingStreet),!$ObjectType.Account.fields.BillingStreet.Updateable)}">
                                                                                                                <span class="arrow" title="You do not have permission to update Billing Street on Account" style="color:#d9d9d9;" >&#10140;</span>
                                                                                                            </apex:outputText>
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                    <tr style="display:{!IF(OR(AND(ISBLANK(r.City__c),ISBLANK(r.Salesforce_Account__r.BillingCity)),!$ObjectType.Account.fields.BillingCity.Accessible,!$ObjectType.Breadwinner_Account_Connection__c.fields.City__c.Accessible), 'none', 'table-row')};">
                                                                                                        <td style="width:90%;background-color:{!if(ISBLANK(r.City__c),if(ISBLANK(r.Salesforce_Account__r.BillingCity),'','rgba(255, 228, 128, 0.33)'),if(ISBLANK(r.Salesforce_Account__r.BillingCity),'rgba(255, 228, 128, 0.33)',if(UPPER(r.City__c) == UPPER(r.Salesforce_Account__r.BillingCity),'','rgba(255, 0, 0, 0.19)') ))}; " >
                                                                                                            <apex:outputText value="{!r.Bread_Winner__City__c}"/>
                                                                                                        </td>
                                                                                                        <td style="width:10%;" class="slds-text-align_center">
                                                                                                            <apex:actionStatus id="status3" >
                                                                                                                <apex:facet name="start" >
                                                                                                                    <div class="slds-spinner_brand slds-spinner slds-spinner_x-small" role="status">
                                                                                                                        <div class="slds-spinner__dot-a"></div>
                                                                                                                        <div class="slds-spinner__dot-b"></div>
                                                                                                                    </div>
                                                                                                                </apex:facet>
                                                                                                                <apex:facet name="stop">
                                                                                                                    <apex:commandLink id="contactCity" styleClass="commandlink" action="{!xeroContactToSfAccountvalueCopy}" reRender="SingleContactSection,messagePanel" status="status3" oncomplete="lightningMessageStyle();" rendered="{!AND(UPPER(r.Bread_Winner__City__c)!=UPPER(r.Salesforce_Account__r.BillingCity),$ObjectType.Account.fields.BillingCity.Updateable)}">
                                                                                                                        <span title="Copy this line in the address to Salesforce" class="arrow">&#10140;</span>
                                                                                                                        <apex:param name="xid" value="{!r.id}" />
                                                                                                                        <apex:param name="valueType" value="CityAddress" />
                                                                                                                    </apex:commandLink>
                                                                                                                </apex:facet>
                                                                                                            </apex:actionStatus>
                                                                                                            <apex:outputText styleClass="commandlink" rendered="{!AND(UPPER(r.Bread_Winner__City__c) != UPPER(r.Salesforce_Account__r.BillingCity),!$ObjectType.Account.fields.BillingCity.Updateable)}">
                                                                                                                <span class="arrow" title="You do not have permission to update Billing City on Account" style="color:#d9d9d9;" >&#10140;</span>
                                                                                                            </apex:outputText>
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                    <tr style="display:{!IF(OR(AND(ISBLANK(r.Region__c),ISBLANK(r.Salesforce_Account__r.BillingState)),!$ObjectType.Account.fields.BillingState.Accessible,!$ObjectType.Breadwinner_Account_Connection__c.fields.Region__c.Accessible), 'none', 'table-row')};">
                                                                                                        <td style="width:90%;background-color:{!if(ISBLANK(r.Region__c),if(ISBLANK(r.Salesforce_Account__r.BillingState),'','rgba(255, 228, 128, 0.33)'),if(ISBLANK(r.Salesforce_Account__r.BillingState),'rgba(255, 228, 128, 0.33)',if(UPPER(r.Region__c) == UPPER(r.Salesforce_Account__r.BillingState),'','rgba(255, 0, 0, 0.19)') ))}; " >
                                                                                                            <apex:outputText value="{!r.Bread_Winner__Region__c}"/>
                                                                                                        </td>
                                                                                                        <td style="width:10%;" class="slds-text-align_center">
                                                                                                            <apex:actionStatus id="status4" >
                                                                                                                <apex:facet name="start" >
                                                                                                                    <div class="slds-spinner_brand slds-spinner slds-spinner_x-small" role="status">
                                                                                                                        <div class="slds-spinner__dot-a"></div>
                                                                                                                        <div class="slds-spinner__dot-b"></div>
                                                                                                                    </div>
                                                                                                                </apex:facet>
                                                                                                                <apex:facet name="stop">
                                                                                                                    <apex:commandLink id="contactState" styleClass="commandlink" action="{!xeroContactToSfAccountvalueCopy}" reRender="SingleContactSection,messagePanel" status="status4" oncomplete="lightningMessageStyle();" rendered="{!AND(UPPER(r.Bread_Winner__Region__c)!=UPPER(r.Salesforce_Account__r.BillingState),$ObjectType.Account.fields.BillingState.Updateable)}">
                                                                                                                        <span title="Copy this line in the address to Salesforce" class="arrow">&#10140;</span>
                                                                                                                        <apex:param name="xid" value="{!r.id}" />
                                                                                                                        <apex:param name="valueType" value="StateAddress" />
                                                                                                                    </apex:commandLink>
                                                                                                                </apex:facet>
                                                                                                            </apex:actionStatus>
                                                                                                            <apex:outputText styleClass="commandlink" rendered="{!AND(UPPER(r.Bread_Winner__Region__c)!=UPPER(r.Salesforce_Account__r.BillingState),!$ObjectType.Account.fields.BillingState.Updateable)}">
                                                                                                                <span class="arrow" title="You do not have permission to update Billing State on Account" style="color:#d9d9d9;" >&#10140;</span>
                                                                                                            </apex:outputText>
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                    <tr style="display:{!IF(OR(AND(ISBLANK(r.PostalCode__c),ISBLANK(r.Salesforce_Account__r.BillingPostalCode)),!$ObjectType.Account.fields.BillingPostalCode.Accessible,!$ObjectType.Breadwinner_Account_Connection__c.fields.PostalCode__c.Accessible), 'none', 'table-row')};">
                                                                                                        <td style="width:90%;background-color:{!if(ISBLANK(r.PostalCode__c),if(ISBLANK(r.Salesforce_Account__r.BillingPostalCode),'','rgba(255, 228, 128, 0.33)'),if(ISBLANK(r.Salesforce_Account__r.BillingPostalCode),'rgba(255, 228, 128, 0.33)',if(UPPER(r.PostalCode__c) == UPPER(r.Salesforce_Account__r.BillingPostalCode),'','rgba(255, 0, 0, 0.19)') ))}; " >
                                                                                                            <apex:outputText value="{!r.Bread_Winner__PostalCode__c}"/>
                                                                                                        </td>
                                                                                                        <td style="width:10%;" class="slds-text-align_center">
                                                                                                            <apex:actionStatus id="status5" >
                                                                                                                <apex:facet name="start" >
                                                                                                                    <div class="slds-spinner_brand slds-spinner slds-spinner_x-small" role="status">
                                                                                                                        <div class="slds-spinner__dot-a"></div>
                                                                                                                        <div class="slds-spinner__dot-b"></div>
                                                                                                                    </div>
                                                                                                                </apex:facet>
                                                                                                                <apex:facet name="stop">
                                                                                                                    <apex:commandLink id="contactPostalCode" styleClass="commandlink" action="{!xeroContactToSfAccountvalueCopy}" reRender="SingleContactSection,messagePanel" status="status5" oncomplete="lightningMessageStyle();" rendered="{!AND(UPPER(r.Bread_Winner__PostalCode__c)!=UPPER(r.Salesforce_Account__r.BillingPostalCode),$ObjectType.Account.fields.BillingPostalCode.Updateable)}">
                                                                                                                        <span title="Copy this line in the address to Salesforce" class="arrow">&#10140;</span>
                                                                                                                        <apex:param name="xid" value="{!r.id}" />
                                                                                                                        <apex:param name="valueType" value="PostalAddress" />
                                                                                                                    </apex:commandLink>
                                                                                                                </apex:facet>
                                                                                                            </apex:actionStatus>
                                                                                                            <apex:outputText styleClass="commandlink" rendered="{!AND(UPPER(r.Bread_Winner__PostalCode__c)!=UPPER(r.Salesforce_Account__r.BillingPostalCode),!$ObjectType.Account.fields.BillingPostalCode.Updateable)}">
                                                                                                                <span class="arrow" title="You do not have permission to update Billing Postal Code on Account" style="color:#d9d9d9;" >&#10140;</span>
                                                                                                            </apex:outputText>
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                    <tr style="display:{!IF(OR(AND(ISBLANK(r.Country__c),ISBLANK(r.Salesforce_Account__r.BillingCountry)),!$ObjectType.Account.fields.BillingCountry.Accessible,!$ObjectType.Breadwinner_Account_Connection__c.fields.Country__c.Accessible), 'none', 'table-row')};">
                                                                                                        <td style="width:90%;background-color:{!if(ISBLANK(r.Country__c),if(ISBLANK(r.Salesforce_Account__r.BillingCountry),'','rgba(255, 228, 128, 0.33)'),if(ISBLANK(r.Salesforce_Account__r.BillingCountry),'rgba(255, 228, 128, 0.33)',if(UPPER(r.Country__c) == UPPER(r.Salesforce_Account__r.BillingCountry),'','rgba(255, 0, 0, 0.19)') ))}; " >
                                                                                                            <apex:outputText value="{!r.Bread_Winner__Country__c}"/>
                                                                                                        </td>
                                                                                                        <td style="width:10%;" class="slds-text-align_center">
                                                                                                            <apex:actionStatus id="status6" >
                                                                                                                <apex:facet name="start" >
                                                                                                                    <div class="slds-spinner_brand slds-spinner slds-spinner_x-small" role="status">
                                                                                                                        <div class="slds-spinner__dot-a"></div>
                                                                                                                        <div class="slds-spinner__dot-b"></div>
                                                                                                                    </div> 
                                                                                                                </apex:facet>
                                                                                                                <apex:facet name="stop">
                                                                                                                    <apex:commandLink id="contactCountry" styleClass="commandlink" action="{!xeroContactToSfAccountvalueCopy}" reRender="SingleContactSection,messagePanel" status="status6" oncomplete="lightningMessageStyle();" rendered="{!AND(UPPER(r.Bread_Winner__Country__c)!=UPPER(r.Salesforce_Account__r.BillingCountry),$ObjectType.Account.fields.BillingCountry.Updateable)}">
                                                                                                                        <span title="Copy this line in the address to Salesforce" class="arrow">&#10140;</span>
                                                                                                                        <apex:param name="xid" value="{!r.id}" />
                                                                                                                        <apex:param name="valueType" value="CountryAddress" />
                                                                                                                    </apex:commandLink>
                                                                                                                </apex:facet>
                                                                                                            </apex:actionStatus>
                                                                                                            <apex:outputText styleClass="commandlink" rendered="{!AND(UPPER(r.Bread_Winner__Country__c)!=UPPER(r.Salesforce_Account__r.BillingCountry),!$ObjectType.Account.fields.BillingCountry.Updateable)}">
                                                                                                                <span class="arrow" title="You do not have permission to update Billing Country on Account" style="color:#d9d9d9;" >&#10140;</span>
                                                                                                            </apex:outputText>
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                </table>
                                                                                            </apex:outputPanel>
                                                                                        </div>
                                                                                    </td>
                                                                                    <td style="width:15%">
                                                                                        <div class="slds-align_absolute-center">
                                                                                            <apex:actionStatus id="bigStatus1">
                                                                                                <apex:facet name="start" >
                                                                                                    <div class="slds-spinner_brand slds-spinner slds-spinner_medium" role="status">
                                                                                                        <div class="slds-spinner__dot-a"></div>
                                                                                                        <div class="slds-spinner__dot-b"></div>
                                                                                                    </div>
                                                                                                </apex:facet>
                                                                                                <apex:facet name="stop">
                                                                                                    <apex:commandLink id="contactTotalAddress" styleClass="commandlink" status="bigStatus1" reRender="SingleContactSection,,messagePanel" action="{!xeroContactToSfAccountvalueCopy}" oncomplete="lightningMessageStyle();" rendered="{!AND($ObjectType.Account.fields.Name.Updateable,$ObjectType.Account.fields.BillingStreet.Updateable,$ObjectType.Account.fields.BillingCity.Updateable,$ObjectType.Account.fields.BillingState.Updateable,$ObjectType.Account.fields.BillingPostalCode.Updateable,$ObjectType.Account.fields.BillingCountry.Updateable,OR(UPPER(r.Bread_Winner__CompanyName__c)!=UPPER(r.Salesforce_Account__r.Name),AND($ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__StreetAddress__c.Accessible,$ObjectType.Account.fields.BillingStreet.Accessible,UPPER(r.Bread_Winner__StreetAddress__c) != UPPER(r.Salesforce_Account__r.BillingStreet)),AND($ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__City__c.Accessible,$ObjectType.Account.fields.BillingCity.Accessible,UPPER(r.Bread_Winner__City__c) != UPPER(r.Salesforce_Account__r.BillingCity)),AND($ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__Region__c.Accessible,$ObjectType.Account.fields.BillingState.Accessible,UPPER(r.Bread_Winner__Region__c) != UPPER(r.Salesforce_Account__r.BillingState)),AND($ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__PostalCode__c.Accessible,$ObjectType.Account.fields.BillingPostalCode.Accessible,UPPER(r.Bread_Winner__PostalCode__c) != UPPER(r.Salesforce_Account__r.BillingPostalCode)),AND($ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__Country__c.Accessible,$ObjectType.Account.fields.BillingCountry.Accessible,UPPER(r.Bread_Winner__Country__c) != UPPER(r.Salesforce_Account__r.BillingCountry))))}">
                                                                                                        <span title="Copy the entire Name and Address to Salesforce" class="big_arrow">&#10140;</span>
                                                                                                        <apex:param name="xid" value="{!r.id}" />
                                                                                                        <apex:param name="valueType" value="TotalAddress" />
                                                                                                    </apex:commandLink>
                                                                                                </apex:facet>
                                                                                            </apex:actionStatus>
                                                                                            <apex:outputText styleClass="commandlink" rendered="{!AND(OR(UPPER(r.Bread_Winner__CompanyName__c) != UPPER(r.Salesforce_Account__r.Name),AND($ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__StreetAddress__c.Accessible,$ObjectType.Account.fields.BillingStreet.Accessible,UPPER(r.Bread_Winner__StreetAddress__c) != UPPER(r.Salesforce_Account__r.BillingStreet)),AND($ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__City__c.Accessible,$ObjectType.Account.fields.BillingCity.Accessible,UPPER(r.Bread_Winner__City__c) != UPPER(r.Salesforce_Account__r.BillingCity)),AND($ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__Region__c.Accessible,$ObjectType.Account.fields.BillingState.Accessible,UPPER(r.Bread_Winner__Region__c) != UPPER(r.Salesforce_Account__r.BillingState)),AND($ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__PostalCode__c.Accessible,$ObjectType.Account.fields.BillingPostalCode.Accessible,UPPER(r.Bread_Winner__PostalCode__c) != UPPER(r.Salesforce_Account__r.BillingPostalCode)),AND($ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__Country__c.Accessible,$ObjectType.Account.fields.BillingCountry.Accessible,UPPER(r.Bread_Winner__Country__c) != UPPER(r.Salesforce_Account__r.BillingCountry))),OR(!$ObjectType.Account.fields.Name.Updateable,!$ObjectType.Account.fields.BillingStreet.Updateable,!$ObjectType.Account.fields.BillingCity.Updateable,!$ObjectType.Account.fields.BillingState.Updateable,!$ObjectType.Account.fields.BillingPostalCode.Updateable,!$ObjectType.Account.fields.BillingCountry.Updateable))}">
                                                                                                <span class="big_arrow" title="You do not have permission to update some of the fields on Account" style="color:#d9d9d9;" >&#10140;</span>
                                                                                            </apex:outputText>
                                                                                        </div>    
                                                                                    </td>
                                                                                </tr>
                                                                            </table>
                                                                        </div>
                                                                    </td>
                                                                    <td class="slds-col slds-size_1-of-12 slds-medium-size_1-of-12" style="width:5%;"></td>
                                                                    <td class="slds-col slds-size_5-of-12 slds-medium-size_5-of-12 slds-box" style="border-bottom:0px;vertical-align: top;">
                                                                        <div class="slds-p-around_x-small slds-m-right_large">
                                                                            <table style="width:100%;" class="slds-table slds-no-row-hover">
                                                                                <tr>
                                                                                    <td></td>
                                                                                    <td>
                                                                                        <div style="width:100%;" class="slds-text-heading_medium slds-text-color_default slds-text-align_right">
                                                                                            <span style="white-space:normal;visibility:hidden;">{!if(len(r.Salesforce_Account__r.Name) < len(r.CompanyName__c),RIGHT(r.CompanyName__c,len(r.CompanyName__c)-len(r.Salesforce_Account__r.Name)),'')}</span>
                                                                                            <apex:outputText value="{!r.Salesforce_Account__r.Name}" style="white-space:normal;"/>
                                                                                        </div>
                                                                                    </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td style="width:15%">
                                                                                        <div class="slds-align_absolute-center">
                                                                                            <div class="rotate_arrow">
                                                                                                <apex:actionStatus id="bigStatus2">
                                                                                                    <apex:facet name="start" >
                                                                                                        <div class="slds-spinner_brand slds-spinner slds-spinner_medium" role="status">
                                                                                                            <div class="slds-spinner__dot-a"></div>
                                                                                                            <div class="slds-spinner__dot-b"></div>
                                                                                                        </div>
                                                                                                    </apex:facet>
                                                                                                    <apex:facet name="stop">
                                                                                                        <apex:commandlink id="accountTotalAddress" styleClass="commandlink" status="bigStatus2" reRender="SingleContactSection,oauthMessage,messagePanel" action="{!sfAccountToXeroContactValueCopy}" oncomplete="lightningMessageStyle();" rendered="{!AND(!isReadOnly,$ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__CompanyName__c.Updateable,$ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__StreetAddress__c.Updateable,$ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__City__c.Updateable,$ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__Region__c.Updateable,$ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__PostalCode__c.Updateable,$ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__Country__c.Updateable,OR(UPPER(r.Bread_Winner__CompanyName__c)!=UPPER(r.Salesforce_Account__r.Name),AND($ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__StreetAddress__c.Accessible,$ObjectType.Account.fields.BillingStreet.Accessible,UPPER(r.Bread_Winner__StreetAddress__c) != UPPER(r.Salesforce_Account__r.BillingStreet)),AND($ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__City__c.Accessible,$ObjectType.Account.fields.BillingCity.Accessible,UPPER(r.Bread_Winner__City__c) != UPPER(r.Salesforce_Account__r.BillingCity)),AND($ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__Region__c.Accessible,$ObjectType.Account.fields.BillingState.Accessible,UPPER(r.Bread_Winner__Region__c) != UPPER(r.Salesforce_Account__r.BillingState)),AND($ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__PostalCode__c.Accessible,$ObjectType.Account.fields.BillingPostalCode.Accessible,UPPER(r.Bread_Winner__PostalCode__c) != UPPER(r.Salesforce_Account__r.BillingPostalCode)),AND($ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__Country__c.Accessible,$ObjectType.Account.fields.BillingCountry.Accessible,UPPER(r.Bread_Winner__Country__c) != UPPER(r.Salesforce_Account__r.BillingCountry))))}">
                                                                                                            <span title="Copy the entire Name and Address to Xero" class="big_arrow" >&#10140;</span>
                                                                                                            <apex:param name="xid" value="{!r.id}" />
                                                                                                            <apex:param name="valueType" value="TotalAddress" />
                                                                                                        </apex:commandlink>
                                                                                                    </apex:facet>
                                                                                                </apex:actionStatus>
                                                                                                <apex:outputText styleClass="commandlink" rendered="{!OR(isReadOnly,AND(OR(UPPER(r.Bread_Winner__CompanyName__c) != UPPER(r.Salesforce_Account__r.Name),AND($ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__StreetAddress__c.Accessible,$ObjectType.Account.fields.BillingStreet.Accessible,UPPER(r.Bread_Winner__StreetAddress__c) != UPPER(r.Salesforce_Account__r.BillingStreet)),AND($ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__City__c.Accessible,$ObjectType.Account.fields.BillingCity.Accessible,UPPER(r.Bread_Winner__City__c) != UPPER(r.Salesforce_Account__r.BillingCity)),AND($ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__Region__c.Accessible,$ObjectType.Account.fields.BillingState.Accessible,UPPER(r.Bread_Winner__Region__c) != UPPER(r.Salesforce_Account__r.BillingState)),AND($ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__PostalCode__c.Accessible,$ObjectType.Account.fields.BillingPostalCode.Accessible,UPPER(r.Bread_Winner__PostalCode__c) != UPPER(r.Salesforce_Account__r.BillingPostalCode)),AND($ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__Country__c.Accessible,$ObjectType.Account.fields.BillingCountry.Accessible,UPPER(r.Bread_Winner__Country__c) != UPPER(r.Salesforce_Account__r.BillingCountry))),OR(!$ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__CompanyName__c.Updateable,!$ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__StreetAddress__c.Updateable,!$ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__City__c.Updateable,!$ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__Region__c.Updateable,!$ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__PostalCode__c.Updateable,!$ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__Country__c.Updateable)))}">
                                                                                                    <span class="big_arrow" title="{!IF(isReadOnly,'You are using Breadwinner in Xero Read Only Mode','You do not have permission to update some of the fields on Xero Contact')}" style="color:#d9d9d9;" >&#10140;</span>
                                                                                                </apex:outputText>
                                                                                            </div>    
                                                                                        </div>
                                                                                    </td>
                                                                                    <td style="width:85%;" class="slds-border_top slds-theme_shade">
                                                                                        <div class="slds-text-heading_small slds-p-right_large slds-p-bottom_small slds-p-top_small" style="font-size:14px;">
                                                                                            <apex:outputPanel id="sec">
                                                                                                <table style="width:100%;" class="innermost_table">
                                                                                                    <tr>
                                                                                                        <td style="width:10%;height:30px" class="slds-text-align_center">
                                                                                                            <div class="rotate_arrow">
                                                                                                                <apex:actionStatus id="status7" >
                                                                                                                    <apex:facet name="start" >
                                                                                                                        <div class="slds-spinner_brand slds-spinner slds-spinner_x-small" role="status">
                                                                                                                            <div class="slds-spinner__dot-a"></div>
                                                                                                                            <div class="slds-spinner__dot-b"></div>
                                                                                                                        </div>                   
                                                                                                                    </apex:facet>
                                                                                                                    <apex:facet name="stop">
                                                                                                                        <apex:commandLink id="accountName" action="{!sfAccountToXeroContactValueCopy}" styleClass="commandlink" reRender="SingleContactSection,oauthMessage,messagePanel" status="status7" oncomplete="lightningMessageStyle();" rendered="{!AND(UPPER(r.Bread_Winner__CompanyName__c)!=UPPER(r.Salesforce_Account__r.Name),!isReadOnly,$ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__CompanyName__c.Updateable)}">
                                                                                                                            <span title="Copy this line in the address to Xero" class="arrow">&#10140;</span>
                                                                                                                            <apex:param name="xid" value="{!r.id}" />
                                                                                                                            <apex:param name="valueType" value="NameAddress" />
                                                                                                                        </apex:commandLink> 
                                                                                                                    </apex:facet>
                                                                                                                </apex:actionStatus>
                                                                                                                <apex:outputText styleClass="commandlink" rendered="{!AND(UPPER(r.Bread_Winner__CompanyName__c)!=UPPER(r.Salesforce_Account__r.Name),OR(isReadOnly,!$ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__CompanyName__c.Updateable))}">
                                                                                                                    <span class="arrow" title="{!IF(isReadOnly,'You are using Breadwinner in Xero Read Only Mode','You do not have permission to update CompanyName on Xero Contact')}" style="color:#d9d9d9;" >&#10140;</span>
                                                                                                                </apex:outputText>
                                                                                                            </div>
                                                                                                        </td>
                                                                                                        <td style="width:90%;background-color:{!if(UPPER(r.CompanyName__c) == UPPER(r.Salesforce_Account__r.Name),'','rgba(255, 0, 0, 0.19)')};">
                                                                                                            <apex:outputText value="{!r.Salesforce_Account__r.Name}" style="white-space:normal;"/>
                                                                                                            <span style="white-space:normal;visibility:hidden;">{!if(len(r.Salesforce_Account__r.Name) < len(r.CompanyName__c),RIGHT(r.CompanyName__c,len(r.CompanyName__c)-len(r.Salesforce_Account__r.Name)),'')}</span>
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                    <tr style="display:{!IF(OR(AND(ISBLANK(r.StreetAddress__c),ISBLANK(r.Salesforce_Account__r.BillingStreet)),!$ObjectType.Account.fields.Billingstreet.Accessible,!$ObjectType.Breadwinner_Account_Connection__c.fields.StreetAddress__c.Accessible), 'none', 'table-row')};">
                                                                                                        <td style="width:10%;" class="slds-text-align_center">
                                                                                                            <div class="rotate_arrow">
                                                                                                                <apex:actionStatus id="status8" >
                                                                                                                    <apex:facet name="start" >
                                                                                                                        <div class="slds-spinner_brand slds-spinner slds-spinner_x-small" role="status">
                                                                                                                            <div class="slds-spinner__dot-a"></div>
                                                                                                                            <div class="slds-spinner__dot-b"></div>
                                                                                                                        </div>
                                                                                                                    </apex:facet>
                                                                                                                    <apex:facet name="stop">
                                                                                                                        <apex:commandLink id="accountStreet" action="{!sfAccountToXeroContactValueCopy}" styleClass="commandlink" reRender="SingleContactSection,oauthMessage,messagePanel" status="status8" oncomplete="lightningMessageStyle();" rendered="{!AND(UPPER(r.Bread_Winner__StreetAddress__c)!=UPPER(r.Salesforce_Account__r.BillingStreet),!isReadOnly,$ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__StreetAddress__c.Updateable)}">
                                                                                                                            <span title="Copy this line in the address to Xero" class="arrow">&#10140;</span>
                                                                                                                            <apex:param name="xid" value="{!r.id}" />
                                                                                                                            <apex:param name="valueType" value="StreetAddress" />
                                                                                                                        </apex:commandLink>                               
                                                                                                                    </apex:facet>
                                                                                                                </apex:actionStatus>
                                                                                                                <apex:outputText styleClass="commandlink" rendered="{!AND(UPPER(r.Bread_Winner__StreetAddress__c)!=UPPER(r.Salesforce_Account__r.BillingStreet),OR(isReadOnly,!$ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__StreetAddress__c.Updateable))}">
                                                                                                                    <span class="arrow" title="{!IF(isReadOnly,'You are using Breadwinner in Xero Read Only Mode','You do not have permission to update StreetAddress on Xero Contact')}" style="color:#d9d9d9;" >&#10140;</span>
                                                                                                                </apex:outputText> 
                                                                                                            </div>
                                                                                                        </td>
                                                                                                        <td style="width:90%;background-color:{!if(ISBLANK(r.StreetAddress__c),if(ISBLANK(r.Salesforce_Account__r.BillingStreet),'','rgba(255, 228, 128, 0.33)'),if(ISBLANK(r.Salesforce_Account__r.BillingStreet),'rgba(255, 228, 128, 0.33)',if(UPPER(r.Salesforce_Account__r.BillingStreet) == UPPER(r.StreetAddress__c),'','rgba(255, 0, 0, 0.19)')))};">
                                                                                                            <apex:outputText value="{!(r.Salesforce_Account__r.BillingStreet)}" style="white-space:normal;"/>
                                                                                                            <span style="white-space:normal;visibility:hidden;">{!if(len(r.Salesforce_Account__r.BillingStreet) < len(r.StreetAddress__c),RIGHT(r.StreetAddress__c,len(r.StreetAddress__c)-len(r.Salesforce_Account__r.BillingStreet)),'')}</span>
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                    <tr style="display:{!IF(OR(AND(ISBLANK(r.City__c),ISBLANK(r.Salesforce_Account__r.BillingCity)),!$ObjectType.Account.fields.BillingCity.Accessible,!$ObjectType.Breadwinner_Account_Connection__c.fields.City__c.Accessible), 'none', 'table-row')};">
                                                                                                        <td style="width:10%;" class="slds-text-align_center">
                                                                                                            <div class="rotate_arrow">
                                                                                                                <apex:actionStatus id="status9" >
                                                                                                                    <apex:facet name="start" >
                                                                                                                        <div class="slds-spinner_brand slds-spinner slds-spinner_x-small" role="status">
                                                                                                                            <div class="slds-spinner__dot-a"></div>
                                                                                                                            <div class="slds-spinner__dot-b"></div>
                                                                                                                        </div>
                                                                                                                    </apex:facet>
                                                                                                                    <apex:facet name="stop">
                                                                                                                        <apex:commandLink id="accountCity" action="{!sfAccountToXeroContactValueCopy}" styleClass="commandlink" reRender="SingleContactSection,oauthMessage,messagePanel" status="status9" oncomplete="lightningMessageStyle();" rendered="{!AND(UPPER(r.Bread_Winner__City__c)!=UPPER(r.Salesforce_Account__r.BillingCity),!isReadOnly,$ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__City__c.Updateable)}">
                                                                                                                            <span title="Copy this line in the address to Xero" class="arrow">&#10140;</span>
                                                                                                                            <apex:param name="xid" value="{!r.id}" />
                                                                                                                            <apex:param name="valueType" value="CityAddress" />
                                                                                                                        </apex:commandLink>
                                                                                                                    </apex:facet>
                                                                                                                </apex:actionStatus>
                                                                                                                <apex:outputText styleClass="commandlink" rendered="{!AND(UPPER(r.Bread_Winner__City__c)!=UPPER(r.Salesforce_Account__r.BillingCity),OR(isReadOnly,!$ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__City__c.Updateable))}">
                                                                                                                    <span class="arrow" title="{!IF(isReadOnly,'You are using Breadwinner in Xero Read Only Mode','You do not have permission to update City on Xero Contact')}" style="color:#d9d9d9;" >&#10140;</span>
                                                                                                                </apex:outputText>
                                                                                                            </div>
                                                                                                        </td>
                                                                                                        <td style="width:90%;background-color:{!if(ISBLANK(r.City__c),if(ISBLANK(r.Salesforce_Account__r.BillingCity),'','rgba(255, 228, 128, 0.33)'),if(ISBLANK(r.Salesforce_Account__r.BillingCity),'rgba(255, 228, 128, 0.33)',if(UPPER(r.City__c) == UPPER(r.Salesforce_Account__r.BillingCity),'','rgba(255, 0, 0, 0.19)')))};">
                                                                                                            <apex:outputText value="{!r.Salesforce_Account__r.BillingCity}"/>
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                    <tr style="display:{!IF(OR(AND(ISBLANK(r.Region__c),ISBLANK(r.Salesforce_Account__r.BillingState)),!$ObjectType.Account.fields.BillingState.Accessible,!$ObjectType.Breadwinner_Account_Connection__c.fields.Region__c.Accessible), 'none', 'table-row')};">
                                                                                                        <td style="width:10%;" class="slds-text-align_center">
                                                                                                            <div class="rotate_arrow">
                                                                                                                <apex:actionStatus id="status10" >
                                                                                                                    <apex:facet name="start" >
                                                                                                                        <div class="slds-spinner_brand slds-spinner slds-spinner_x-small" role="status">
                                                                                                                            <div class="slds-spinner__dot-a"></div>
                                                                                                                            <div class="slds-spinner__dot-b"></div>
                                                                                                                        </div>
                                                                                                                    </apex:facet>
                                                                                                                    <apex:facet name="stop">
                                                                                                                        <apex:commandLink id="accountState" action="{!sfAccountToXeroContactValueCopy}" styleClass="commandlink" reRender="SingleContactSection,oauthMessage,messagePanel" status="status10" oncomplete="lightningMessageStyle();" rendered="{!AND(UPPER(r.Bread_Winner__Region__c)!=UPPER(r.Salesforce_Account__r.BillingState),!isReadOnly,$ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__Region__c.Updateable)}">
                                                                                                                            <span title="Copy this line in the address to Xero" class="arrow">&#10140;</span>
                                                                                                                            <apex:param name="xid" value="{!r.id}" />
                                                                                                                            <apex:param name="valueType" value="StateAddress" />
                                                                                                                        </apex:commandLink>
                                                                                                                    </apex:facet>
                                                                                                                </apex:actionStatus>
                                                                                                                <apex:outputText styleClass="commandlink" rendered="{!AND(UPPER(r.Bread_Winner__Region__c)!=UPPER(r.Salesforce_Account__r.BillingState),OR(isReadOnly,!$ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__Region__c.Updateable))}">
                                                                                                                    <span class="arrow" title="{!IF(isReadOnly,'You are using Breadwinner in Xero Read Only Mode','You do not have permission to update Region on Xero Contact')}" style="color:#d9d9d9;" >&#10140;</span>
                                                                                                                </apex:outputText>
                                                                                                            </div>
                                                                                                        </td>
                                                                                                        <td style="width:90%;background-color:{!if(ISBLANK(r.Region__c),if(ISBLANK(r.Salesforce_Account__r.BillingState),'','rgba(255, 228, 128, 0.33)'),if(ISBLANK(r.Salesforce_Account__r.BillingState),'rgba(255, 228, 128, 0.33)',if(UPPER(r.Region__c) == UPPER(r.Salesforce_Account__r.BillingState),'','rgba(255, 0, 0, 0.19)')))};">
                                                                                                            <apex:outputText value="{!r.Salesforce_Account__r.BillingState}"/>
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                    <tr style="display:{!IF(OR(AND(ISBLANK(r.PostalCode__c),ISBLANK(r.Salesforce_Account__r.BillingPostalCode)),!$ObjectType.Account.fields.BillingPostalCode.Accessible,!$ObjectType.Breadwinner_Account_Connection__c.fields.PostalCode__c.Accessible),'none', 'table-row')};">
                                                                                                        <td style="width:10%;" class="slds-text-align_center">
                                                                                                            <div class="rotate_arrow">
                                                                                                                <apex:actionStatus id="status11" >
                                                                                                                    <apex:facet name="start" >
                                                                                                                        <div class="slds-spinner_brand slds-spinner slds-spinner_x-small" role="status">
                                                                                                                            <div class="slds-spinner__dot-a"></div>
                                                                                                                            <div class="slds-spinner__dot-b"></div>
                                                                                                                        </div>
                                                                                                                    </apex:facet>
                                                                                                                    <apex:facet name="stop">
                                                                                                                        <apex:commandLink id="accountPostalCode" action="{!sfAccountToXeroContactValueCopy}" styleClass="commandlink" reRender="SingleContactSection,oauthMessage,messagePanel" status="status11" oncomplete="lightningMessageStyle();" rendered="{!AND(UPPER(r.Bread_Winner__PostalCode__c)!=UPPER(r.Salesforce_Account__r.BillingPostalCode),!isReadOnly,$ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__PostalCode__c.Updateable)}">
                                                                                                                            <span title="Copy this line in the address to Xero" class="arrow">&#10140;</span>
                                                                                                                            <apex:param name="xid" value="{!r.id}" />
                                                                                                                            <apex:param name="valueType" value="PostalAddress" />
                                                                                                                        </apex:commandLink>
                                                                                                                    </apex:facet>
                                                                                                                </apex:actionStatus>
                                                                                                                <apex:outputText styleClass="commandlink" rendered="{!AND(UPPER(r.Bread_Winner__PostalCode__c)!=UPPER(r.Salesforce_Account__r.BillingPostalCode),OR(isReadOnly,!$ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__PostalCode__c.Updateable))}">
                                                                                                                    <span class="arrow" title="{!IF(isReadOnly,'You are using Breadwinner in Xero Read Only Mode','You do not have permission to update PostalCode on Xero Contact')}" style="color:#d9d9d9;" >&#10140;</span>
                                                                                                                </apex:outputText>
                                                                                                                
                                                                                                            </div>
                                                                                                        </td>
                                                                                                        <td style="width:90%;background-color:{!if(ISBLANK(r.PostalCode__c),if(ISBLANK(r.Salesforce_Account__r.BillingPostalCode),'','rgba(255, 228, 128, 0.33)'),if(ISBLANK(r.Salesforce_Account__r.BillingPostalCode),'rgba(255, 228, 128, 0.33)',if(UPPER(r.PostalCode__c) == UPPER(r.Salesforce_Account__r.BillingPostalCode),'','rgba(255, 0, 0, 0.19)')))};">
                                                                                                            <apex:outputText value="{!r.Salesforce_Account__r.BillingPostalCode}"/>
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                    <tr style="display:{!IF(OR(AND(ISBLANK(r.Country__c),ISBLANK(r.Salesforce_Account__r.BillingCountry)),!$ObjectType.Account.fields.BillingCountry.Accessible,!$ObjectType.Breadwinner_Account_Connection__c.fields.Country__c.Accessible),'none', 'table-row')};">
                                                                                                        <td style="width:10%;" class="slds-text-align_center">
                                                                                                            <div class="rotate_arrow">
                                                                                                                <apex:actionStatus id="status12" >
                                                                                                                    <apex:facet name="start" >
                                                                                                                        <div class="slds-spinner_brand slds-spinner slds-spinner_x-small" role="status">
                                                                                                                            <div class="slds-spinner__dot-a"></div>
                                                                                                                            <div class="slds-spinner__dot-b"></div>
                                                                                                                        </div>
                                                                                                                    </apex:facet>
                                                                                                                    <apex:facet name="stop">
                                                                                                                        <apex:commandLink id="accountCountry" action="{!sfAccountToXeroContactValueCopy}" styleClass="commandlink" reRender="SingleContactSection,oauthMessage,messagePanel" status="status12" oncomplete="lightningMessageStyle();" rendered="{!AND(UPPER(r.Bread_Winner__Country__c)!=UPPER(r.Salesforce_Account__r.BillingCountry),!isReadOnly,$ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__Country__c.Updateable)}">
                                                                                                                            <span title="Copy this line in the address to Xero" class="arrow">&#10140;</span>
                                                                                                                            <apex:param name="xid" value="{!r.id}" />
                                                                                                                            <apex:param name="valueType" value="CountryAddress" />
                                                                                                                        </apex:commandLink>
                                                                                                                    </apex:facet>
                                                                                                                </apex:actionStatus>
                                                                                                                <apex:outputText styleClass="commandlink" rendered="{!AND(UPPER(r.Bread_Winner__Country__c)!=UPPER(r.Salesforce_Account__r.BillingCountry),OR(isReadOnly,!$ObjectType.Bread_Winner__Breadwinner_Account_Connection__c.fields.Bread_Winner__Country__c.Updateable))}">
                                                                                                                    <span class="arrow" title="{!IF(isReadOnly,'You are using Breadwinner in Xero Read Only Mode','You do not have permission to update Country on Xero Contact')}" style="color:#d9d9d9;" >&#10140;</span>
                                                                                                                </apex:outputText>
                                                                                                            </div>
                                                                                                        </td>
                                                                                                        <td style="width:90%;background-color:{!if(ISBLANK(r.Country__c),if(ISBLANK(r.Salesforce_Account__r.BillingCountry),'','rgba(255, 228, 128, 0.33)'),if(ISBLANK(r.Salesforce_Account__r.BillingCountry),'rgba(255, 228, 128, 0.33)',if(UPPER(r.Country__c) == UPPER(r.Salesforce_Account__r.BillingCountry),'','rgba(255, 0, 0, 0.19)')))};">
                                                                                                            <apex:outputText value="{!r.Salesforce_Account__r.BillingCountry}"/>
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                </table>
                                                                                            </apex:outputPanel>
                                                                                        </div>
                                                                                    </td>
                                                                                </tr>
                                                                            </table> 
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td class="slds-box" style="border-top:0px;">
                                                                        <div class="slds-m-top_x-small slds-text-body_small">
                                                                            <img src="{!URLFOR($Resource.Breadwinner_Xero, 'Breadwinner_Xero/Images/xero_logo_30px.png')}"/> &nbsp; Xero Contact
                                                                        </div>
                                                                    </td>
                                                                    <td></td>
                                                                    <td class="slds-box" style="border-top:0px;">
                                                                        <div class="slds-m-top_x-small slds-m-right_x-small slds-float_right slds-text-body_small">
                                                                            Salesforce Account &nbsp; <img src="{!URLFOR($Resource.Breadwinner_Xero, 'Breadwinner_Xero/Images/sf_logo_30px.png')}"/>  
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td><div class="slds-m-top_small"></div></td>
                                                                </tr>
                                                            </apex:repeat>
                                                        </table>
                                                    </div>                            
                                                </apex:outputPanel>
                                                <!-- SINGLE XERO CONTACT SECTION END-->
                                                
                                                <!-- MORE XERO CONTACTS SECTION -->
                                                <apex:outputPanel id="MoreContactsSection" rendered="{!showSinglePanel}">
                                                    <div class="slds-m-top_small slds-m-horizontal_x-large slds-align_absolute-center slds-grid">
                                                        <table style="width:100%;" class="slds-table slds-no-row-hover">
                                                            <apex:repeat value="{!moreContactsDisplayList}" var="a">                                    
                                                                <tr class="slds-box" style="border: 1px solid gray">
                                                                    <td class="slds-col slds-size_1-of-1 slds-small-size_5-of-12 slds-medium-size_5-of-12">
                                                                        <div class="slds-m-around_large slds-m-bottom_none">
                                                                            <table style="width:100%;" class="slds-table slds-no-row-hover">
                                                                                <apex:repeat value="{!a.Xero_Contacts__r}" var="x">
                                                                                    <tr>
                                                                                        <td style="width:100%;border-bottom:0px;" class="slds-box">
                                                                                            <div class="slds-p-around_x-small slds-m-left_large slds-m-right_large">
                                                                                                <table style="width:100%;" class="slds-table slds-no-row-hover">
                                                                                                    <tr>
                                                                                                        <td>
                                                                                                            <div style="width:100%;" class="slds-text-heading_medium slds-text-align_left slds-text-color_default">
                                                                                                                <apex:outputText value="{!x.Bread_Winner__CompanyName__c}" style="white-space:normal;"/>
                                                                                                            </div>
                                                                                                        </td>                                                   
                                                                                                    </tr>
                                                                                                    <tr>
                                                                                                        <td class="slds-border_top slds-theme_shade">
                                                                                                            <div class="slds-text-heading_small slds-p-left_large slds-p-right_large slds-p-bottom_small slds-p-top_small" style="font-size:14px;">                                                                
                                                                                                                <table style="width:100%;" class="innermost_table">
                                                                                                                    <tr>
                                                                                                                        <td style="background-color:{!if(UPPER(x.CompanyName__c) == UPPER(a.Name),'','rgba(255, 0, 0, 0.19)')};">
                                                                                                                            <apex:outputText value="{!x.Bread_Winner__CompanyName__c}" style="white-space:normal;"/>
                                                                                                                            <span style="white-space:normal;visibility:hidden;">{!if(len(a.Name) > len(x.CompanyName__c),RIGHT(a.Name,len(a.Name)-len(x.CompanyName__c)),'')}</span>
                                                                                                                        </td>
                                                                                                                    </tr>
                                                                                                                    <tr style="display:{!IF(OR(AND(ISBLANK(x.StreetAddress__c),ISBLANK(a.BillingStreet)),!$ObjectType.Account.fields.Billingstreet.Accessible,!$ObjectType.Breadwinner_Account_Connection__c.fields.StreetAddress__c.Accessible), 'none', 'table-row')};">
                                                                                                                        <td style="width:90%;background-color:{!if(ISBLANK(x.StreetAddress__c),if(ISBLANK(a.BillingStreet),'','rgba(255, 228, 128, 0.33)'),if(ISBLANK(a.BillingStreet),'rgba(255, 228, 128, 0.33)',if(UPPER(x.StreetAddress__c) == UPPER(a.BillingStreet),'','rgba(255, 0, 0, 0.19)')))};">
                                                                                                                            <apex:outputText value="{!x.Bread_Winner__StreetAddress__c}" style="white-space:normal;" />
                                                                                                                            <span style="white-space:normal;visibility:hidden;">{!if(len(x.StreetAddress__c) < len(a.BillingStreet),RIGHT(a.BillingStreet,len(a.BillingStreet)-len(x.StreetAddress__c)),'')}</span>
                                                                                                                        </td>
                                                                                                                    </tr>
                                                                                                                    <tr style="display:{!IF(OR(AND(ISBLANK(x.City__c),ISBLANK(a.BillingCity)),!$ObjectType.Account.fields.BillingCity.Accessible,!$ObjectType.Breadwinner_Account_Connection__c.fields.City__c.Accessible), 'none', 'table-row')};">
                                                                                                                        <td style="width:90%;background-color:{!if(ISBLANK(x.City__c),if(ISBLANK(a.BillingCity),'','rgba(255, 228, 128, 0.33)'),if(ISBLANK(a.BillingCity),'rgba(255, 228, 128, 0.33)',if(UPPER(x.City__c) == UPPER(a.BillingCity),'','rgba(255, 0, 0, 0.19)')))};">
                                                                                                                            <apex:outputText value="{!x.Bread_Winner__City__c}"/>
                                                                                                                        </td>
                                                                                                                    </tr>
                                                                                                                    <tr style="display:{!IF(OR(AND(ISBLANK(x.Region__c),ISBLANK(a.BillingState)),!$ObjectType.Account.fields.BillingState.Accessible,!$ObjectType.Breadwinner_Account_Connection__c.fields.Region__c.Accessible), 'none', 'table-row')};">
                                                                                                                        <td style="width:90%;background-color:{!if(ISBLANK(x.Region__c),if(ISBLANK(a.BillingState),'','rgba(255, 228, 128, 0.33)'),if(ISBLANK(a.BillingState),'rgba(255, 228, 128, 0.33)',if(UPPER(x.Region__c) == UPPER(a.BillingState),'','rgba(255, 0, 0, 0.19)')))};">
                                                                                                                            <apex:outputText value="{!x.Bread_Winner__Region__c}"/>
                                                                                                                        </td>
                                                                                                                    </tr>
                                                                                                                    <tr style="display:{!IF(OR(AND(ISBLANK(x.PostalCode__c),ISBLANK(a.BillingPostalCode)),!$ObjectType.Account.fields.BillingPostalCode.Accessible,!$ObjectType.Breadwinner_Account_Connection__c.fields.PostalCode__c.Accessible), 'none', 'table-row')};">
                                                                                                                        <td style="width:90%;background-color:{!if(ISBLANK(x.PostalCode__c),if(ISBLANK(a.BillingPostalCode),'','rgba(255, 228, 128, 0.33)'),if(ISBLANK(a.BillingPostalCode),'rgba(255, 228, 128, 0.33)',if(UPPER(x.PostalCode__c) == UPPER(a.BillingPostalCode),'','rgba(255, 0, 0, 0.19)')))};">
                                                                                                                            <apex:outputText value="{!x.Bread_Winner__PostalCode__c}"/>
                                                                                                                        </td>
                                                                                                                    </tr>
                                                                                                                    <tr style="display:{!IF(OR(AND(ISBLANK(x.Country__c),ISBLANK(a.BillingCountry)),!$ObjectType.Account.fields.BillingCountry.Accessible,!$ObjectType.Breadwinner_Account_Connection__c.fields.Country__c.Accessible), 'none', 'table-row')};">
                                                                                                                        <td style="width:90%;background-color:{!if(ISBLANK(x.Country__c),if(ISBLANK(a.BillingCountry),'','rgba(255, 228, 128, 0.33)'),if(ISBLANK(a.BillingCountry),'rgba(255, 228, 128, 0.33)',if(UPPER(x.Country__c) == UPPER(a.BillingCountry),'','rgba(255, 0, 0, 0.19)')))};">
                                                                                                                            <apex:outputText value="{!x.Bread_Winner__Country__c}"/>
                                                                                                                        </td>
                                                                                                                    </tr>
                                                                                                                </table>
                                                                                                            </div>
                                                                                                        </td>
                                                                                                    </tr>
                                                                                                </table>
                                                                                            </div>
                                                                                        </td>
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td class="slds-box" style="border-top:0px;">
                                                                                            <div class="slds-m-top_xx-small slds-text-body_small">
                                                                                                <img src="{!URLFOR($Resource.Breadwinner_Xero, 'Breadwinner_Xero/Images/xero_logo_30px.png')}"/> &nbsp; Xero Contact
                                                                                            </div>
                                                                                        </td>   
                                                                                    </tr>
                                                                                    <tr>
                                                                                        <td><div class="slds-m-top_small"></div></td>
                                                                                    </tr>
                                                                                </apex:repeat>
                                                                            </table>
                                                                        </div>
                                                                    </td>
                                                                    <td class="slds-col slds-size_1-of-1 slds-small-size_1-of-12 slds-medium-size_1-of-12" style="width:5%;">
                                                                    </td>
                                                                    <td style="vertical-align: middle;" class="slds-col slds-size_1-of-1 slds-small-size_5-of-12 slds-medium-size_5-of-12">
                                                                        <div class="slds-m-around_large">
                                                                            <table style="width:100%;" class="slds-table slds-no-row-hover">
                                                                                <tr>
                                                                                    <td style="width:100%;border-bottom:0px;" class="slds-box">
                                                                                        <div class="slds-p-around_x-small slds-m-left_large slds-m-right_large">
                                                                                            <table style="width:100%;" class="slds-table slds-no-row-hover">
                                                                                                <tr>
                                                                                                    <td>
                                                                                                        <div style="width:100%;" class="slds-text-heading_medium slds-text-align_left slds-text-color_default">
                                                                                                            <apex:outputText value="{!a.Name}" style="white-space:normal;"/>
                                                                                                        </div>
                                                                                                    </td>                                                   
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td class="slds-border_top slds-theme_shade">
                                                                                                        <div class="slds-text-heading_small slds-p-left_large slds-p-right_large slds-p-bottom_small slds-p-top_small" style="font-size:14px;">
                                                                                                            <table style="width:100%;" class="innermost_table">
                                                                                                                <tr>
                                                                                                                    <td><apex:outputText value="{!a.Name}" style="white-space:normal;"/></td>
                                                                                                                </tr>
                                                                                                                <tr style="display:{!IF(OR(ISBLANK(a.BillingStreet),!$ObjectType.Account.fields.Billingstreet.Accessible,!$ObjectType.Breadwinner_Account_Connection__c.fields.StreetAddress__c.Accessible), 'none', 'table-row')};">
                                                                                                                    <td><apex:outputText value="{!a.BillingStreet}" style="white-space:normal;"/></td>
                                                                                                                </tr>
                                                                                                                <tr style="display:{!IF(OR(ISBLANK(a.BillingCity),!$ObjectType.Account.fields.BillingCity.Accessible,!$ObjectType.Breadwinner_Account_Connection__c.fields.City__c.Accessible), 'none', 'table-row')};">
                                                                                                                    <td><apex:outputText value="{!a.BillingCity}"/></td>
                                                                                                                </tr>
                                                                                                                <tr style="display:{!IF(OR(ISBLANK(a.BillingState),!$ObjectType.Account.fields.BillingState.Accessible,!$ObjectType.Breadwinner_Account_Connection__c.fields.Region__c.Accessible), 'none', 'table-row')};">
                                                                                                                    <td><apex:outputText value="{!a.BillingState}"/></td>
                                                                                                                </tr>
                                                                                                                <tr style="display:{!IF(OR(ISBLANK(a.BillingPostalCode),!$ObjectType.Account.fields.BillingPostalCode.Accessible,!$ObjectType.Breadwinner_Account_Connection__c.fields.PostalCode__c.Accessible), 'none', 'table-row')};">
                                                                                                                    <td><apex:outputText value="{!a.BillingPostalCode}"/></td>
                                                                                                                </tr>
                                                                                                                <tr style="display:{!IF(OR(ISBLANK(a.BillingCountry),!$ObjectType.Account.fields.BillingCountry.Accessible,!$ObjectType.Breadwinner_Account_Connection__c.fields.Country__c.Accessible), 'none', 'table-row')};">
                                                                                                                    <td><apex:outputText value="{!a.BillingCountry}"/></td>
                                                                                                                </tr>
                                                                                                            </table>
                                                                                                        </div>
                                                                                                    </td>
                                                                                                </tr>                                                                    
                                                                                            </table>
                                                                                        </div>
                                                                                    </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td class="slds-box" style="border-top:0px;">
                                                                                        <div class="slds-m-top_xx-small slds-m-right_x-small slds-float_right slds-text-body_small">
                                                                                            Salesforce Account &nbsp; <img src="{!URLFOR($Resource.Breadwinner_Xero, 'Breadwinner_Xero/Images/sf_logo_30px.png')}"/>  
                                                                                        </div>
                                                                                    </td>   
                                                                                </tr>
                                                                            </table>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                <tr>
                                                                    <td><div class="slds-m-top_large"></div></td>
                                                                </tr>
                                                            </apex:repeat>
                                                        </table>
                                                    </div>
                                                </apex:outputPanel>
                                                <!-- MORE XERO CONTACTS SECTION END -->
                                                
                                                <apex:outputPanel id="pagination" rendered="{!!zeroRecords}">
                                                    <div class="slds-m-around_x-large slds-align_absolute-center">
                                                        <apex:commandButton id="previousBtn" styleclass="slds-button slds-button_brand" value="Previous" action="{!previous}" reRender=" SingleContactSection,MoreContactsSection,pagination" disabled="{!hasPrevious}" status="assign-action-status-addresssync" oncomplete="lightningMessageStyle();"/>
                                                        <apex:commandButton id="nextBtn" styleclass="slds-button slds-button_brand" value="Next" action="{!next}" reRender="SingleContactSection,MoreContactsSection,pagination" disabled="{!hasNext}" status="assign-action-status-addresssync" oncomplete="lightningMessageStyle();"/> 
                                                    </div>
                                                </apex:outputPanel>
                                                
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </div>
                                    <!-- Address Sync section end here-->
                                    <div id="TOOLS-3" class="slds-hide" role="tabpanel" aria-labelledby="InvoiceCollection">                                         
                                        <!-- Tab Header Starts -->
                                        <apex:outputPanel rendered="{!isConsumerDetailFilled}">
                                            <div class="slds-page-header slds-m-bottom_small" role="banner" style="background:#f7f9fb;" >
                                                <div class="slds-media slds-media_center">
                                                    <div class="slds-media__figure">
                                                        <span class="slds-icon_container slds-icon-custom-custom17">
                                                            <svg aria-hidden="true" class="slds-icon">
                                                                <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/custom-sprite/svg/symbols.svg#custom17')}"></use>
                                                            </svg>
                                                        </span>
                                                    </div>
                                                    <div class="slds-media__body">
                                                        <p class="slds-page-header__title slds-truncate" title="Invoice Collection">Invoice Collection</p>
                                                        <p class="slds-text-body_small">Breadwinner  Xero </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>
                                        <apex:outputPanel layout="block" rendered="{!IF(orgStatus =='expired', true, false)}" styleClass="slds-m-horizontal_small">                                                                                     
                                            <apex:pageMessage severity="Warning" summary="Warning: You must have an active subscription to use this feature."></apex:pageMessage>
                                        </apex:outputPanel>
                                        <apex:outputPanel layout="block" rendered="{!AND(orgStatus !='expired', NOT(isConsumerDetailFilled))}" styleClass="slds-m-horizontal_small">
                                            <apex:pageMessage severity="Warning" summary="Warning: Please connect to a Xero Org from Setup section of Breadwinner tab.">
                                            </apex:pageMessage>                                            
                                        </apex:outputPanel>
                                        <apex:outputPanel layout="block" rendered="{!!$ObjectType.Bread_Winner__Invoice__c.Accessible}" styleClass="slds-m-horizontal_small">
                                            <apex:pageMessage severity="Warning" summary="Warning: You do not have Read access on the Invoice object. So, please ask your Administrator to provide you the required access.">
                                            </apex:pageMessage>                                            
                                        </apex:outputPanel>
                                        <!-- Tab Header Ends -->
                                        <!-- Component Starts -->
                                        <apex:outputPanel id="componentsection" rendered="{!AND(orgStatus != 'expired',isConsumerDetailFilled, $ObjectType.Bread_Winner__Invoice__c.Accessible)}">
                                            <apex:outputPanel layout="block" styleClass="slds-m-horizontal_small">
                                                <apex:pageMessage severity="info" summary="This new tool, Invoice Collection, is in Beta and is still under active development."></apex:pageMessage>
                                            </apex:outputPanel>                                            
                                            <apex:outputPanel layout="block">
                                                <apex:includeLightning />                                                                                       
                                                <div id="lghtcmp" />                                                
                                                <script>   
                                                function loadInvoiceCollection(){
                                                    j$("#lghtcmp").empty();  
                                                    try{
                                                        //var nmspc = +{!JSENCODE(cmpNameSpacePrefix)};
                                                        var cmp_name = "{!JSENCODE(cmpNameSpacePrefix)}:BreadwinnerInvoiceCollectionApp";
                                                        var child_cmp = "{!JSENCODE(cmpNameSpacePrefix)}:BreadwinnerInvoiceCollectioncmp";
                                                        console.log(cmp_name, child_cmp );                                                        
                                                        $Lightning.use(cmp_name, function() {
                                                            $Lightning.createComponent(child_cmp,
                                                                                       {},
                                                                                       "lghtcmp",
                                                                                       function(cmp) {
                                                                                           console.log('Component created');
                                                                                       });
                                                        });
                                                    }
                                                    catch(ex){
                                                        console.log('Exception while loading the Component :::: ',ex.message);
                                                    }
                                                }                                               
                                                </script>
                                            </apex:outputPanel>
                                        </apex:outputPanel>                                         
                                        <!-- Component Ends -->                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                    </apex:outputPanel>
                    <apex:outputPanel layout="block" styleClass="slds-align_absolute-center" rendered="{!NOT(isBreadwinnerConnection)}">
                        
                        <div >
                            
                            
                            <div class="slds-page-header slds-m-bottom_large" role="banner">
                                <div class="slds-media slds-media_center">
                                    <div class="slds-media__figure">
                                        <img src="{!URLFOR($Resource.Breadwinner_Xero, 'Breadwinner_Xero/Images/BreadwinnerLogo.png')}" alt="Breadwinner Logo" />
                                    </div>
                                    <div class="slds-media__body">
                                        <ul class="slds-list_dotted">
                                            <li class="slds-text-heading_small" >You have selected to connect to Xero using: {!connectionTypeSelected}</li>
                                            <li class="slds-text-heading_small slds-m-top_x-small" >All Apex, Visualforce, Lightning Components, and everything else contained in this app are fully functional</li>
                                            <li class="slds-text-heading_small slds-m-top_x-small" >As this is a free app, no support is provided.</li>
                                            <li class="slds-text-heading_small slds-m-top_x-small" >To change how you connect to Xero, please&nbsp;<apex:commandLink value="change your Connection Settings" action="{!showPopup}" reRender="tstpopup"/>.</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                    </apex:outputPanel>
                    <apex:outputPanel id="tstpopup">
                        <apex:outputPanel styleClass="popupBackground" layout="block" rendered="{!displayPopUp}">
                            
                            <div role="alertdialog" tabindex="-1" aria-labelledby="prompt-heading-id" aria-describedby="prompt-message-wrapper" class="slds-modal slds-fade-in-open slds-modal_prompt">
                                <div class="slds-modal__container">
                                    <div class="slds-modal__header slds-theme_info slds-theme_alert-texture">        
                                        <h2 class="slds-text-heading_medium" id="prompt-heading-id">Connection Settings</h2>
                                    </div>
                                    <div class="slds-modal__content slds-p-around_medium">
                                        <div>
                                            <p>Please select how you would like to connect to Xero. Please note that some of these options may require payment to a third party data service.</p>
                                            <div class="slds-m-top_medium">
                                                
                                                <apex:inputHidden value="{!bwsettingWrapper.Connection_Type}" id="ConnectionTypeValue"/>
                                                
                                                <fieldset class="slds-form-element">
                                                    <legend class="slds-form-element__legend slds-form-element__label">Data Services</legend>
                                                    
                                                    <apex:repeat value="{!ConnectionTypeKeys}" var="ConxnKey" >
                                                        <div class="slds-form-element__control">
                                                            <label class="slds-radio">
                                                                <input type="radio" id="{!ConxnKey}" name="Dataoptions" onclick="SelectedService('{!ConxnKey}');" />
                                                                <span class="slds-radio_faux"></span>
                                                                <span class="slds-form-element__label">{!ConnectionTypeMap[ConxnKey]}</span>
                                                            </label>
                                                        </div>
                                                    </apex:repeat>
                                                </fieldset>
                                                <script>
                                                document.getElementById('{!JSENCODE(bwsettingWrapper.Connection_Type)}').checked = true;
                                                </script>                                                        
                                                <script>
                                                function SelectedService(inputvalue) {
                                                    document.getElementById('{!JSENCODE($Component.theForm.ConnectionTypeValue)}').value = inputvalue;
                                                }
                                                </script>
                                                
                                            </div>
                                            
                                            
                                        </div>
                                    </div>
                                    <div class="slds-modal__footer slds-theme_default">
                                        <apex:commandButton action="{!saveBWSetting}" styleClass="slds-button slds-button_brand" status="assign-action-status" value="Save"/>&nbsp;&nbsp;
                                        <apex:commandButton value="Cancel" styleClass="slds-button slds-button_neutral" status="assign-action-status" action="{!closePopup}" rerender="tstpopup"/>
                                    </div>
                                </div>
                            </div>
                            <div class="slds-backdrop slds-backdrop_open"></div> 
                        </apex:outputPanel>
                    </apex:outputPanel>
                </div>
                
                <apex:actionFunction status="assign-action-status" name="checkSetupTabStepsCompletedFunc" action="{!initializeApp}" id="checkSetupTabStepsCompletedId"   reRender="SynView, syncIcons, MutliOrgAccountSyncView, accountSyncPanel, SyncViewImg, InactiveUserMessage" oncomplete="HideStyleSheet();message();"/> 
                <apex:actionFunction status="assign-action-status" name="showspinner" reRender="nothning"/>
                <!-- <apex:actionFunction name="checkIfLayoutIsUpdated" action="{!checkIfPagelayoutsAreUpdated}" status="assign-action-status" oncomplete="checkIfOpportunityPagelayoutsAreUpdated();HideStyleSheet();message();"/> -->
                <apex:actionFunction name="checkIfOpportunityPagelayoutsAreUpdated" action="{!checkIfOpportunityPagelayoutsAreUpdated}" status="assign-action-status"  reRender="progressPanel,infoPanel,pagelayoutCheck,V2Section,pageLayoutUpdatePanel,pageLayoutHeadingPanel,OnOfftoggles,V2Pagelayouts" oncomplete="HideStyleSheet();message();"/>
            </apex:form>
            <apex:outputPanel id="scriptPanel">   
                
                <script>
                function displayMessageOnSave(){ 
                    
                    alert('You must install new version of Breadwinner from Appexchange, in order to let Breadwinner work for you.');                  
                } 
                </script>
            </apex:outputPanel> 
            
            <apex:outputPanel id="RestartHistoricalSyncScriptPanel">
                <script>
                function onCompletionOfRestartHistoricalSync()
                {
                    if({!isRestartHistoricalSyncSuccessful} == true)
                        alert('Historical Sync was successfully restarted');
                    else
                        alert('Error');                
                }
                </script>
            </apex:outputPanel>
            
            <script>
            function onTabEnterPushToInteractionLog(tabName)
            {
                Visualforce.remoting.Manager.invokeAction('{!$RemoteAction.BreadwinnerController.pushInteractionLogOnTabEnter}', 
                                                          tabName, 
                                                          function(result, event){
                                                              if (event.status) 
                                                              {                           
                                                              } 
                                                              else if (event.type === 'exception') 
                                                              {                           
                                                              } 
                                                                  else 
                                                                  {                           
                                                                  }
                                                          }, 
                                                          {escape: true}
                                                         );    
            }                
            </script>
            
            <script type="text/javascript">
            function confirmRefreshing(){
                var c = confirm("This will manually refresh Xero Accounting Information, such as Invoice Branding Themes, Revenue Accounts, Tax Rates, and Tracking Codes. \n\nBreadwinner refreshes these every night automatically, so refreshing manually is not necessary unless you need them refreshed right now.\n\nPlease note that if you were in the middle of creating an Invoice, you will have to start over again for that Invoice to see the updated values.\n\nClick OK to refresh them.");
                if(c){
                    refreshXeroAccountingDetails();
                }
            }
            
            function ReconnectToXero(){
                var conf = confirm("To reconnect Breadwinner, you must be a Xero Admin. Only click OK if you are also a Xero Admin, otherwise please click Cancel.\n\nYou will be directed to Xero where you will authorize Breadwinner. After authorizing, you will return to the Breadwinner tab in Salesforce. Please look for the tab 'Configuration' below the Setup tab. This is where you can configure additional settings such as your default due date on Invoices created through Breadwinner.");
                if(conf){
                    return true;
                }
                else{
                    return false;
                }
            }
            
            
            </script>
            
            <script type="text/javascript">
            function createRemoteSiteMetadata(){
                try{
                    var binding = new XMLHttpRequest();
                    var host = "{!LEFT($Api.Enterprise_Server_URL_350, FIND('/services',$Api.Enterprise_Server_URL_350))}";
                    var request = 
                        '<?xml version="1.0" encoding="UTF-8"?><env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><env:Header><SessionHeader xmlns="http://soap.sforce.com/2006/04/metadata"><sessionId>{!$Api.Session_ID}</sessionId></SessionHeader></env:Header><env:Body><upsertMetadata xmlns="http://soap.sforce.com/2006/04/metadata"><metadata xsi:type="RemoteSiteSetting"><fullName>Breadwinner_Xero_MyServer</fullName><description>Required to use Metadata API, created by Breadwinner</description><disableProtocolSecurity>false</disableProtocolSecurity><isActive>true</isActive><url>'+host+'</url></metadata></upsertMetadata></env:Body></env:Envelope>';
                    
                    binding.open('POST', host+'services/Soap/m/35.0');
                    binding.setRequestHeader('SOAPAction','""');
                    binding.setRequestHeader('Content-Type', 'text/xml');
                    binding.onreadystatechange =
                        function() {
                        if(this.readyState==4) {
                            var parser = new DOMParser();
                            var doc  = parser.parseFromString(this.response, 'application/xml');
                            var errors = doc.getElementsByTagName('errors');
                            console.log(errors);
                        }
                    }
                    binding.send(request);
                    deleteMDfield();
                    createRemoteSiteMetadata2();
                }
                catch(error){
                    console.log(error);
                }
            }
            
            </script>
            <apex:outputPanel id="chartPanel">
                <script type="text/javascript">
                
                google.load("visualization", "1", {packages:["table"]});
                
                function drawTable() {
                    
                    document.getElementById("StatusLogSpinner").style.display = "" ;
                    
                    Visualforce.remoting.Manager.invokeAction(
                        '{!$RemoteAction.BreadwinnerController.gettableChartData}', 
                        function(result, event){
                            if (event.status) {
                                if(result.length > 0){
                                    var dataAsArray = new Array();
                                    var columnArray = ["Log Id", "Event Type", "Event Detail", "Additional Detail", "Time"];
                                    dataAsArray.push(columnArray);
                                    
                                    for (var i=0; i<result.length; i++) {
                                        var obj =result[i];
                                        var rowArray = [obj.log_id, obj.event_type, obj.event_detail, decodeHtml(obj.additional_detail), obj.timestamp];
                                        dataAsArray.push(rowArray );
                                    }
                                    
                                    var data = google.visualization.arrayToDataTable(dataAsArray);
                                    
                                    var table = new google.visualization.Table(document.getElementById('table_div'));
                                    
                                    table.draw(data, {showRowNumber: false});
                                    humanTranslation();
                                }
                                else{
                                    document.getElementById("message").innerHTML = "Congratulations! There are no error logs.";
                                    document.getElementById("table_div").style.display = "none" ;                        
                                }
                                document.getElementById("StatusLogSpinner").style.display = "none" ;
                            }
                        }
                    );
                }
                
                function decodeHtml(html) {
                    var txt = document.createElement("textarea");
                    txt.innerHTML = html;
                    var decodedURIComp = decodeURIComponent(txt.value);
                    var repalceAmpersend=decodedURIComp.replace(/&amp;/g, '&');
                    var repalceQuotes=repalceAmpersend.replace(/&quot/g, '"');
                    var repalceNewLines=repalceQuotes.replace(/&nl/g, ' ');
                    return repalceNewLines;
                }
                function humanTranslation(){
                    //var rawresponse=  //j$("table.google-visualization-table-table td.google-visualization-table-td:nth-child(4):contains(REQUIRED_FIELD_MISSING)").css({"background-color": "yellow", "font-size": "200%"});
                    
                    j$( "table.google-visualization-table-table td.google-visualization-table-td:nth-child(4):contains(REQUIRED_FIELD_MISSING)" ).each(function( index ) {
                        
                        var geteachTD=j$( this );
                        
                        var windowparentlocation=String(window.location);
                        var getindex=windowparentlocation.search("sfdcIFrameOrigin=");
                        var resultedAccountFieldsURL='';
                        if(parseInt(getindex)>-1){
                            resultedAccountFieldsURL='/lightning/setup/object/Account/FieldsAndRelationships/view';
                        }
                        else{
                            resultedAccountFieldsURL='/p/setup/layout/LayoutFieldList?type=Account&setupid=AccountFields';
                        }
                        // check oppty or account
                        // get record id
                        // create link and modify text with Human trasalation text
                        // append
                        var gettdtext=geteachTD.text();
                        if(gettdtext.match(/001/g)){
                            var AccountCount = gettdtext.match(/001/g).length;
                            console.log("---------Account Count--------"+gettdtext.match(/001/g).length);
                            var textPart1 = "<b>Human Translation:</b> One or more of your fields are required on the Account. But, on this <b>";
                            var i;
                            for(i =1; i<=AccountCount;i++){
                                textPart1 += ' ';
                                var recordId=gettdtext.substring(gettdtext.search("001"),gettdtext.search("001")+18);
                                var opptyORAccountLink = "<a href=\'{!$Site.BaseUrl}/"+recordId+"\' target='_blank'>Account</a>";
                                if(AccountCount > 1)
                                    opptyORAccountLink = "<a href=\'{!$Site.BaseUrl}/"+recordId+"\' target='_blank'>Account"+i+"</a>";
                                textPart1 += opptyORAccountLink;
                                gettdtext = gettdtext.replace(recordId, "Account"+i);
                            }
                            var AcctErr = geteachTD.text().split("id 001");
                            console.log('------AcctErr[1]--------'+AcctErr);
                            console.log('------AcctErr[1]--------'+AcctErr[1]);
                            var fields = AcctErr[1].match(/\[.*?\]/);
                            console.log("------------fields--------------"+fields)
                            var textPart = textPart1+'</b> those fields are blank. Please populate <b>'+fields+'</b>. Other Accounts may have the same problem, but this was the Account that caused the error.';  
                            geteachTD.append('<div><p><i>'+textPart+'</i></p></div>');
                        }
                        if(gettdtext.match(/006/g)){
                            var OptyCount = gettdtext.match(/006/g).length;
                            var translatedText = "<b>Human Translation:</b> One or more of your fields are required on the Opportunity. But, on this<b>"; 
                            if(geteachTD.text().match(/001/g))
                                translatedText = 'One or more of your fields are required on the Opportunity. But, on this<b>';                            
                            var i;
                            for(i =1; i<=OptyCount;i++){
                                translatedText +=' ';
                                var recordId=gettdtext.substring(gettdtext.search("006"),gettdtext.search("006")+18);
                                var opptyORAccountLink = "<a href=\'{!$Site.BaseUrl}/"+recordId+"\' target='_blank'>Opportunity</a>";
                                if(OptyCount > 1)
                                    opptyORAccountLink = "<a href=\'{!$Site.BaseUrl}/"+recordId+"\' target='_blank'>Opportunity"+i+"</a>";
                                translatedText += opptyORAccountLink;
                                gettdtext = gettdtext.replace(recordId, "Opportunity"+i);
                            }
                            var OptyErr = geteachTD.text().split("id 006");
                            var fields=OptyErr[1].match(/\[.*?\]/);
                            var OptytranslatedText = translatedText+'</b> those fields are blank. Please populate <b>'+fields+'</b>. Other Opportunities may have the same problem, but this was the Account that caused the error.';  
                            geteachTD.append('<div><p><i>'+OptytranslatedText+'</i></p></div>');
                        }
                        if(gettdtext.match(/Exceptions while inserting Accounts:/g) || gettdtext.match(/Exceptions within last hour of sync:/g)){
                            var AccountFieldsURL = "<a href=\'{!$Site.BaseUrl}"+resultedAccountFieldsURL+"\' target='_blank'>Account Fields</a>";
                            var AcctErr = geteachTD.text();
                            var fields = AcctErr.match(/\[.*?\]/);
                            var AccountInsertText = '<b>Human Translation:</b> One or more of your fields are required on the Account, please remove the validations on fields <b>'+fields+'</b> by visiting <b>'+AccountFieldsURL+'</b> here.';  
                            geteachTD.append('<div><p><i>'+AccountInsertText+'</i></p></div>');
                        }
                    });
                    
                }
                </script>
                <script>
                function Check_PageLayoutsStatus(cb){
                    document.getElementById('PageLayoutsStatus').checked = cb.checked; 
                    SaveUpdatePagelayouts(cb.checked);
                }
                function Check_PageLayoutsStatus1(cb){      
                    document.getElementById('PageLayoutsStatus1').checked = cb.checked;        
                    SaveUpdatePagelayouts1(cb.checked);        
                }
                
                </script>
            </apex:outputPanel>
        </body>
    </html>
</apex:page>