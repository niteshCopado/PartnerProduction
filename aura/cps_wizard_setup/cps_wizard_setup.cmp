<aura:component controller="cps_PlaygroundWizardSetupController">
    <aura:attribute name="playground" type="Object" required="true" />
    <aura:attribute name="stage" type="String" required="true" />
    <aura:attribute name="eventMessagesToIgnore" type="String[]" />
    <aura:attribute name="jobs" type="Object[]" />
    <aura:attribute name="loading" type="Boolean" default="false" />
    <aura:attribute name="view" type="Integer" default="1" />
    
    <aura:attribute name="authTasks" type="Object[]" />
    <aura:attribute name="sandboxToAuthorize" type="Object" />
    <aura:attribute name="setupEnded" type="Boolean" default="false" />
    
    <aura:handler name="init" value="{! this }" action="{! c.doInit }" />
    <aura:handler event="c:cps_c1p_notifier" action="{! c.handleC1PEvents }" />
    <c:cps_wizard_body>
        <aura:if isTrue="{! v.loading }">
            <c:cps_loading />
        </aura:if>
        <aura:if isTrue="{! !v.loading }">
            <aura:if isTrue="{! v.view == 1 }">
                <div class="view-1 flex col">
                    <c:cps_wizard_heading id="oauthTitle">{! $Label.c.CPS_Setup_OAuth_Title }</c:cps_wizard_heading>
                    
                    <c:cps_wizard_columnsLayout tasks="{! v.authTasks }" stage="{!v.stage}">
                        <c:cps_wizard_text id="OauthDescription">{! $Label.c.CPS_Setup_OAuth_Description }</c:cps_wizard_text>
                        <img src="{! $Resource.cps_assets + '/Assets/salesforce_logo.png' }" style="height:63px; width:89px;" />
                        
                        <aura:if isTrue="{! v.playground.All_Sandboxes_Authorized__c==true }">
                            <h6>All done here</h6>
                        </aura:if>
                        <aura:if isTrue="{! !v.playground.All_Sandboxes_Authorized__c==true }">
                            <a id="{! 'lnk'+v.sandboxToAuthorize.name }" href="{! v.sandboxToAuthorize.link }">Login with Salesforce to your {! v.sandboxToAuthorize.name + ' ' +v.sandboxToAuthorize.type}</a>
                            <c:cps_wizard_text id="usernameHint" size="small">{! v.sandboxToAuthorize.hint }</c:cps_wizard_text>
                        </aura:if>
                    </c:cps_wizard_columnsLayout>
                    
                    <c:cps_Button id="btnContinueFromOrgAuth" onclick="{! c.continue }" disabled="{! !v.playground.All_Sandboxes_Authorized__c==true }">{! $Label.c.CPS_Continue_Button }</c:cps_Button>
                </div>
            </aura:if>
            
            <aura:if isTrue="{! v.view == 2 }">
                <div class="view-2 flex col">
                    <c:cps_wizard_heading id="setupTitle">{! $Label.c.CPS_Setup_Create_Title }</c:cps_wizard_heading>
                    
                    <c:cps_wizard_columnsLayout tasks="{! v.jobs }" stage="{!v.stage}">
                        <c:cps_wizard_text id="installDescription">{! $Label.c.CPS_Install_Description }</c:cps_wizard_text>
                        <img src="{! $Resource.cps_assets + '/Assets/almost_there.png' }" style="height:81px; width:128px;" />
                        <h6>{! $Label.c.CPS_Setup_Create_Footnote }</h6>
                    </c:cps_wizard_columnsLayout>
                    
                    <c:cps_Button id="btnContinue" onclick="{! c.changeStep }" disabled="{! !v.setupEnded }">{! $Label.c.CPS_Continue_Button }</c:cps_Button>
                </div>
            </aura:if>
        </aura:if>
    </c:cps_wizard_body>
</aura:component>